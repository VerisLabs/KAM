<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>KAM Contracts Documentation</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">KAM Contracts Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/VerisLabs/KAM" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="kam-protocol"><a class="header" href="#kam-protocol">KAM Protocol</a></h1>
<p>KAM is an institutional asset management protocol that implements a dual-track architecture for both institutional and retail access. The protocol creates kTokens (kUSD, kBTC) backed 1:1 by real assets (USDC, WBTC), providing institutions with direct minting and redemption capabilities while offering retail users yield opportunities through external strategy deployment. The system features batch processing with virtual balance accounting, two-phase settlement with timelock proposals, and modular vault architecture through diamond pattern implementation.</p>
<p>For more information, refer to the <a href="./docs/architecture.html">architecture documentation</a>.</p>
<h2 id="usage"><a class="header" href="#usage">Usage</a></h2>
<p>KAM comes with a comprehensive set of tests written in Solidity, which can be executed using Foundry.</p>
<p>To install Foundry:</p>
<pre><code class="language-sh">curl -L https://foundry.paradigm.xyz | bash
</code></pre>
<p>This will download foundryup. To start Foundry, run:</p>
<pre><code class="language-sh">foundryup
</code></pre>
<p>To clone the repo:</p>
<pre><code class="language-sh">git clone https://github.com/kam-protocol/kam.git &amp;&amp; cd kam
</code></pre>
<h3 id="installing-dependencies"><a class="header" href="#installing-dependencies">Installing Dependencies</a></h3>
<p>The project uses Soldeer for dependency management. To install all dependencies:</p>
<pre><code class="language-sh">forge soldeer install
</code></pre>
<p>This will install all dependencies specified in <code>soldeer.toml</code> and <code>soldeer.lock</code>.</p>
<h2 id="testing"><a class="header" href="#testing">Testing</a></h2>
<h3 id="in-default-mode"><a class="header" href="#in-default-mode">in <code>default</code> mode</a></h3>
<p>To run the tests in a <code>default</code> mode:</p>
<pre><code class="language-sh">forge test
</code></pre>
<h3 id="in-coverage-mode"><a class="header" href="#in-coverage-mode">in <code>coverage</code> mode</a></h3>
<pre><code class="language-sh">forge coverage
</code></pre>
<h3 id="using-solx-compiler-optional"><a class="header" href="#using-solx-compiler-optional">Using solx compiler (optional)</a></h3>
<p>For faster compilation with the LLVM-based Solidity compiler, you can install and use solx:</p>
<p>Install solx:</p>
<pre><code class="language-sh">curl -L https://raw.githubusercontent.com/matter-labs/solx/main/install-solx | bash
</code></pre>
<p>Use with forge:</p>
<pre><code class="language-sh">forge build --use $(which solx)
forge test --use $(which solx)
</code></pre>
<h2 id="smart-contracts-documentation"><a class="header" href="#smart-contracts-documentation">Smart Contracts Documentation</a></h2>
<p>Generate and view the Foundry documentation:</p>
<pre><code class="language-sh">forge doc --serve --port 4000
</code></pre>
<p>This will open the documentation at http://localhost:4000</p>
<h2 id="protocol-documentation"><a class="header" href="#protocol-documentation">Protocol Documentation</a></h2>
<ul>
<li><a href="./docs/architecture.html">Architecture</a> - Complete protocol architecture and operational flows</li>
<li><a href="./docs/interfaces.html">Interfaces</a> - Interface documentation for all protocol contracts</li>
<li><a href="./docs/audits/audit-scope.html">Audit Scope</a> - Comprehensive audit scope and security considerations</li>
</ul>
<h2 id="for-integrators"><a class="header" href="#for-integrators">For Integrators</a></h2>
<h3 id="institutional-operations"><a class="header" href="#institutional-operations">Institutional Operations</a></h3>
<p>Institutions can mint kTokens 1:1 with underlying assets and request redemptions through batch settlement:</p>
<ul>
<li><code>kMinter.mint()</code> - Creates new kTokens by accepting underlying asset deposits</li>
<li><code>kMinter.requestRedeem()</code> - Initiates redemption process through batch settlement</li>
<li><code>kMinter.redeem()</code> - Executes redemption for settled batch requests</li>
<li><code>kMinter.cancelRequest()</code> - Cancels redemption requests before settlement</li>
</ul>
<h3 id="retail-operations"><a class="header" href="#retail-operations">Retail Operations</a></h3>
<p>Retail users can stake kTokens to earn yield from external strategies:</p>
<ul>
<li><code>kStakingVault.requestStake()</code> - Request to stake kTokens for yield-bearing stkTokens</li>
<li><code>kStakingVault.requestUnstake()</code> - Request to unstake stkTokens back to kTokens</li>
<li>Claims processed through vault's ClaimModule after batch settlement</li>
</ul>
<h3 id="virtual-balance-system"><a class="header" href="#virtual-balance-system">Virtual Balance System</a></h3>
<p>The protocol uses virtual balance accounting to optimize gas efficiency:</p>
<ul>
<li><code>kAssetRouter</code> maintains virtual balances between vaults and strategies</li>
<li>Physical transfers minimized to settlement operations only</li>
<li>All inter-vault transfers are virtual until settlement execution</li>
</ul>
<h3 id="batch-processing"><a class="header" href="#batch-processing">Batch Processing</a></h3>
<p>Requests are grouped into time-based batches for gas-efficient settlement:</p>
<ul>
<li>Each vault manages independent batch cycles</li>
<li>Batch receivers deployed per batch for isolated asset distribution</li>
<li>Settlement coordinated through timelock proposals with correction mechanisms</li>
</ul>
<h2 id="role-hierarchy"><a class="header" href="#role-hierarchy">Role Hierarchy</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Role</th><th>Permissions</th><th>Contracts</th></tr></thead><tbody>
<tr><td>OWNER</td><td>Ultimate control, upgrades</td><td>All</td></tr>
<tr><td>ADMIN_ROLE</td><td>Operational management</td><td>All</td></tr>
<tr><td>EMERGENCY_ADMIN_ROLE</td><td>Emergency pause</td><td>All</td></tr>
<tr><td>MINTER_ROLE</td><td>Mint/burn tokens</td><td>kToken</td></tr>
<tr><td>INSTITUTION_ROLE</td><td>Mint/redeem kTokens</td><td>kMinter</td></tr>
<tr><td>RELAYER_ROLE</td><td>Settle batches</td><td>kAssetRouter, BatchModule</td></tr>
</tbody></table>
</div>
<h2 id="safety"><a class="header" href="#safety">Safety</a></h2>
<p>This software is experimental and is provided "as is" and "as available".</p>
<p>No warranties are provided and no liability will be accepted for any loss incurred through the use of this codebase.</p>
<p>Always include thorough tests when using KAM to ensure it interacts correctly with your code.</p>
<h2 id="known-limitations"><a class="header" href="#known-limitations">Known Limitations</a></h2>
<ul>
<li>Settlement proposals require timelock delays, potentially causing settlement delays if parameters need correction</li>
<li>Virtual balances must remain synchronized with actual adapter holdings</li>
<li>Redemption completion depends on successful batch settlement and adapter cooperation</li>
<li>Adapter integrations require careful validation of different DeFi protocol settlement patterns</li>
</ul>
<h2 id="contributing"><a class="header" href="#contributing">Contributing</a></h2>
<p>The code is currently in a closed development phase. This is a proprietary protocol with restricted access.</p>
<h2 id="license"><a class="header" href="#license">License</a></h2>
<p>(c) 2025 KAM Protocol Ltd.</p>
<p>All rights reserved. This project uses a proprietary license.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents"><a class="header" href="#contents">Contents</a></h1>
<ul>
<li><a href="src/abstracts/Extsload.sol/abstract.Extsload.html">Extsload</a></li>
<li><a href="src/abstracts/Proxy.sol/abstract.Proxy.html">Proxy</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="extsload"><a class="header" href="#extsload">Extsload</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/abstracts/Extsload.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/abstracts/Extsload.sol//src/interfaces/IExtsload.sol/interface.IExtsload.html">IExtsload</a></p>
<p>Enables public storage access for efficient state retrieval by external contracts</p>
<p>This was taken from https://github.com/Uniswap/v4-core/blob/main/src/Extsload.sol</p>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="extsload-1"><a class="header" href="#extsload-1">extsload</a></h3>
<p>Reads a single storage slot</p>
<pre><code class="language-solidity">function extsload(bytes32 slot) external view returns (bytes32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>slot</code></td><td><code>bytes32</code></td><td>Storage slot to read</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>Value at the storage slot</td></tr>
</tbody></table>
</div>
<h3 id="extsload-2"><a class="header" href="#extsload-2">extsload</a></h3>
<p>Reads a single storage slot</p>
<pre><code class="language-solidity">function extsload(bytes32 startSlot, uint256 nSlots) external view returns (bytes32[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>startSlot</code></td><td><code>bytes32</code></td><td></td></tr>
<tr><td><code>nSlots</code></td><td><code>uint256</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32[]</code></td><td>Value at the storage slot</td></tr>
</tbody></table>
</div>
<h3 id="extsload-3"><a class="header" href="#extsload-3">extsload</a></h3>
<p>Reads a single storage slot</p>
<pre><code class="language-solidity">function extsload(bytes32[] calldata slots) external view returns (bytes32[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>slots</code></td><td><code>bytes32[]</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32[]</code></td><td>Value at the storage slot</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="proxy"><a class="header" href="#proxy">Proxy</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/abstracts/Proxy.sol">Git Source</a></p>
<p><em>This abstract contract provides a fallback function that delegates all calls to another contract using the EVM
instruction <code>delegatecall</code>. We refer to the second contract as the <em>implementation</em> behind the proxy, and it has to
be specified by overriding the virtual <a href="src/abstracts/Proxy.sol//src/abstracts/Proxy.sol/abstract.Proxy.html#_implementation">_implementation</a> function.
Additionally, delegation to the implementation can be triggered manually through the {_fallback} function, or to a
different contract through the {_delegate} function.
The success and return data of the delegated call will be returned back to the caller of the proxy.</em></p>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="_delegate"><a class="header" href="#_delegate">_delegate</a></h3>
<p><em>Delegates the current call to <code>implementation</code>.
This function does not return to its internal call site, it will return directly to the external caller.</em></p>
<pre><code class="language-solidity">function _delegate(address implementation) internal virtual;
</code></pre>
<h3 id="_implementation"><a class="header" href="#_implementation">_implementation</a></h3>
<p><em>This is a virtual function that should be overridden so it returns the address to which the fallback
function and <a href="src/abstracts/Proxy.sol//src/abstracts/Proxy.sol/abstract.Proxy.html#_fallback">_fallback</a> should delegate.</em></p>
<pre><code class="language-solidity">function _implementation() internal view virtual returns (address);
</code></pre>
<h3 id="_fallback"><a class="header" href="#_fallback">_fallback</a></h3>
<p><em>Delegates the current call to the address returned by <code>_implementation()</code>.
This function does not return to its internal call site, it will return directly to the external caller.</em></p>
<pre><code class="language-solidity">function _fallback() internal virtual;
</code></pre>
<h3 id="fallback"><a class="header" href="#fallback">fallback</a></h3>
<p><em>Fallback function that delegates calls to the address returned by <code>_implementation()</code>. Will run if no other
function in the contract matches the call data.</em></p>
<pre><code class="language-solidity">fallback() external payable virtual;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-1"><a class="header" href="#contents-1">Contents</a></h1>
<ul>
<li><a href="src/adapters/BaseAdapter.sol/contract.BaseAdapter.html">BaseAdapter</a></li>
<li><a href="src/adapters/CustodialAdapter.sol/contract.CustodialAdapter.html">CustodialAdapter</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="baseadapter"><a class="header" href="#baseadapter">BaseAdapter</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/adapters/BaseAdapter.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
OwnableRoles, ReentrancyGuardTransient</p>
<p>Abstract base contract for all protocol adapters</p>
<p><em>Provides common functionality and virtual balance tracking for external strategy integrations</em></p>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="admin_role"><a class="header" href="#admin_role">ADMIN_ROLE</a></h3>
<pre><code class="language-solidity">uint256 internal constant ADMIN_ROLE = _ROLE_0;
</code></pre>
<h3 id="emergency_admin_role"><a class="header" href="#emergency_admin_role">EMERGENCY_ADMIN_ROLE</a></h3>
<pre><code class="language-solidity">uint256 internal constant EMERGENCY_ADMIN_ROLE = _ROLE_1;
</code></pre>
<h3 id="k_minter"><a class="header" href="#k_minter">K_MINTER</a></h3>
<pre><code class="language-solidity">bytes32 internal constant K_MINTER = keccak256("K_MINTER");
</code></pre>
<h3 id="k_asset_router"><a class="header" href="#k_asset_router">K_ASSET_ROUTER</a></h3>
<pre><code class="language-solidity">bytes32 internal constant K_ASSET_ROUTER = keccak256("K_ASSET_ROUTER");
</code></pre>
<h3 id="base_adapter_storage_location"><a class="header" href="#base_adapter_storage_location">BASE_ADAPTER_STORAGE_LOCATION</a></h3>
<pre><code class="language-solidity">bytes32 private constant BASE_ADAPTER_STORAGE_LOCATION =
    0x5547882c17743d50a538cd94a34f6308d65f7005fe26b376dcedda44d3aab800;
</code></pre>
<h2 id="functions-2"><a class="header" href="#functions-2">Functions</a></h2>
<h3 id="_getbaseadapterstorage"><a class="header" href="#_getbaseadapterstorage">_getBaseAdapterStorage</a></h3>
<pre><code class="language-solidity">function _getBaseAdapterStorage() internal pure returns (BaseAdapterStorage storage $);
</code></pre>
<h3 id="__baseadapter_init"><a class="header" href="#__baseadapter_init">__BaseAdapter_init</a></h3>
<p>Initializes the base adapter</p>
<pre><code class="language-solidity">function __BaseAdapter_init(
    address registry_,
    address owner_,
    address admin_,
    string memory name_,
    string memory version_
)
    internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>registry_</code></td><td><code>address</code></td><td>Address of the kRegistry contract</td></tr>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Address of the owner</td></tr>
<tr><td><code>admin_</code></td><td><code>address</code></td><td>Address of the admin</td></tr>
<tr><td><code>name_</code></td><td><code>string</code></td><td>Human readable name for this adapter</td></tr>
<tr><td><code>version_</code></td><td><code>string</code></td><td>Version string for this adapter</td></tr>
</tbody></table>
</div>
<h3 id="_registry"><a class="header" href="#_registry">_registry</a></h3>
<p>Returns the registry contract interface</p>
<pre><code class="language-solidity">function _registry() internal view returns (IkRegistry);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>IkRegistry</code></td><td>IkRegistry interface for registry interaction</td></tr>
</tbody></table>
</div>
<h3 id="_getkassetrouter"><a class="header" href="#_getkassetrouter">_getKAssetRouter</a></h3>
<p>Gets the kAssetRouter singleton contract address</p>
<pre><code class="language-solidity">function _getKAssetRouter() internal view returns (address router);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>router</code></td><td><code>address</code></td><td>The kAssetRouter contract address</td></tr>
</tbody></table>
</div>
<h3 id="_getrelayer"><a class="header" href="#_getrelayer">_getRelayer</a></h3>
<p>Checks if an address is a relayer</p>
<pre><code class="language-solidity">function _getRelayer() internal view returns (bool);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Whether the address is a relayer</td></tr>
</tbody></table>
</div>
<h3 id="_getktokenforasset"><a class="header" href="#_getktokenforasset">_getKTokenForAsset</a></h3>
<p>Gets the kToken address for a given asset</p>
<p><em>Reverts if asset not supported</em></p>
<pre><code class="language-solidity">function _getKTokenForAsset(address asset) internal view returns (address kToken);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>The underlying asset address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>kToken</code></td><td><code>address</code></td><td>The corresponding kToken address</td></tr>
</tbody></table>
</div>
<h3 id="_getvaultassets"><a class="header" href="#_getvaultassets">_getVaultAssets</a></h3>
<p>Gets the asset managed by a vault</p>
<p><em>Reverts if vault not registered</em></p>
<pre><code class="language-solidity">function _getVaultAssets(address vault) internal view returns (address[] memory assets);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>assets</code></td><td><code>address[]</code></td><td>The asset address managed by the vault</td></tr>
</tbody></table>
</div>
<h3 id="registered"><a class="header" href="#registered">registered</a></h3>
<p>Returns whether this adapter is registered</p>
<pre><code class="language-solidity">function registered() public view returns (bool);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>True if adapter is registered and active</td></tr>
</tbody></table>
</div>
<h3 id="name"><a class="header" href="#name">name</a></h3>
<p>Returns the adapter's name</p>
<pre><code class="language-solidity">function name() external view returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Human readable adapter name</td></tr>
</tbody></table>
</div>
<h3 id="version"><a class="header" href="#version">version</a></h3>
<p>Returns the adapter's version</p>
<pre><code class="language-solidity">function version() external view returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Version string</td></tr>
</tbody></table>
</div>
<h3 id="onlykassetrouter"><a class="header" href="#onlykassetrouter">onlyKAssetRouter</a></h3>
<p>Restricts function access to kAssetRouter only</p>
<pre><code class="language-solidity">modifier onlyKAssetRouter();
</code></pre>
<h3 id="onlyrelayer"><a class="header" href="#onlyrelayer">onlyRelayer</a></h3>
<p>Restricts function access to the relayer</p>
<pre><code class="language-solidity">modifier onlyRelayer();
</code></pre>
<h3 id="whenregistered"><a class="header" href="#whenregistered">whenRegistered</a></h3>
<p>Ensures the adapter is registered and active</p>
<pre><code class="language-solidity">modifier whenRegistered();
</code></pre>
<h2 id="errors"><a class="header" href="#errors">Errors</a></h2>
<h3 id="onlykassetrouter-1"><a class="header" href="#onlykassetrouter-1">OnlyKAssetRouter</a></h3>
<pre><code class="language-solidity">error OnlyKAssetRouter();
</code></pre>
<h3 id="contractnotfound"><a class="header" href="#contractnotfound">ContractNotFound</a></h3>
<pre><code class="language-solidity">error ContractNotFound(bytes32 identifier);
</code></pre>
<h3 id="zeroaddress"><a class="header" href="#zeroaddress">ZeroAddress</a></h3>
<pre><code class="language-solidity">error ZeroAddress();
</code></pre>
<h3 id="invalidregistry"><a class="header" href="#invalidregistry">InvalidRegistry</a></h3>
<pre><code class="language-solidity">error InvalidRegistry();
</code></pre>
<h3 id="assetnotsupported"><a class="header" href="#assetnotsupported">AssetNotSupported</a></h3>
<pre><code class="language-solidity">error AssetNotSupported(address asset);
</code></pre>
<h3 id="invalidamount"><a class="header" href="#invalidamount">InvalidAmount</a></h3>
<pre><code class="language-solidity">error InvalidAmount();
</code></pre>
<h3 id="invalidasset"><a class="header" href="#invalidasset">InvalidAsset</a></h3>
<pre><code class="language-solidity">error InvalidAsset();
</code></pre>
<h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<h3 id="baseadapterstorage"><a class="header" href="#baseadapterstorage">BaseAdapterStorage</a></h3>
<p><strong>Note:</strong>
storage-location: erc7201:kam.storage.BaseAdapter</p>
<pre><code class="language-solidity">struct BaseAdapterStorage {
    address registry;
    bool registered;
    bool initialized;
    string name;
    string version;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="custodialadapter"><a class="header" href="#custodialadapter">CustodialAdapter</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/adapters/CustodialAdapter.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/adapters/CustodialAdapter.sol//src/adapters/BaseAdapter.sol/contract.BaseAdapter.html">BaseAdapter</a>, Initializable, UUPSUpgradeable</p>
<p>Adapter for custodial address integrations (CEX, CEFFU, etc.)</p>
<p><em>Simple adapter that transfers assets to custodial addresses and tracks virtual balances</em></p>
<h2 id="state-variables-1"><a class="header" href="#state-variables-1">State Variables</a></h2>
<h3 id="custodial_adapter_storage_location"><a class="header" href="#custodial_adapter_storage_location">CUSTODIAL_ADAPTER_STORAGE_LOCATION</a></h3>
<pre><code class="language-solidity">bytes32 private constant CUSTODIAL_ADAPTER_STORAGE_LOCATION =
    0x6096605776f37a069e5fb3b2282c592b4e41a8f7c82e8665fde33e5acbdbaf00;
</code></pre>
<h2 id="functions-3"><a class="header" href="#functions-3">Functions</a></h2>
<h3 id="_getcustodialadapterstorage"><a class="header" href="#_getcustodialadapterstorage">_getCustodialAdapterStorage</a></h3>
<pre><code class="language-solidity">function _getCustodialAdapterStorage() internal pure returns (CustodialAdapterStorage storage $);
</code></pre>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<p>Empty constructor to ensure clean initialization state</p>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="initialize"><a class="header" href="#initialize">initialize</a></h3>
<p>Initializes the MetaVault adapter</p>
<pre><code class="language-solidity">function initialize(address registry_, address owner_, address admin_) external initializer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>registry_</code></td><td><code>address</code></td><td>Address of the kRegistry contract</td></tr>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Address of the owner</td></tr>
<tr><td><code>admin_</code></td><td><code>address</code></td><td>Address of the admin</td></tr>
</tbody></table>
</div>
<h3 id="deposit"><a class="header" href="#deposit">deposit</a></h3>
<p>Deposits assets to external strategy</p>
<pre><code class="language-solidity">function deposit(
    address asset,
    uint256 amount,
    address onBehalfOf
)
    external
    nonReentrant
    onlyKAssetRouter
    whenRegistered;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>The asset to deposit</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The amount to deposit</td></tr>
<tr><td><code>onBehalfOf</code></td><td><code>address</code></td><td>The vault address this deposit is for</td></tr>
</tbody></table>
</div>
<h3 id="redeem"><a class="header" href="#redeem">redeem</a></h3>
<p>Redeems assets from external strategy</p>
<pre><code class="language-solidity">function redeem(
    address asset,
    uint256 amount,
    address onBehalfOf
)
    external
    virtual
    nonReentrant
    onlyKAssetRouter
    whenRegistered;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>The asset to redeem</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The amount to redeem</td></tr>
<tr><td><code>onBehalfOf</code></td><td><code>address</code></td><td>The vault address this redemption is for</td></tr>
</tbody></table>
</div>
<h3 id="totalestimatedassets"><a class="header" href="#totalestimatedassets">totalEstimatedAssets</a></h3>
<p>Returns the current total assets across all custodial addresses for this asset</p>
<pre><code class="language-solidity">function totalEstimatedAssets(address vault, address asset) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault to query</td></tr>
<tr><td><code>asset</code></td><td><code>address</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Total assets currently held across all custodial addresses managed by this adapter</td></tr>
</tbody></table>
</div>
<h3 id="totalvirtualassets"><a class="header" href="#totalvirtualassets">totalVirtualAssets</a></h3>
<p>Returns the total assets in storage for a given vault</p>
<pre><code class="language-solidity">function totalVirtualAssets(address vault, address asset) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault address</td></tr>
<tr><td><code>asset</code></td><td><code>address</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Total assets currently held in storage for this vault</td></tr>
</tbody></table>
</div>
<h3 id="totalassets"><a class="header" href="#totalassets">totalAssets</a></h3>
<p>Returns the total assets for a given vault and asset</p>
<pre><code class="language-solidity">function totalAssets(address vault, address asset) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault address</td></tr>
<tr><td><code>asset</code></td><td><code>address</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Total assets currently held for this vault and asset</td></tr>
</tbody></table>
</div>
<h3 id="getlasttotalassets"><a class="header" href="#getlasttotalassets">getLastTotalAssets</a></h3>
<p>Returns the last total assets for a given vault and asset</p>
<pre><code class="language-solidity">function getLastTotalAssets(address vault, address asset) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault address</td></tr>
<tr><td><code>asset</code></td><td><code>address</code></td><td>The asset address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The last total assets for the vault and asset</td></tr>
</tbody></table>
</div>
<h3 id="getvaultdestination"><a class="header" href="#getvaultdestination">getVaultDestination</a></h3>
<p>Returns the custodial address for a given vault</p>
<pre><code class="language-solidity">function getVaultDestination(address vault) external view returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>The custodial address for the vault</td></tr>
</tbody></table>
</div>
<h3 id="setvaultdestination"><a class="header" href="#setvaultdestination">setVaultDestination</a></h3>
<p>Sets the custodial address for a vault</p>
<pre><code class="language-solidity">function setVaultDestination(address vault, address custodialAddress) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault address</td></tr>
<tr><td><code>custodialAddress</code></td><td><code>address</code></td><td>The custodial address for this vault</td></tr>
</tbody></table>
</div>
<h3 id="settotalassets"><a class="header" href="#settotalassets">setTotalAssets</a></h3>
<p>Sets the total assets for a given vault</p>
<pre><code class="language-solidity">function setTotalAssets(address vault, address asset, uint256 totalAssets_) external onlyKAssetRouter;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault address</td></tr>
<tr><td><code>asset</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>totalAssets_</code></td><td><code>uint256</code></td><td>The total assets to set</td></tr>
</tbody></table>
</div>
<h3 id="_authorizeupgrade"><a class="header" href="#_authorizeupgrade">_authorizeUpgrade</a></h3>
<p>Authorize contract upgrade</p>
<pre><code class="language-solidity">function _authorizeUpgrade(address newImplementation) internal view override onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newImplementation</code></td><td><code>address</code></td><td>New implementation address</td></tr>
</tbody></table>
</div>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="vaultdestinationupdated"><a class="header" href="#vaultdestinationupdated">VaultDestinationUpdated</a></h3>
<pre><code class="language-solidity">event VaultDestinationUpdated(address indexed vault, address indexed oldAddress, address indexed newAddress);
</code></pre>
<h3 id="totalassetsupdated"><a class="header" href="#totalassetsupdated">TotalAssetsUpdated</a></h3>
<pre><code class="language-solidity">event TotalAssetsUpdated(address indexed vault, uint256 totalAssets);
</code></pre>
<h3 id="deposited"><a class="header" href="#deposited">Deposited</a></h3>
<pre><code class="language-solidity">event Deposited(address indexed asset, uint256 amount, address indexed onBehalfOf);
</code></pre>
<h3 id="redemptionrequested"><a class="header" href="#redemptionrequested">RedemptionRequested</a></h3>
<pre><code class="language-solidity">event RedemptionRequested(address indexed asset, uint256 amount, address indexed onBehalfOf);
</code></pre>
<h3 id="redemptionprocessed"><a class="header" href="#redemptionprocessed">RedemptionProcessed</a></h3>
<pre><code class="language-solidity">event RedemptionProcessed(uint256 indexed requestId, uint256 assets);
</code></pre>
<h3 id="adapterbalanceupdated"><a class="header" href="#adapterbalanceupdated">AdapterBalanceUpdated</a></h3>
<pre><code class="language-solidity">event AdapterBalanceUpdated(address indexed vault, address indexed asset, uint256 newBalance);
</code></pre>
<h2 id="errors-1"><a class="header" href="#errors-1">Errors</a></h2>
<h3 id="invalidcustodialaddress"><a class="header" href="#invalidcustodialaddress">InvalidCustodialAddress</a></h3>
<pre><code class="language-solidity">error InvalidCustodialAddress();
</code></pre>
<h3 id="vaultdestinationnotset"><a class="header" href="#vaultdestinationnotset">VaultDestinationNotSet</a></h3>
<pre><code class="language-solidity">error VaultDestinationNotSet();
</code></pre>
<h3 id="assetsnottranfered"><a class="header" href="#assetsnottranfered">AssetsNotTranfered</a></h3>
<pre><code class="language-solidity">error AssetsNotTranfered();
</code></pre>
<h2 id="structs-1"><a class="header" href="#structs-1">Structs</a></h2>
<h3 id="custodialadapterstorage"><a class="header" href="#custodialadapterstorage">CustodialAdapterStorage</a></h3>
<p><strong>Note:</strong>
storage-location: erc7201:kam.storage.CustodialAdapter</p>
<pre><code class="language-solidity">struct CustodialAdapterStorage {
    uint256 nextRequestId;
    mapping(address vault =&gt; mapping(address asset =&gt; uint256 balance)) balanceOf;
    mapping(address vault =&gt; mapping(address asset =&gt; uint256 totalAssets)) totalAssets;
    mapping(address vault =&gt; address custodialAddress) vaultDestinations;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-2"><a class="header" href="#contents-2">Contents</a></h1>
<ul>
<li><a href="src/base/MultiFacetProxy.sol/contract.MultiFacetProxy.html">MultiFacetProxy</a></li>
<li><a href="src/base/kBase.sol/contract.kBase.html">kBase</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="multifacetproxy"><a class="header" href="#multifacetproxy">MultiFacetProxy</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/base/MultiFacetProxy.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/base/MultiFacetProxy.sol//src/abstracts/Proxy.sol/abstract.Proxy.html">Proxy</a>, OwnableRoles</p>
<p>A proxy contract that can route function calls to different implementation contracts</p>
<p><em>Inherits from Base and OpenZeppelin's Proxy contract</em></p>
<h2 id="state-variables-2"><a class="header" href="#state-variables-2">State Variables</a></h2>
<h3 id="multifacet_proxy_storage_location"><a class="header" href="#multifacet_proxy_storage_location">MULTIFACET_PROXY_STORAGE_LOCATION</a></h3>
<pre><code class="language-solidity">bytes32 internal constant MULTIFACET_PROXY_STORAGE_LOCATION =
    0xfeaf205b5229ea10e902c7b89e4768733c756362b2becb0bfd65a97f71b02d00;
</code></pre>
<h2 id="functions-4"><a class="header" href="#functions-4">Functions</a></h2>
<h3 id="_getmultifacetproxystorage"><a class="header" href="#_getmultifacetproxystorage">_getMultiFacetProxyStorage</a></h3>
<p>Returns the MultiFacetProxy storage struct using ERC-7201 pattern</p>
<pre><code class="language-solidity">function _getMultiFacetProxyStorage() internal pure returns (MultiFacetProxyStorage storage $);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>$</code></td><td><code>MultiFacetProxyStorage</code></td><td>Storage reference for MultiFacetProxy state variables</td></tr>
</tbody></table>
</div>
<h3 id="__multifacetproxy__init"><a class="header" href="#__multifacetproxy__init">__MultiFacetProxy__init</a></h3>
<p>Initializes the proxy contract</p>
<p><em>Can only be called once during initialization</em></p>
<pre><code class="language-solidity">function __MultiFacetProxy__init(uint256 _proxyAdminRole_) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proxyAdminRole_</code></td><td><code>uint256</code></td><td>The proxy admin role</td></tr>
</tbody></table>
</div>
<h3 id="_proxyadminrole"><a class="header" href="#_proxyadminrole">_proxyAdminRole</a></h3>
<p>Returns the proxy admin role</p>
<pre><code class="language-solidity">function _proxyAdminRole() internal view returns (uint256 role);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>role</code></td><td><code>uint256</code></td><td>The proxy admin role</td></tr>
</tbody></table>
</div>
<h3 id="addfunction"><a class="header" href="#addfunction">addFunction</a></h3>
<p>Adds a function selector mapping to an implementation address</p>
<p><em>Only callable by admin role</em></p>
<pre><code class="language-solidity">function addFunction(bytes4 selector, address implementation, bool forceOverride) public onlyRoles(_proxyAdminRole());
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>selector</code></td><td><code>bytes4</code></td><td>The function selector to add</td></tr>
<tr><td><code>implementation</code></td><td><code>address</code></td><td>The implementation contract address</td></tr>
<tr><td><code>forceOverride</code></td><td><code>bool</code></td><td>If true, allows overwriting existing mappings</td></tr>
</tbody></table>
</div>
<h3 id="addfunctions"><a class="header" href="#addfunctions">addFunctions</a></h3>
<p>Adds multiple function selector mappings to an implementation</p>
<pre><code class="language-solidity">function addFunctions(bytes4[] calldata selectors, address implementation, bool forceOverride) public;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>selectors</code></td><td><code>bytes4[]</code></td><td>Array of function selectors to add</td></tr>
<tr><td><code>implementation</code></td><td><code>address</code></td><td>The implementation contract address</td></tr>
<tr><td><code>forceOverride</code></td><td><code>bool</code></td><td>If true, allows overwriting existing mappings</td></tr>
</tbody></table>
</div>
<h3 id="removefunction"><a class="header" href="#removefunction">removeFunction</a></h3>
<p>Removes a function selector mapping</p>
<p><em>Only callable by admin role</em></p>
<pre><code class="language-solidity">function removeFunction(bytes4 selector) public onlyRoles(_proxyAdminRole());
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>selector</code></td><td><code>bytes4</code></td><td>The function selector to remove</td></tr>
</tbody></table>
</div>
<h3 id="removefunctions"><a class="header" href="#removefunctions">removeFunctions</a></h3>
<p>Removes multiple function selector mappings</p>
<pre><code class="language-solidity">function removeFunctions(bytes4[] calldata selectors) public;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>selectors</code></td><td><code>bytes4[]</code></td><td>Array of function selectors to remove</td></tr>
</tbody></table>
</div>
<h3 id="_implementation-1"><a class="header" href="#_implementation-1">_implementation</a></h3>
<p>Returns the implementation address for a function selector</p>
<p><em>Required override from OpenZeppelin Proxy contract</em></p>
<pre><code class="language-solidity">function _implementation() internal view override returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>The implementation contract address</td></tr>
</tbody></table>
</div>
<h2 id="structs-2"><a class="header" href="#structs-2">Structs</a></h2>
<h3 id="multifacetproxystorage"><a class="header" href="#multifacetproxystorage">MultiFacetProxyStorage</a></h3>
<pre><code class="language-solidity">struct MultiFacetProxyStorage {
    mapping(bytes4 =&gt; address) selectorToImplementation;
    uint256 proxyAdminRole;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="kbase"><a class="header" href="#kbase">kBase</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/base/kBase.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
OwnableRoles, ReentrancyGuardTransient</p>
<p>Base contract providing common functionality for all KAM protocol contracts</p>
<p><em>Includes registry integration, role management, pause functionality, and helper methods</em></p>
<h2 id="state-variables-3"><a class="header" href="#state-variables-3">State Variables</a></h2>
<h3 id="admin_role-1"><a class="header" href="#admin_role-1">ADMIN_ROLE</a></h3>
<pre><code class="language-solidity">uint256 internal constant ADMIN_ROLE = _ROLE_0;
</code></pre>
<h3 id="emergency_admin_role-1"><a class="header" href="#emergency_admin_role-1">EMERGENCY_ADMIN_ROLE</a></h3>
<pre><code class="language-solidity">uint256 internal constant EMERGENCY_ADMIN_ROLE = _ROLE_1;
</code></pre>
<h3 id="k_minter-1"><a class="header" href="#k_minter-1">K_MINTER</a></h3>
<pre><code class="language-solidity">bytes32 internal constant K_MINTER = keccak256("K_MINTER");
</code></pre>
<h3 id="k_asset_router-1"><a class="header" href="#k_asset_router-1">K_ASSET_ROUTER</a></h3>
<pre><code class="language-solidity">bytes32 internal constant K_ASSET_ROUTER = keccak256("K_ASSET_ROUTER");
</code></pre>
<h3 id="kbase_storage_location"><a class="header" href="#kbase_storage_location">KBASE_STORAGE_LOCATION</a></h3>
<pre><code class="language-solidity">bytes32 private constant KBASE_STORAGE_LOCATION = 0xe91688684975c4d7d54a65dd96da5d4dcbb54b8971c046d5351d3c111e43a800;
</code></pre>
<h2 id="functions-5"><a class="header" href="#functions-5">Functions</a></h2>
<h3 id="_getbasestorage"><a class="header" href="#_getbasestorage">_getBaseStorage</a></h3>
<p>Returns the kBase storage</p>
<pre><code class="language-solidity">function _getBaseStorage() internal pure returns (kBaseStorage storage $);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>$</code></td><td><code>kBaseStorage</code></td><td>Storage struct containing registry, initialized, and paused states</td></tr>
</tbody></table>
</div>
<h3 id="__kbase_init"><a class="header" href="#__kbase_init">__kBase_init</a></h3>
<p>Initializes the base contract with registry and pause state</p>
<p><em>Can only be called once during initialization</em></p>
<pre><code class="language-solidity">function __kBase_init(address registry_, address owner_, address admin_, bool paused_) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>registry_</code></td><td><code>address</code></td><td>Address of the kRegistry contract</td></tr>
<tr><td><code>owner_</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>admin_</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>paused_</code></td><td><code>bool</code></td><td>Initial pause state</td></tr>
</tbody></table>
</div>
<h3 id="registry"><a class="header" href="#registry">registry</a></h3>
<p>Returns the registry contract address</p>
<p><em>Reverts if contract not initialized</em></p>
<pre><code class="language-solidity">function registry() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>The kRegistry contract address</td></tr>
</tbody></table>
</div>
<h3 id="_registry-1"><a class="header" href="#_registry-1">_registry</a></h3>
<p>Returns the registry contract interface</p>
<p><em>Internal helper for typed registry access</em></p>
<pre><code class="language-solidity">function _registry() internal view returns (IkRegistry);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>IkRegistry</code></td><td>IkRegistry interface for registry interaction</td></tr>
</tbody></table>
</div>
<h3 id="_getkminter"><a class="header" href="#_getkminter">_getKMinter</a></h3>
<p>Gets the kMinter singleton contract address</p>
<p><em>Reverts if kMinter not set in registry</em></p>
<pre><code class="language-solidity">function _getKMinter() internal view returns (address minter);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>minter</code></td><td><code>address</code></td><td>The kMinter contract address</td></tr>
</tbody></table>
</div>
<h3 id="_getkassetrouter-1"><a class="header" href="#_getkassetrouter-1">_getKAssetRouter</a></h3>
<p>Gets the kAssetRouter singleton contract address</p>
<p><em>Reverts if kAssetRouter not set in registry</em></p>
<pre><code class="language-solidity">function _getKAssetRouter() internal view returns (address router);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>router</code></td><td><code>address</code></td><td>The kAssetRouter contract address</td></tr>
</tbody></table>
</div>
<h3 id="_getrelayer-1"><a class="header" href="#_getrelayer-1">_getRelayer</a></h3>
<p>Checks if an address is a relayer</p>
<pre><code class="language-solidity">function _getRelayer() internal view returns (bool);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Whether the address is a relayer</td></tr>
</tbody></table>
</div>
<h3 id="_getguardian"><a class="header" href="#_getguardian">_getGuardian</a></h3>
<p>Checks if an address is a guardian</p>
<pre><code class="language-solidity">function _getGuardian() internal view returns (bool);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Whether the address is a guardian</td></tr>
</tbody></table>
</div>
<h3 id="_getbatchid"><a class="header" href="#_getbatchid">_getBatchId</a></h3>
<p>Gets the current batch ID for a given vault</p>
<p><em>Reverts if vault not registered</em></p>
<pre><code class="language-solidity">function _getBatchId(address vault) internal view returns (bytes32 batchId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>The current batch ID</td></tr>
</tbody></table>
</div>
<h3 id="_getktokenforasset-1"><a class="header" href="#_getktokenforasset-1">_getKTokenForAsset</a></h3>
<p>Gets the kToken address for a given asset</p>
<p><em>Reverts if asset not supported</em></p>
<pre><code class="language-solidity">function _getKTokenForAsset(address asset) internal view returns (address kToken);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>The underlying asset address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>kToken</code></td><td><code>address</code></td><td>The corresponding kToken address</td></tr>
</tbody></table>
</div>
<h3 id="_isassetregistered"><a class="header" href="#_isassetregistered">_isAssetRegistered</a></h3>
<p>Checks if an asset is supported by the protocol</p>
<pre><code class="language-solidity">function _isAssetRegistered(address asset) internal view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>The asset address to check</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Whether the asset is supported</td></tr>
</tbody></table>
</div>
<h3 id="_getvaultassets-1"><a class="header" href="#_getvaultassets-1">_getVaultAssets</a></h3>
<p>Gets the asset managed by a vault</p>
<p><em>Reverts if vault not registered</em></p>
<pre><code class="language-solidity">function _getVaultAssets(address vault) internal view returns (address[] memory assets);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>assets</code></td><td><code>address[]</code></td><td>The asset address managed by the vault</td></tr>
</tbody></table>
</div>
<h3 id="_getdnvaultbyasset"><a class="header" href="#_getdnvaultbyasset">_getDNVaultByAsset</a></h3>
<p>Gets the DN vault address for a given asset</p>
<p><em>Reverts if asset not supported</em></p>
<pre><code class="language-solidity">function _getDNVaultByAsset(address asset) internal view returns (address vault);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>The asset address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The corresponding DN vault address</td></tr>
</tbody></table>
</div>
<h3 id="_isvault"><a class="header" href="#_isvault">_isVault</a></h3>
<p>Checks if an address is a registered vault</p>
<pre><code class="language-solidity">function _isVault(address vault) internal view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The address to check</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Whether the address is a registered vault</td></tr>
</tbody></table>
</div>
<h3 id="_isregisteredasset"><a class="header" href="#_isregisteredasset">_isRegisteredAsset</a></h3>
<p>Checks if an asset is registered</p>
<pre><code class="language-solidity">function _isRegisteredAsset(address asset) internal view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>The asset address to check</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Whether the asset is registered</td></tr>
</tbody></table>
</div>
<h3 id="_setpaused"><a class="header" href="#_setpaused">_setPaused</a></h3>
<p>Sets the pause state of the contract</p>
<p><em>Only callable internally by inheriting contracts</em></p>
<pre><code class="language-solidity">function _setPaused(bool paused_) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>paused_</code></td><td><code>bool</code></td><td>New pause state</td></tr>
</tbody></table>
</div>
<h3 id="onlykminter"><a class="header" href="#onlykminter">onlyKMinter</a></h3>
<p>Restricts function access to the kMinter contract</p>
<pre><code class="language-solidity">modifier onlyKMinter();
</code></pre>
<h3 id="onlyrelayer-1"><a class="header" href="#onlyrelayer-1">onlyRelayer</a></h3>
<p>Restricts function access to the relayer</p>
<p><em>Only callable internally by inheriting contracts</em></p>
<pre><code class="language-solidity">modifier onlyRelayer();
</code></pre>
<h3 id="onlyguardian"><a class="header" href="#onlyguardian">onlyGuardian</a></h3>
<p>Restricts function access to the guardian</p>
<p><em>Only callable internally by inheriting contracts</em></p>
<pre><code class="language-solidity">modifier onlyGuardian();
</code></pre>
<h3 id="onlyregisteredasset"><a class="header" href="#onlyregisteredasset">onlyRegisteredAsset</a></h3>
<p>Ensures the asset is supported by the protocol</p>
<pre><code class="language-solidity">modifier onlyRegisteredAsset(address asset);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>The asset address to validate</td></tr>
</tbody></table>
</div>
<h2 id="events-1"><a class="header" href="#events-1">Events</a></h2>
<h3 id="paused"><a class="header" href="#paused">Paused</a></h3>
<pre><code class="language-solidity">event Paused(bool paused);
</code></pre>
<h2 id="errors-2"><a class="header" href="#errors-2">Errors</a></h2>
<h3 id="zeroaddress-1"><a class="header" href="#zeroaddress-1">ZeroAddress</a></h3>
<pre><code class="language-solidity">error ZeroAddress();
</code></pre>
<h3 id="invalidregistry-1"><a class="header" href="#invalidregistry-1">InvalidRegistry</a></h3>
<pre><code class="language-solidity">error InvalidRegistry();
</code></pre>
<h3 id="notinitialized"><a class="header" href="#notinitialized">NotInitialized</a></h3>
<pre><code class="language-solidity">error NotInitialized();
</code></pre>
<h3 id="contractnotfound-1"><a class="header" href="#contractnotfound-1">ContractNotFound</a></h3>
<pre><code class="language-solidity">error ContractNotFound(bytes32 identifier);
</code></pre>
<h3 id="assetnotsupported-1"><a class="header" href="#assetnotsupported-1">AssetNotSupported</a></h3>
<pre><code class="language-solidity">error AssetNotSupported(address asset);
</code></pre>
<h3 id="invalidvault"><a class="header" href="#invalidvault">InvalidVault</a></h3>
<pre><code class="language-solidity">error InvalidVault(address vault);
</code></pre>
<h3 id="onlykminter-1"><a class="header" href="#onlykminter-1">OnlyKMinter</a></h3>
<pre><code class="language-solidity">error OnlyKMinter();
</code></pre>
<h3 id="onlyguardian-1"><a class="header" href="#onlyguardian-1">OnlyGuardian</a></h3>
<pre><code class="language-solidity">error OnlyGuardian();
</code></pre>
<h3 id="onlyrelayer-2"><a class="header" href="#onlyrelayer-2">OnlyRelayer</a></h3>
<pre><code class="language-solidity">error OnlyRelayer();
</code></pre>
<h2 id="structs-3"><a class="header" href="#structs-3">Structs</a></h2>
<h3 id="kbasestorage"><a class="header" href="#kbasestorage">kBaseStorage</a></h3>
<p><strong>Note:</strong>
storage-location: erc7201:kam.storage.kBase</p>
<pre><code class="language-solidity">struct kBaseStorage {
    address registry;
    bool initialized;
    bool paused;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-3"><a class="header" href="#contents-3">Contents</a></h1>
<ul>
<li><a href="src/interfaces/IAdapter.sol/interface.IAdapter.html">IAdapter</a></li>
<li><a href="src/interfaces/IExtsload.sol/interface.IExtsload.html">IExtsload</a></li>
<li><a href="src/interfaces/IkAssetRouter.sol/interface.IkAssetRouter.html">IkAssetRouter</a></li>
<li><a href="src/interfaces/IkBatchReceiver.sol/interface.IkBatchReceiver.html">IkBatchReceiver</a></li>
<li><a href="src/interfaces/IkMinter.sol/interface.IkMinter.html">IkMinter</a></li>
<li><a href="src/interfaces/IkRegistry.sol/interface.IkRegistry.html">IkRegistry</a></li>
<li><a href="src/interfaces/IkStakingVault.sol/interface.IkStakingVault.html">IkStakingVault</a></li>
<li><a href="src/interfaces/IkToken.sol/interface.IkToken.html">IkToken</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iadapter"><a class="header" href="#iadapter">IAdapter</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/interfaces/IAdapter.sol">Git Source</a></p>
<p>Interface for protocol adapters that manage external strategy integrations</p>
<p><em>All adapters must implement this interface for kAssetRouter integration</em></p>
<h2 id="functions-6"><a class="header" href="#functions-6">Functions</a></h2>
<h3 id="deposit-1"><a class="header" href="#deposit-1">deposit</a></h3>
<p>Deposits assets to external strategy on behalf of a vault</p>
<pre><code class="language-solidity">function deposit(address asset, uint256 amount, address onBehalfOf) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>The asset to deposit</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The amount to deposit</td></tr>
<tr><td><code>onBehalfOf</code></td><td><code>address</code></td><td>The vault address this deposit is for</td></tr>
</tbody></table>
</div>
<h3 id="redeem-1"><a class="header" href="#redeem-1">redeem</a></h3>
<p>Redeems assets from external strategy on behalf of a vault</p>
<pre><code class="language-solidity">function redeem(address asset, uint256 amount, address onBehalfOf) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>The asset to redeem</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The amount to redeem</td></tr>
<tr><td><code>onBehalfOf</code></td><td><code>address</code></td><td>The vault address this redemption is for</td></tr>
</tbody></table>
</div>
<h3 id="processredemption"><a class="header" href="#processredemption">processRedemption</a></h3>
<p>Processes a pending redemption</p>
<pre><code class="language-solidity">function processRedemption(uint256 requestId) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>The request ID to process</td></tr>
</tbody></table>
</div>
<h3 id="settotalassets-1"><a class="header" href="#settotalassets-1">setTotalAssets</a></h3>
<p>Sets the total assets for a given vault</p>
<pre><code class="language-solidity">function setTotalAssets(address vault, address asset, uint256 totalAssets_) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault address</td></tr>
<tr><td><code>asset</code></td><td><code>address</code></td><td>The asset address</td></tr>
<tr><td><code>totalAssets_</code></td><td><code>uint256</code></td><td>The total assets to set</td></tr>
</tbody></table>
</div>
<h3 id="getlasttotalassets-1"><a class="header" href="#getlasttotalassets-1">getLastTotalAssets</a></h3>
<p>Returns the last total assets for a given vault and asset</p>
<pre><code class="language-solidity">function getLastTotalAssets(address vault, address asset) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault address</td></tr>
<tr><td><code>asset</code></td><td><code>address</code></td><td>The asset address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The last total assets for the vault and asset</td></tr>
</tbody></table>
</div>
<h3 id="converttoassets"><a class="header" href="#converttoassets">convertToAssets</a></h3>
<p>Converts shares to assets</p>
<pre><code class="language-solidity">function convertToAssets(address vault, uint256 shares) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault address</td></tr>
<tr><td><code>shares</code></td><td><code>uint256</code></td><td>The number of shares to convert</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The number of assets converted from shares</td></tr>
</tbody></table>
</div>
<h3 id="totalassets-1"><a class="header" href="#totalassets-1">totalAssets</a></h3>
<p>Returns the current total assets in the external strategy</p>
<pre><code class="language-solidity">function totalAssets(address vault, address asset) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault to query</td></tr>
<tr><td><code>asset</code></td><td><code>address</code></td><td>The asset to query</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Total assets currently deployed in strategy</td></tr>
</tbody></table>
</div>
<h3 id="getpendingredemption"><a class="header" href="#getpendingredemption">getPendingRedemption</a></h3>
<p>Returns the pending redemption for a request ID</p>
<pre><code class="language-solidity">function getPendingRedemption(uint256 requestId)
    external
    view
    returns (address vault, address asset, uint256 shares, bool processed);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>uint256</code></td><td>The request ID to query</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault address</td></tr>
<tr><td><code>asset</code></td><td><code>address</code></td><td>The asset address</td></tr>
<tr><td><code>shares</code></td><td><code>uint256</code></td><td>The number of shares being redeemed</td></tr>
<tr><td><code>processed</code></td><td><code>bool</code></td><td>Whether the redemption has been processed</td></tr>
</tbody></table>
</div>
<h3 id="getpendingredemptions"><a class="header" href="#getpendingredemptions">getPendingRedemptions</a></h3>
<p>Returns the pending redemptions for a vault</p>
<pre><code class="language-solidity">function getPendingRedemptions(address vault) external view returns (uint256[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>Pending redemptions for the vault</td></tr>
</tbody></table>
</div>
<h3 id="registered-1"><a class="header" href="#registered-1">registered</a></h3>
<p>Returns whether this adapter is registered</p>
<pre><code class="language-solidity">function registered() external view returns (bool);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>True if adapter is registered and active</td></tr>
</tbody></table>
</div>
<h3 id="name-1"><a class="header" href="#name-1">name</a></h3>
<p>Returns the adapter's name for identification</p>
<pre><code class="language-solidity">function name() external view returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Human readable adapter name</td></tr>
</tbody></table>
</div>
<h3 id="version-1"><a class="header" href="#version-1">version</a></h3>
<p>Returns the adapter's version</p>
<pre><code class="language-solidity">function version() external view returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Version string</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="iextsload"><a class="header" href="#iextsload">IExtsload</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/interfaces/IExtsload.sol">Git Source</a></p>
<p>Interface for external storage access</p>
<h2 id="functions-7"><a class="header" href="#functions-7">Functions</a></h2>
<h3 id="extsload-4"><a class="header" href="#extsload-4">extsload</a></h3>
<p>Reads a single storage slot</p>
<pre><code class="language-solidity">function extsload(bytes32 slot) external view returns (bytes32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>slot</code></td><td><code>bytes32</code></td><td>Storage slot to read</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>Value at the storage slot</td></tr>
</tbody></table>
</div>
<h3 id="extsload-5"><a class="header" href="#extsload-5">extsload</a></h3>
<p>Reads multiple consecutive storage slots</p>
<pre><code class="language-solidity">function extsload(bytes32 startSlot, uint256 nSlots) external view returns (bytes32[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>startSlot</code></td><td><code>bytes32</code></td><td>Starting storage slot</td></tr>
<tr><td><code>nSlots</code></td><td><code>uint256</code></td><td>Number of slots to read</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32[]</code></td><td>Array of values from the storage slots</td></tr>
</tbody></table>
</div>
<h3 id="extsload-6"><a class="header" href="#extsload-6">extsload</a></h3>
<p>Reads multiple arbitrary storage slots</p>
<pre><code class="language-solidity">function extsload(bytes32[] calldata slots) external view returns (bytes32[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>slots</code></td><td><code>bytes32[]</code></td><td>Array of storage slots to read</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32[]</code></td><td>Array of values from the storage slots</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="ikassetrouter"><a class="header" href="#ikassetrouter">IkAssetRouter</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/interfaces/IkAssetRouter.sol">Git Source</a></p>
<p>Interface for kAssetRouter for asset routing and settlement</p>
<h2 id="functions-8"><a class="header" href="#functions-8">Functions</a></h2>
<h3 id="kassetpush"><a class="header" href="#kassetpush">kAssetPush</a></h3>
<p>Push assets from kMinter to designated DN vault</p>
<pre><code class="language-solidity">function kAssetPush(address _asset, uint256 amount, bytes32 batchId) external payable;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_asset</code></td><td><code>address</code></td><td>The asset being deposited</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount of assets being pushed</td></tr>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>The batch ID from the DN vault</td></tr>
</tbody></table>
</div>
<h3 id="kassetrequestpull"><a class="header" href="#kassetrequestpull">kAssetRequestPull</a></h3>
<p>Request to pull assets for kMinter redemptions</p>
<pre><code class="language-solidity">function kAssetRequestPull(address _asset, address _vault, uint256 amount, bytes32 batchId) external payable;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_asset</code></td><td><code>address</code></td><td>The asset to redeem</td></tr>
<tr><td><code>_vault</code></td><td><code>address</code></td><td>The vault to pull from</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount requested for redemption</td></tr>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>The batch ID for this redemption</td></tr>
</tbody></table>
</div>
<h3 id="kassettransfer"><a class="header" href="#kassettransfer">kAssetTransfer</a></h3>
<p>Transfer assets between kStakingVaults</p>
<pre><code class="language-solidity">function kAssetTransfer(
    address sourceVault,
    address targetVault,
    address _asset,
    uint256 amount,
    bytes32 batchId
)
    external
    payable;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sourceVault</code></td><td><code>address</code></td><td>The vault to transfer assets from</td></tr>
<tr><td><code>targetVault</code></td><td><code>address</code></td><td>The vault to transfer assets to</td></tr>
<tr><td><code>_asset</code></td><td><code>address</code></td><td>The asset to transfer</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount of assets to transfer</td></tr>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>The batch ID for this transfer</td></tr>
</tbody></table>
</div>
<h3 id="ksharesrequestpush"><a class="header" href="#ksharesrequestpush">kSharesRequestPush</a></h3>
<p>Request to push shares for kStakingVault operations</p>
<pre><code class="language-solidity">function kSharesRequestPush(address sourceVault, uint256 amount, bytes32 batchId) external payable;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sourceVault</code></td><td><code>address</code></td><td>The vault to push shares from</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount of shares to push</td></tr>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>The batch ID for this operation</td></tr>
</tbody></table>
</div>
<h3 id="ksharesrequestpull"><a class="header" href="#ksharesrequestpull">kSharesRequestPull</a></h3>
<p>Request to pull shares for kStakingVault operations</p>
<pre><code class="language-solidity">function kSharesRequestPull(address sourceVault, uint256 amount, bytes32 batchId) external payable;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sourceVault</code></td><td><code>address</code></td><td>The vault to pull shares from</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount of shares to pull</td></tr>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>The batch ID for this operation</td></tr>
</tbody></table>
</div>
<h3 id="proposesettlebatch"><a class="header" href="#proposesettlebatch">proposeSettleBatch</a></h3>
<p>Propose a settlement for a vault's batch</p>
<pre><code class="language-solidity">function proposeSettleBatch(
    address asset,
    address vault,
    bytes32 batchId,
    uint256 totalAssets,
    uint256 netted,
    uint256 yield,
    bool profit
)
    external
    payable
    returns (bytes32 proposalId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>Asset address</td></tr>
<tr><td><code>vault</code></td><td><code>address</code></td><td>Vault address to settle</td></tr>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>Batch ID to settle</td></tr>
<tr><td><code>totalAssets</code></td><td><code>uint256</code></td><td>Total assets in the vault</td></tr>
<tr><td><code>netted</code></td><td><code>uint256</code></td><td>Netted amount in current batch</td></tr>
<tr><td><code>yield</code></td><td><code>uint256</code></td><td>Yield in current batch</td></tr>
<tr><td><code>profit</code></td><td><code>bool</code></td><td>Whether the batch is profitable</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proposalId</code></td><td><code>bytes32</code></td><td>The unique identifier for this proposal</td></tr>
</tbody></table>
</div>
<h3 id="executesettlebatch"><a class="header" href="#executesettlebatch">executeSettleBatch</a></h3>
<p>Execute a settlement proposal after cooldown period</p>
<pre><code class="language-solidity">function executeSettleBatch(bytes32 proposalId) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proposalId</code></td><td><code>bytes32</code></td><td>The proposal ID to execute</td></tr>
</tbody></table>
</div>
<h3 id="cancelproposal"><a class="header" href="#cancelproposal">cancelProposal</a></h3>
<p>Cancel a settlement proposal before execution</p>
<pre><code class="language-solidity">function cancelProposal(bytes32 proposalId) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proposalId</code></td><td><code>bytes32</code></td><td>The proposal ID to cancel</td></tr>
</tbody></table>
</div>
<h3 id="updateproposal"><a class="header" href="#updateproposal">updateProposal</a></h3>
<p>Update a settlement proposal before execution</p>
<pre><code class="language-solidity">function updateProposal(bytes32 proposalId, uint256 totalAssets, uint256 netted, uint256 yield, bool profit) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proposalId</code></td><td><code>bytes32</code></td><td>The proposal ID to update</td></tr>
<tr><td><code>totalAssets</code></td><td><code>uint256</code></td><td>New total assets value</td></tr>
<tr><td><code>netted</code></td><td><code>uint256</code></td><td>New netted amount</td></tr>
<tr><td><code>yield</code></td><td><code>uint256</code></td><td>New yield amount</td></tr>
<tr><td><code>profit</code></td><td><code>bool</code></td><td>New profit status</td></tr>
</tbody></table>
</div>
<h3 id="setpaused"><a class="header" href="#setpaused">setPaused</a></h3>
<p>Set contract pause state</p>
<pre><code class="language-solidity">function setPaused(bool paused) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>paused</code></td><td><code>bool</code></td><td>New pause state</td></tr>
</tbody></table>
</div>
<h3 id="setsettlementcooldown"><a class="header" href="#setsettlementcooldown">setSettlementCooldown</a></h3>
<p>Set the cooldown period for settlement proposals</p>
<pre><code class="language-solidity">function setSettlementCooldown(uint256 cooldown) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>cooldown</code></td><td><code>uint256</code></td><td>New cooldown period in seconds</td></tr>
</tbody></table>
</div>
<h3 id="getdnvaultbyasset"><a class="header" href="#getdnvaultbyasset">getDNVaultByAsset</a></h3>
<p>Gets the DN vault address for a given asset</p>
<pre><code class="language-solidity">function getDNVaultByAsset(address asset) external view returns (address vault);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>The asset address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The corresponding DN vault address</td></tr>
</tbody></table>
</div>
<h3 id="getbatchidbalances"><a class="header" href="#getbatchidbalances">getBatchIdBalances</a></h3>
<p>Get batch balances for a vault</p>
<pre><code class="language-solidity">function getBatchIdBalances(
    address vault,
    bytes32 batchId
)
    external
    view
    returns (uint256 deposited, uint256 requested);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>Vault address</td></tr>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>Batch ID</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>deposited</code></td><td><code>uint256</code></td><td>Amount deposited in this batch</td></tr>
<tr><td><code>requested</code></td><td><code>uint256</code></td><td>Amount requested in this batch</td></tr>
</tbody></table>
</div>
<h3 id="getrequestedshares"><a class="header" href="#getrequestedshares">getRequestedShares</a></h3>
<p>Get requested shares for a vault batch</p>
<pre><code class="language-solidity">function getRequestedShares(address vault, bytes32 batchId) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>Vault address</td></tr>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>Batch ID</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Requested shares amount</td></tr>
</tbody></table>
</div>
<h3 id="ispaused"><a class="header" href="#ispaused">isPaused</a></h3>
<p>Check if contract is paused</p>
<pre><code class="language-solidity">function isPaused() external view returns (bool);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>True if paused</td></tr>
</tbody></table>
</div>
<h3 id="getsettlementproposal"><a class="header" href="#getsettlementproposal">getSettlementProposal</a></h3>
<p>Get details of a settlement proposal</p>
<pre><code class="language-solidity">function getSettlementProposal(bytes32 proposalId) external view returns (VaultSettlementProposal memory proposal);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proposalId</code></td><td><code>bytes32</code></td><td>The proposal ID</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proposal</code></td><td><code>VaultSettlementProposal</code></td><td>The settlement proposal details</td></tr>
</tbody></table>
</div>
<h3 id="canexecuteproposal"><a class="header" href="#canexecuteproposal">canExecuteProposal</a></h3>
<p>Check if a proposal can be executed</p>
<pre><code class="language-solidity">function canExecuteProposal(bytes32 proposalId) external view returns (bool canExecute, string memory reason);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proposalId</code></td><td><code>bytes32</code></td><td>The proposal ID</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>canExecute</code></td><td><code>bool</code></td><td>Whether the proposal can be executed</td></tr>
<tr><td><code>reason</code></td><td><code>string</code></td><td>Reason if cannot execute</td></tr>
</tbody></table>
</div>
<h3 id="getsettlementcooldown"><a class="header" href="#getsettlementcooldown">getSettlementCooldown</a></h3>
<p>Get the current settlement cooldown period</p>
<pre><code class="language-solidity">function getSettlementCooldown() external view returns (uint256 cooldown);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>cooldown</code></td><td><code>uint256</code></td><td>The cooldown period in seconds</td></tr>
</tbody></table>
</div>
<h3 id="contractname"><a class="header" href="#contractname">contractName</a></h3>
<p>Returns the contract name</p>
<pre><code class="language-solidity">function contractName() external pure returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Contract name</td></tr>
</tbody></table>
</div>
<h3 id="contractversion"><a class="header" href="#contractversion">contractVersion</a></h3>
<p>Returns the contract version</p>
<pre><code class="language-solidity">function contractVersion() external pure returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Contract version</td></tr>
</tbody></table>
</div>
<h2 id="events-2"><a class="header" href="#events-2">Events</a></h2>
<h3 id="initialized"><a class="header" href="#initialized">Initialized</a></h3>
<pre><code class="language-solidity">event Initialized(address indexed registry, address indexed owner, address admin, bool paused);
</code></pre>
<h3 id="assetspushed"><a class="header" href="#assetspushed">AssetsPushed</a></h3>
<pre><code class="language-solidity">event AssetsPushed(address indexed from, uint256 amount);
</code></pre>
<h3 id="assetsrequestpulled"><a class="header" href="#assetsrequestpulled">AssetsRequestPulled</a></h3>
<pre><code class="language-solidity">event AssetsRequestPulled(address indexed vault, address indexed asset, address indexed batchReceiver, uint256 amount);
</code></pre>
<h3 id="assetstransfered"><a class="header" href="#assetstransfered">AssetsTransfered</a></h3>
<pre><code class="language-solidity">event AssetsTransfered(address indexed sourceVault, address indexed targetVault, address indexed asset, uint256 amount);
</code></pre>
<h3 id="sharesrequestedpushed"><a class="header" href="#sharesrequestedpushed">SharesRequestedPushed</a></h3>
<pre><code class="language-solidity">event SharesRequestedPushed(address indexed vault, bytes32 indexed batchId, uint256 amount);
</code></pre>
<h3 id="sharesrequestedpulled"><a class="header" href="#sharesrequestedpulled">SharesRequestedPulled</a></h3>
<pre><code class="language-solidity">event SharesRequestedPulled(address indexed vault, bytes32 indexed batchId, uint256 amount);
</code></pre>
<h3 id="sharessettled"><a class="header" href="#sharessettled">SharesSettled</a></h3>
<pre><code class="language-solidity">event SharesSettled(
    address[] vaults, bytes32 indexed batchId, uint256 totalRequestedShares, uint256[] totalAssets, uint256 sharePrice
);
</code></pre>
<h3 id="batchsettled"><a class="header" href="#batchsettled">BatchSettled</a></h3>
<pre><code class="language-solidity">event BatchSettled(address indexed vault, bytes32 indexed batchId, uint256 totalAssets);
</code></pre>
<h3 id="pegprotectionactivated"><a class="header" href="#pegprotectionactivated">PegProtectionActivated</a></h3>
<pre><code class="language-solidity">event PegProtectionActivated(address indexed vault, uint256 shortfall);
</code></pre>
<h3 id="pegprotectionexecuted"><a class="header" href="#pegprotectionexecuted">PegProtectionExecuted</a></h3>
<pre><code class="language-solidity">event PegProtectionExecuted(address indexed sourceVault, address indexed targetVault, uint256 amount);
</code></pre>
<h3 id="yielddistributed"><a class="header" href="#yielddistributed">YieldDistributed</a></h3>
<pre><code class="language-solidity">event YieldDistributed(address indexed vault, uint256 yield, bool isProfit);
</code></pre>
<h3 id="deposited-1"><a class="header" href="#deposited-1">Deposited</a></h3>
<pre><code class="language-solidity">event Deposited(address indexed vault, address indexed asset, uint256 amount, bool isKMinter);
</code></pre>
<h3 id="settlementproposed"><a class="header" href="#settlementproposed">SettlementProposed</a></h3>
<pre><code class="language-solidity">event SettlementProposed(
    bytes32 indexed proposalId,
    address indexed vault,
    bytes32 indexed batchId,
    uint256 totalAssets,
    uint256 netted,
    uint256 yield,
    bool profit,
    uint256 executeAfter
);
</code></pre>
<h3 id="settlementexecuted"><a class="header" href="#settlementexecuted">SettlementExecuted</a></h3>
<pre><code class="language-solidity">event SettlementExecuted(bytes32 indexed proposalId, address indexed vault, bytes32 indexed batchId, address executor);
</code></pre>
<h3 id="settlementcancelled"><a class="header" href="#settlementcancelled">SettlementCancelled</a></h3>
<pre><code class="language-solidity">event SettlementCancelled(bytes32 indexed proposalId, address indexed vault, bytes32 indexed batchId);
</code></pre>
<h3 id="settlementupdated"><a class="header" href="#settlementupdated">SettlementUpdated</a></h3>
<pre><code class="language-solidity">event SettlementUpdated(bytes32 indexed proposalId, uint256 totalAssets, uint256 netted, uint256 yield, bool profit);
</code></pre>
<h3 id="settlementcooldownupdated"><a class="header" href="#settlementcooldownupdated">SettlementCooldownUpdated</a></h3>
<pre><code class="language-solidity">event SettlementCooldownUpdated(uint256 oldCooldown, uint256 newCooldown);
</code></pre>
<h2 id="errors-3"><a class="header" href="#errors-3">Errors</a></h2>
<h3 id="zeroamount"><a class="header" href="#zeroamount">ZeroAmount</a></h3>
<pre><code class="language-solidity">error ZeroAmount();
</code></pre>
<h3 id="insufficientvirtualbalance"><a class="header" href="#insufficientvirtualbalance">InsufficientVirtualBalance</a></h3>
<pre><code class="language-solidity">error InsufficientVirtualBalance();
</code></pre>
<h3 id="contractpaused"><a class="header" href="#contractpaused">ContractPaused</a></h3>
<pre><code class="language-solidity">error ContractPaused();
</code></pre>
<h3 id="onlystakingvault"><a class="header" href="#onlystakingvault">OnlyStakingVault</a></h3>
<pre><code class="language-solidity">error OnlyStakingVault();
</code></pre>
<h3 id="proposalnotfound"><a class="header" href="#proposalnotfound">ProposalNotFound</a></h3>
<pre><code class="language-solidity">error ProposalNotFound();
</code></pre>
<h3 id="proposalalreadyexecuted"><a class="header" href="#proposalalreadyexecuted">ProposalAlreadyExecuted</a></h3>
<pre><code class="language-solidity">error ProposalAlreadyExecuted();
</code></pre>
<h3 id="proposalcancelled"><a class="header" href="#proposalcancelled">ProposalCancelled</a></h3>
<pre><code class="language-solidity">error ProposalCancelled();
</code></pre>
<h3 id="cooldownnotpassed"><a class="header" href="#cooldownnotpassed">CooldownNotPassed</a></h3>
<pre><code class="language-solidity">error CooldownNotPassed();
</code></pre>
<h3 id="invalidcooldown"><a class="header" href="#invalidcooldown">InvalidCooldown</a></h3>
<pre><code class="language-solidity">error InvalidCooldown();
</code></pre>
<h2 id="structs-4"><a class="header" href="#structs-4">Structs</a></h2>
<h3 id="balances"><a class="header" href="#balances">Balances</a></h3>
<pre><code class="language-solidity">struct Balances {
    uint128 requested;
    uint128 deposited;
}
</code></pre>
<h3 id="vaultsettlementproposal"><a class="header" href="#vaultsettlementproposal">VaultSettlementProposal</a></h3>
<pre><code class="language-solidity">struct VaultSettlementProposal {
    address asset;
    address vault;
    bytes32 batchId;
    uint256 totalAssets;
    uint256 netted;
    uint256 yield;
    bool profit;
    uint256 executeAfter;
    bool executed;
    bool cancelled;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ikbatchreceiver"><a class="header" href="#ikbatchreceiver">IkBatchReceiver</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/interfaces/IkBatchReceiver.sol">Git Source</a></p>
<p>Interface for kBatchReceiver</p>
<h2 id="functions-9"><a class="header" href="#functions-9">Functions</a></h2>
<h3 id="kminter"><a class="header" href="#kminter">kMinter</a></h3>
<pre><code class="language-solidity">function kMinter() external view returns (address);
</code></pre>
<h3 id="asset"><a class="header" href="#asset">asset</a></h3>
<pre><code class="language-solidity">function asset() external view returns (address);
</code></pre>
<h3 id="batchid"><a class="header" href="#batchid">batchId</a></h3>
<pre><code class="language-solidity">function batchId() external view returns (bytes32);
</code></pre>
<h3 id="pullassets"><a class="header" href="#pullassets">pullAssets</a></h3>
<pre><code class="language-solidity">function pullAssets(address receiver, uint256 amount, bytes32 _batchId) external;
</code></pre>
<h2 id="events-3"><a class="header" href="#events-3">Events</a></h2>
<h3 id="batchreceiverinitialized"><a class="header" href="#batchreceiverinitialized">BatchReceiverInitialized</a></h3>
<pre><code class="language-solidity">event BatchReceiverInitialized(address indexed kMinter, bytes32 indexed batchId, address asset);
</code></pre>
<h3 id="pulledassets"><a class="header" href="#pulledassets">PulledAssets</a></h3>
<pre><code class="language-solidity">event PulledAssets(address indexed receiver, address indexed asset, uint256 amount);
</code></pre>
<h2 id="errors-4"><a class="header" href="#errors-4">Errors</a></h2>
<h3 id="zeroaddress-2"><a class="header" href="#zeroaddress-2">ZeroAddress</a></h3>
<pre><code class="language-solidity">error ZeroAddress();
</code></pre>
<h3 id="onlykminter-2"><a class="header" href="#onlykminter-2">OnlyKMinter</a></h3>
<pre><code class="language-solidity">error OnlyKMinter();
</code></pre>
<h3 id="invalidbatchid"><a class="header" href="#invalidbatchid">InvalidBatchId</a></h3>
<pre><code class="language-solidity">error InvalidBatchId();
</code></pre>
<h3 id="zeroamount-1"><a class="header" href="#zeroamount-1">ZeroAmount</a></h3>
<pre><code class="language-solidity">error ZeroAmount();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ikminter"><a class="header" href="#ikminter">IkMinter</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/interfaces/IkMinter.sol">Git Source</a></p>
<p>Interface for kMinter</p>
<h2 id="functions-10"><a class="header" href="#functions-10">Functions</a></h2>
<h3 id="mint"><a class="header" href="#mint">mint</a></h3>
<pre><code class="language-solidity">function mint(address asset, address to, uint256 amount) external payable;
</code></pre>
<h3 id="requestredeem"><a class="header" href="#requestredeem">requestRedeem</a></h3>
<pre><code class="language-solidity">function requestRedeem(address asset, address to, uint256 amount) external payable returns (bytes32 requestId);
</code></pre>
<h3 id="redeem-2"><a class="header" href="#redeem-2">redeem</a></h3>
<pre><code class="language-solidity">function redeem(bytes32 requestId) external payable;
</code></pre>
<h3 id="cancelrequest"><a class="header" href="#cancelrequest">cancelRequest</a></h3>
<pre><code class="language-solidity">function cancelRequest(bytes32 requestId) external payable;
</code></pre>
<h3 id="setpaused-1"><a class="header" href="#setpaused-1">setPaused</a></h3>
<pre><code class="language-solidity">function setPaused(bool paused) external;
</code></pre>
<h3 id="ispaused-1"><a class="header" href="#ispaused-1">isPaused</a></h3>
<pre><code class="language-solidity">function isPaused() external view returns (bool);
</code></pre>
<h3 id="getredeemrequest"><a class="header" href="#getredeemrequest">getRedeemRequest</a></h3>
<pre><code class="language-solidity">function getRedeemRequest(bytes32 requestId) external view returns (RedeemRequest memory);
</code></pre>
<h3 id="getuserrequests"><a class="header" href="#getuserrequests">getUserRequests</a></h3>
<pre><code class="language-solidity">function getUserRequests(address user) external view returns (bytes32[] memory);
</code></pre>
<h3 id="getrequestcounter"><a class="header" href="#getrequestcounter">getRequestCounter</a></h3>
<pre><code class="language-solidity">function getRequestCounter() external view returns (uint256);
</code></pre>
<h2 id="events-4"><a class="header" href="#events-4">Events</a></h2>
<h3 id="initialized-1"><a class="header" href="#initialized-1">Initialized</a></h3>
<pre><code class="language-solidity">event Initialized(address indexed registry, address indexed owner, address admin, address emergencyAdmin);
</code></pre>
<h3 id="minted"><a class="header" href="#minted">Minted</a></h3>
<pre><code class="language-solidity">event Minted(address indexed to, uint256 amount, bytes32 batchId);
</code></pre>
<h3 id="redeemrequestcreated"><a class="header" href="#redeemrequestcreated">RedeemRequestCreated</a></h3>
<pre><code class="language-solidity">event RedeemRequestCreated(
    bytes32 indexed requestId,
    address indexed user,
    address indexed kToken,
    uint256 amount,
    address recipient,
    bytes32 batchId
);
</code></pre>
<h3 id="redeemed"><a class="header" href="#redeemed">Redeemed</a></h3>
<pre><code class="language-solidity">event Redeemed(bytes32 indexed requestId);
</code></pre>
<h3 id="cancelled"><a class="header" href="#cancelled">Cancelled</a></h3>
<pre><code class="language-solidity">event Cancelled(bytes32 indexed requestId);
</code></pre>
<h2 id="errors-5"><a class="header" href="#errors-5">Errors</a></h2>
<h3 id="zeroamount-2"><a class="header" href="#zeroamount-2">ZeroAmount</a></h3>
<pre><code class="language-solidity">error ZeroAmount();
</code></pre>
<h3 id="batchnotsettled"><a class="header" href="#batchnotsettled">BatchNotSettled</a></h3>
<pre><code class="language-solidity">error BatchNotSettled();
</code></pre>
<h3 id="insufficientbalance"><a class="header" href="#insufficientbalance">InsufficientBalance</a></h3>
<pre><code class="language-solidity">error InsufficientBalance();
</code></pre>
<h3 id="requestnotfound"><a class="header" href="#requestnotfound">RequestNotFound</a></h3>
<pre><code class="language-solidity">error RequestNotFound();
</code></pre>
<h3 id="requestnoteligible"><a class="header" href="#requestnoteligible">RequestNotEligible</a></h3>
<pre><code class="language-solidity">error RequestNotEligible();
</code></pre>
<h3 id="requestalreadyprocessed"><a class="header" href="#requestalreadyprocessed">RequestAlreadyProcessed</a></h3>
<pre><code class="language-solidity">error RequestAlreadyProcessed();
</code></pre>
<h3 id="onlyinstitution"><a class="header" href="#onlyinstitution">OnlyInstitution</a></h3>
<pre><code class="language-solidity">error OnlyInstitution();
</code></pre>
<h3 id="batchclosed"><a class="header" href="#batchclosed">BatchClosed</a></h3>
<pre><code class="language-solidity">error BatchClosed();
</code></pre>
<h3 id="batchsettled-1"><a class="header" href="#batchsettled-1">BatchSettled</a></h3>
<pre><code class="language-solidity">error BatchSettled();
</code></pre>
<h3 id="contractpaused-1"><a class="header" href="#contractpaused-1">ContractPaused</a></h3>
<pre><code class="language-solidity">error ContractPaused();
</code></pre>
<h3 id="invalidasset-1"><a class="header" href="#invalidasset-1">InvalidAsset</a></h3>
<pre><code class="language-solidity">error InvalidAsset();
</code></pre>
<h2 id="structs-5"><a class="header" href="#structs-5">Structs</a></h2>
<h3 id="redeemrequest"><a class="header" href="#redeemrequest">RedeemRequest</a></h3>
<pre><code class="language-solidity">struct RedeemRequest {
    address user;
    uint256 amount;
    address asset;
    uint64 requestTimestamp;
    RequestStatus status;
    bytes32 batchId;
    address recipient;
}
</code></pre>
<h2 id="enums"><a class="header" href="#enums">Enums</a></h2>
<h3 id="requeststatus"><a class="header" href="#requeststatus">RequestStatus</a></h3>
<pre><code class="language-solidity">enum RequestStatus {
    PENDING,
    REDEEMED,
    CANCELLED
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ikregistry"><a class="header" href="#ikregistry">IkRegistry</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/interfaces/IkRegistry.sol">Git Source</a></p>
<h2 id="functions-11"><a class="header" href="#functions-11">Functions</a></h2>
<h3 id="setsingletoncontract"><a class="header" href="#setsingletoncontract">setSingletonContract</a></h3>
<pre><code class="language-solidity">function setSingletonContract(bytes32 id, address contractAddress) external;
</code></pre>
<h3 id="registerasset"><a class="header" href="#registerasset">registerAsset</a></h3>
<pre><code class="language-solidity">function registerAsset(address asset, address kToken, bytes32 id) external;
</code></pre>
<h3 id="registervault"><a class="header" href="#registervault">registerVault</a></h3>
<pre><code class="language-solidity">function registerVault(address vault, VaultType type_, address asset) external;
</code></pre>
<h3 id="registeradapter"><a class="header" href="#registeradapter">registerAdapter</a></h3>
<pre><code class="language-solidity">function registerAdapter(address vault, address adapter) external;
</code></pre>
<h3 id="removeadapter"><a class="header" href="#removeadapter">removeAdapter</a></h3>
<pre><code class="language-solidity">function removeAdapter(address vault, address adapter) external;
</code></pre>
<h3 id="getcontractbyid"><a class="header" href="#getcontractbyid">getContractById</a></h3>
<pre><code class="language-solidity">function getContractById(bytes32 id) external view returns (address);
</code></pre>
<h3 id="getassetbyid"><a class="header" href="#getassetbyid">getAssetById</a></h3>
<pre><code class="language-solidity">function getAssetById(bytes32 id) external view returns (address);
</code></pre>
<h3 id="getallassets"><a class="header" href="#getallassets">getAllAssets</a></h3>
<pre><code class="language-solidity">function getAllAssets() external view returns (address[] memory);
</code></pre>
<h3 id="getcorecontracts"><a class="header" href="#getcorecontracts">getCoreContracts</a></h3>
<pre><code class="language-solidity">function getCoreContracts() external view returns (address kMinter, address kAssetRouter);
</code></pre>
<h3 id="getvaultsbyasset"><a class="header" href="#getvaultsbyasset">getVaultsByAsset</a></h3>
<pre><code class="language-solidity">function getVaultsByAsset(address asset) external view returns (address[] memory);
</code></pre>
<h3 id="getvaultbyassetandtype"><a class="header" href="#getvaultbyassetandtype">getVaultByAssetAndType</a></h3>
<pre><code class="language-solidity">function getVaultByAssetAndType(address asset, uint8 vaultType) external view returns (address);
</code></pre>
<h3 id="getvaulttype"><a class="header" href="#getvaulttype">getVaultType</a></h3>
<pre><code class="language-solidity">function getVaultType(address vault) external view returns (uint8);
</code></pre>
<h3 id="isrelayer"><a class="header" href="#isrelayer">isRelayer</a></h3>
<pre><code class="language-solidity">function isRelayer(address account) external view returns (bool);
</code></pre>
<h3 id="isguardian"><a class="header" href="#isguardian">isGuardian</a></h3>
<pre><code class="language-solidity">function isGuardian(address account) external view returns (bool);
</code></pre>
<h3 id="isregisteredasset"><a class="header" href="#isregisteredasset">isRegisteredAsset</a></h3>
<pre><code class="language-solidity">function isRegisteredAsset(address asset) external view returns (bool);
</code></pre>
<h3 id="isvault"><a class="header" href="#isvault">isVault</a></h3>
<pre><code class="language-solidity">function isVault(address vault) external view returns (bool);
</code></pre>
<h3 id="issingletoncontract"><a class="header" href="#issingletoncontract">isSingletonContract</a></h3>
<pre><code class="language-solidity">function isSingletonContract(address contractAddress) external view returns (bool);
</code></pre>
<h3 id="isktoken"><a class="header" href="#isktoken">isKToken</a></h3>
<pre><code class="language-solidity">function isKToken(address kToken) external view returns (bool);
</code></pre>
<h3 id="getadapters"><a class="header" href="#getadapters">getAdapters</a></h3>
<pre><code class="language-solidity">function getAdapters(address vault) external view returns (address[] memory);
</code></pre>
<h3 id="isadapterregistered"><a class="header" href="#isadapterregistered">isAdapterRegistered</a></h3>
<pre><code class="language-solidity">function isAdapterRegistered(address adapter) external view returns (bool);
</code></pre>
<h3 id="getvaultassets"><a class="header" href="#getvaultassets">getVaultAssets</a></h3>
<pre><code class="language-solidity">function getVaultAssets(address vault) external view returns (address[] memory);
</code></pre>
<h3 id="assettoktoken"><a class="header" href="#assettoktoken">assetToKToken</a></h3>
<pre><code class="language-solidity">function assetToKToken(address asset) external view returns (address);
</code></pre>
<h2 id="events-5"><a class="header" href="#events-5">Events</a></h2>
<h3 id="singletoncontractset"><a class="header" href="#singletoncontractset">SingletonContractSet</a></h3>
<pre><code class="language-solidity">event SingletonContractSet(bytes32 indexed id, address indexed contractAddress);
</code></pre>
<h3 id="vaultregistered"><a class="header" href="#vaultregistered">VaultRegistered</a></h3>
<pre><code class="language-solidity">event VaultRegistered(address indexed vault, address indexed asset, VaultType indexed vaultType);
</code></pre>
<h3 id="ktokenregistered"><a class="header" href="#ktokenregistered">KTokenRegistered</a></h3>
<pre><code class="language-solidity">event KTokenRegistered(address indexed asset, address indexed kToken);
</code></pre>
<h3 id="assetsupported"><a class="header" href="#assetsupported">AssetSupported</a></h3>
<pre><code class="language-solidity">event AssetSupported(address indexed asset);
</code></pre>
<h3 id="adapterregistered"><a class="header" href="#adapterregistered">AdapterRegistered</a></h3>
<pre><code class="language-solidity">event AdapterRegistered(address indexed vault, address indexed adapter);
</code></pre>
<h3 id="adapterremoved"><a class="header" href="#adapterremoved">AdapterRemoved</a></h3>
<pre><code class="language-solidity">event AdapterRemoved(address indexed vault, address indexed adapter);
</code></pre>
<h2 id="errors-6"><a class="header" href="#errors-6">Errors</a></h2>
<h3 id="zeroaddress-3"><a class="header" href="#zeroaddress-3">ZeroAddress</a></h3>
<pre><code class="language-solidity">error ZeroAddress();
</code></pre>
<h3 id="alreadyregistered"><a class="header" href="#alreadyregistered">AlreadyRegistered</a></h3>
<pre><code class="language-solidity">error AlreadyRegistered();
</code></pre>
<h3 id="assetnotsupported-2"><a class="header" href="#assetnotsupported-2">AssetNotSupported</a></h3>
<pre><code class="language-solidity">error AssetNotSupported();
</code></pre>
<h3 id="contractnotset"><a class="header" href="#contractnotset">ContractNotSet</a></h3>
<pre><code class="language-solidity">error ContractNotSet();
</code></pre>
<h3 id="adapternotregistered"><a class="header" href="#adapternotregistered">AdapterNotRegistered</a></h3>
<pre><code class="language-solidity">error AdapterNotRegistered();
</code></pre>
<h3 id="invalidadapter"><a class="header" href="#invalidadapter">InvalidAdapter</a></h3>
<pre><code class="language-solidity">error InvalidAdapter();
</code></pre>
<h3 id="adapteralreadyset"><a class="header" href="#adapteralreadyset">AdapterAlreadySet</a></h3>
<pre><code class="language-solidity">error AdapterAlreadySet();
</code></pre>
<h2 id="enums-1"><a class="header" href="#enums-1">Enums</a></h2>
<h3 id="vaulttype"><a class="header" href="#vaulttype">VaultType</a></h3>
<pre><code class="language-solidity">enum VaultType {
    MINTER,
    DN,
    ALPHA,
    BETA,
    GAMMA,
    DELTA,
    EPSILON,
    ZETA,
    ETA,
    THETA,
    IOTA,
    KAPPA,
    LAMBDA,
    MU,
    NU,
    XI,
    OMICRON,
    PI,
    RHO,
    SIGMA,
    TAU,
    UPSILON,
    PHI,
    CHI,
    PSI,
    OMEGA,
    VAULT_27,
    VAULT_28,
    VAULT_29,
    VAULT_30,
    VAULT_31,
    VAULT_32,
    VAULT_33,
    VAULT_34,
    VAULT_35,
    VAULT_36,
    VAULT_37,
    VAULT_38,
    VAULT_39,
    VAULT_40,
    VAULT_41,
    VAULT_42,
    VAULT_43,
    VAULT_44,
    VAULT_45,
    VAULT_46,
    VAULT_47,
    VAULT_48,
    VAULT_49,
    VAULT_50,
    VAULT_51,
    VAULT_52,
    VAULT_53,
    VAULT_54,
    VAULT_55,
    VAULT_56,
    VAULT_57,
    VAULT_58,
    VAULT_59,
    VAULT_60,
    VAULT_61,
    VAULT_62,
    VAULT_63,
    VAULT_64,
    VAULT_65,
    VAULT_66,
    VAULT_67,
    VAULT_68,
    VAULT_69,
    VAULT_70,
    VAULT_71,
    VAULT_72,
    VAULT_73,
    VAULT_74,
    VAULT_75,
    VAULT_76,
    VAULT_77,
    VAULT_78,
    VAULT_79,
    VAULT_80,
    VAULT_81,
    VAULT_82,
    VAULT_83,
    VAULT_84,
    VAULT_85,
    VAULT_86,
    VAULT_87,
    VAULT_88,
    VAULT_89,
    VAULT_90,
    VAULT_91,
    VAULT_92,
    VAULT_93,
    VAULT_94,
    VAULT_95,
    VAULT_96,
    VAULT_97,
    VAULT_98,
    VAULT_99,
    VAULT_100,
    VAULT_101,
    VAULT_102,
    VAULT_103,
    VAULT_104,
    VAULT_105,
    VAULT_106,
    VAULT_107,
    VAULT_108,
    VAULT_109,
    VAULT_110,
    VAULT_111,
    VAULT_112,
    VAULT_113,
    VAULT_114,
    VAULT_115,
    VAULT_116,
    VAULT_117,
    VAULT_118,
    VAULT_119,
    VAULT_120,
    VAULT_121,
    VAULT_122,
    VAULT_123,
    VAULT_124,
    VAULT_125,
    VAULT_126,
    VAULT_127,
    VAULT_128,
    VAULT_129,
    VAULT_130,
    VAULT_131,
    VAULT_132,
    VAULT_133,
    VAULT_134,
    VAULT_135,
    VAULT_136,
    VAULT_137,
    VAULT_138,
    VAULT_139,
    VAULT_140,
    VAULT_141,
    VAULT_142,
    VAULT_143,
    VAULT_144,
    VAULT_145,
    VAULT_146,
    VAULT_147,
    VAULT_148,
    VAULT_149,
    VAULT_150,
    VAULT_151,
    VAULT_152,
    VAULT_153,
    VAULT_154,
    VAULT_155,
    VAULT_156,
    VAULT_157,
    VAULT_158,
    VAULT_159,
    VAULT_160,
    VAULT_161,
    VAULT_162,
    VAULT_163,
    VAULT_164,
    VAULT_165,
    VAULT_166,
    VAULT_167,
    VAULT_168,
    VAULT_169,
    VAULT_170,
    VAULT_171,
    VAULT_172,
    VAULT_173,
    VAULT_174,
    VAULT_175,
    VAULT_176,
    VAULT_177,
    VAULT_178,
    VAULT_179,
    VAULT_180,
    VAULT_181,
    VAULT_182,
    VAULT_183,
    VAULT_184,
    VAULT_185,
    VAULT_186,
    VAULT_187,
    VAULT_188,
    VAULT_189,
    VAULT_190,
    VAULT_191,
    VAULT_192,
    VAULT_193,
    VAULT_194,
    VAULT_195,
    VAULT_196,
    VAULT_197,
    VAULT_198,
    VAULT_199,
    VAULT_200,
    VAULT_201,
    VAULT_202,
    VAULT_203,
    VAULT_204,
    VAULT_205,
    VAULT_206,
    VAULT_207,
    VAULT_208,
    VAULT_209,
    VAULT_210,
    VAULT_211,
    VAULT_212,
    VAULT_213,
    VAULT_214,
    VAULT_215,
    VAULT_216,
    VAULT_217,
    VAULT_218,
    VAULT_219,
    VAULT_220,
    VAULT_221,
    VAULT_222,
    VAULT_223,
    VAULT_224,
    VAULT_225,
    VAULT_226,
    VAULT_227,
    VAULT_228,
    VAULT_229,
    VAULT_230,
    VAULT_231,
    VAULT_232,
    VAULT_233,
    VAULT_234,
    VAULT_235,
    VAULT_236,
    VAULT_237,
    VAULT_238,
    VAULT_239,
    VAULT_240,
    VAULT_241,
    VAULT_242,
    VAULT_243,
    VAULT_244,
    VAULT_245,
    VAULT_246,
    VAULT_247,
    VAULT_248,
    VAULT_249,
    VAULT_250,
    VAULT_251,
    VAULT_252,
    VAULT_253,
    VAULT_254,
    VAULT_255
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ikstakingvault"><a class="header" href="#ikstakingvault">IkStakingVault</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/interfaces/IkStakingVault.sol">Git Source</a></p>
<p>Interface for kStakingVault that manages minter operations and user staking</p>
<p><em>Matches kStakingVault implementation</em></p>
<h2 id="functions-12"><a class="header" href="#functions-12">Functions</a></h2>
<h3 id="requeststake"><a class="header" href="#requeststake">requestStake</a></h3>
<pre><code class="language-solidity">function requestStake(address to, uint256 kTokensAmount) external payable returns (bytes32 requestId);
</code></pre>
<h3 id="requestunstake"><a class="header" href="#requestunstake">requestUnstake</a></h3>
<pre><code class="language-solidity">function requestUnstake(address to, uint256 stkTokenAmount) external payable returns (bytes32 requestId);
</code></pre>
<h3 id="claimstakedshares"><a class="header" href="#claimstakedshares">claimStakedShares</a></h3>
<pre><code class="language-solidity">function claimStakedShares(bytes32 batchId, bytes32 requestId) external payable;
</code></pre>
<h3 id="claimunstakedassets"><a class="header" href="#claimunstakedassets">claimUnstakedAssets</a></h3>
<pre><code class="language-solidity">function claimUnstakedAssets(bytes32 batchId, bytes32 requestId) external payable;
</code></pre>
<h3 id="updatelasttotalassets"><a class="header" href="#updatelasttotalassets">updateLastTotalAssets</a></h3>
<pre><code class="language-solidity">function updateLastTotalAssets(uint256 totalAssets) external;
</code></pre>
<h3 id="createbatchreceiver"><a class="header" href="#createbatchreceiver">createBatchReceiver</a></h3>
<pre><code class="language-solidity">function createBatchReceiver(bytes32 batchId) external returns (address);
</code></pre>
<h3 id="closebatch"><a class="header" href="#closebatch">closeBatch</a></h3>
<pre><code class="language-solidity">function closeBatch(bytes32 _batchId, bool _create) external;
</code></pre>
<h3 id="settlebatch"><a class="header" href="#settlebatch">settleBatch</a></h3>
<pre><code class="language-solidity">function settleBatch(bytes32 _batchId) external;
</code></pre>
<h3 id="totalsupply"><a class="header" href="#totalsupply">totalSupply</a></h3>
<pre><code class="language-solidity">function totalSupply() external view returns (uint256);
</code></pre>
<h3 id="asset-1"><a class="header" href="#asset-1">asset</a></h3>
<pre><code class="language-solidity">function asset() external view returns (address);
</code></pre>
<h3 id="underlyingasset"><a class="header" href="#underlyingasset">underlyingAsset</a></h3>
<pre><code class="language-solidity">function underlyingAsset() external view returns (address);
</code></pre>
<h3 id="name-2"><a class="header" href="#name-2">name</a></h3>
<pre><code class="language-solidity">function name() external view returns (string memory);
</code></pre>
<h3 id="symbol"><a class="header" href="#symbol">symbol</a></h3>
<pre><code class="language-solidity">function symbol() external view returns (string memory);
</code></pre>
<h3 id="decimals"><a class="header" href="#decimals">decimals</a></h3>
<pre><code class="language-solidity">function decimals() external view returns (uint8);
</code></pre>
<h3 id="calculatestktokenprice"><a class="header" href="#calculatestktokenprice">calculateStkTokenPrice</a></h3>
<pre><code class="language-solidity">function calculateStkTokenPrice(uint256 totalAssets) external view returns (uint256);
</code></pre>
<h3 id="lasttotalassets"><a class="header" href="#lasttotalassets">lastTotalAssets</a></h3>
<pre><code class="language-solidity">function lastTotalAssets() external view returns (uint256);
</code></pre>
<h3 id="ktoken"><a class="header" href="#ktoken">kToken</a></h3>
<pre><code class="language-solidity">function kToken() external view returns (address);
</code></pre>
<h3 id="getbatchid"><a class="header" href="#getbatchid">getBatchId</a></h3>
<pre><code class="language-solidity">function getBatchId() external view returns (bytes32);
</code></pre>
<h3 id="getsafebatchid"><a class="header" href="#getsafebatchid">getSafeBatchId</a></h3>
<pre><code class="language-solidity">function getSafeBatchId() external view returns (bytes32);
</code></pre>
<h3 id="getsafebatchreceiver"><a class="header" href="#getsafebatchreceiver">getSafeBatchReceiver</a></h3>
<pre><code class="language-solidity">function getSafeBatchReceiver(bytes32 batchId) external view returns (address);
</code></pre>
<h3 id="isbatchclosed"><a class="header" href="#isbatchclosed">isBatchClosed</a></h3>
<pre><code class="language-solidity">function isBatchClosed() external view returns (bool);
</code></pre>
<h3 id="isbatchsettled"><a class="header" href="#isbatchsettled">isBatchSettled</a></h3>
<pre><code class="language-solidity">function isBatchSettled() external view returns (bool);
</code></pre>
<h3 id="getbatchidinfo"><a class="header" href="#getbatchidinfo">getBatchIdInfo</a></h3>
<pre><code class="language-solidity">function getBatchIdInfo()
    external
    view
    returns (bytes32 batchId, address batchReceiver, bool isClosed, bool isSettled);
</code></pre>
<h3 id="getbatchreceiver"><a class="header" href="#getbatchreceiver">getBatchReceiver</a></h3>
<pre><code class="language-solidity">function getBatchReceiver(bytes32 batchId) external view returns (address);
</code></pre>
<h3 id="getbatchidreceiver"><a class="header" href="#getbatchidreceiver">getBatchIdReceiver</a></h3>
<pre><code class="language-solidity">function getBatchIdReceiver(bytes32 batchId) external view returns (address);
</code></pre>
<h3 id="shareprice"><a class="header" href="#shareprice">sharePrice</a></h3>
<pre><code class="language-solidity">function sharePrice() external view returns (uint256);
</code></pre>
<h3 id="contractname-1"><a class="header" href="#contractname-1">contractName</a></h3>
<pre><code class="language-solidity">function contractName() external pure returns (string memory);
</code></pre>
<h3 id="contractversion-1"><a class="header" href="#contractversion-1">contractVersion</a></h3>
<pre><code class="language-solidity">function contractVersion() external pure returns (string memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iktoken"><a class="header" href="#iktoken">IkToken</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/interfaces/IkToken.sol">Git Source</a></p>
<p>Interface for kToken with role-based minting and burning capabilities</p>
<p><em>Defines the standard interface for kToken implementations with ERC20 compatibility</em></p>
<h2 id="functions-13"><a class="header" href="#functions-13">Functions</a></h2>
<h3 id="mint-1"><a class="header" href="#mint-1">mint</a></h3>
<p>Creates new tokens and assigns them to the specified address</p>
<p><em>Only callable by addresses with MINTER_ROLE, emits Minted event</em></p>
<pre><code class="language-solidity">function mint(address to, uint256 amount) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>to</code></td><td><code>address</code></td><td>The address that will receive the newly minted tokens</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The quantity of tokens to create and assign</td></tr>
</tbody></table>
</div>
<h3 id="burn"><a class="header" href="#burn">burn</a></h3>
<p>Destroys tokens from the specified address</p>
<p><em>Only callable by addresses with MINTER_ROLE, emits Burned event</em></p>
<pre><code class="language-solidity">function burn(address from, uint256 amount) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>address</code></td><td>The address from which tokens will be destroyed</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The quantity of tokens to destroy</td></tr>
</tbody></table>
</div>
<h3 id="burnfrom"><a class="header" href="#burnfrom">burnFrom</a></h3>
<p>Destroys tokens from an address using allowance mechanism</p>
<p><em>Reduces allowance and burns tokens, only callable by addresses with MINTER_ROLE</em></p>
<pre><code class="language-solidity">function burnFrom(address from, uint256 amount) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>address</code></td><td>The address from which tokens will be destroyed</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The quantity of tokens to destroy</td></tr>
</tbody></table>
</div>
<h3 id="name-3"><a class="header" href="#name-3">name</a></h3>
<p>Returns the name of the token</p>
<pre><code class="language-solidity">function name() external view returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>The name of the token as a string</td></tr>
</tbody></table>
</div>
<h3 id="symbol-1"><a class="header" href="#symbol-1">symbol</a></h3>
<p>Returns the symbol of the token</p>
<pre><code class="language-solidity">function symbol() external view returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>The symbol of the token as a string</td></tr>
</tbody></table>
</div>
<h3 id="decimals-1"><a class="header" href="#decimals-1">decimals</a></h3>
<p>Returns the number of decimal places for the token</p>
<pre><code class="language-solidity">function decimals() external view returns (uint8);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td>The number of decimal places as uint8</td></tr>
</tbody></table>
</div>
<h3 id="totalsupply-1"><a class="header" href="#totalsupply-1">totalSupply</a></h3>
<p>Returns the total amount of tokens in existence</p>
<pre><code class="language-solidity">function totalSupply() external view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The total supply of tokens</td></tr>
</tbody></table>
</div>
<h3 id="balanceof"><a class="header" href="#balanceof">balanceOf</a></h3>
<p>Returns the token balance of a specific account</p>
<pre><code class="language-solidity">function balanceOf(address account) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account</code></td><td><code>address</code></td><td>The address to query the balance for</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The token balance of the specified account</td></tr>
</tbody></table>
</div>
<h3 id="transfer"><a class="header" href="#transfer">transfer</a></h3>
<p>Transfers tokens from the caller to another address</p>
<pre><code class="language-solidity">function transfer(address to, uint256 amount) external returns (bool success);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>to</code></td><td><code>address</code></td><td>The address to transfer tokens to</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The amount of tokens to transfer</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>success</code></td><td><code>bool</code></td><td>True if the transfer succeeded, false otherwise</td></tr>
</tbody></table>
</div>
<h3 id="allowance"><a class="header" href="#allowance">allowance</a></h3>
<p>Returns the amount of tokens that spender is allowed to spend on behalf of owner</p>
<pre><code class="language-solidity">function allowance(address owner, address spender) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The address that owns the tokens</td></tr>
<tr><td><code>spender</code></td><td><code>address</code></td><td>The address that is approved to spend the tokens</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The amount of tokens the spender is allowed to spend</td></tr>
</tbody></table>
</div>
<h3 id="approve"><a class="header" href="#approve">approve</a></h3>
<p>Sets approval for another address to spend tokens on behalf of the caller</p>
<pre><code class="language-solidity">function approve(address spender, uint256 amount) external returns (bool success);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>spender</code></td><td><code>address</code></td><td>The address that is approved to spend the tokens</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The amount of tokens the spender is approved to spend</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>success</code></td><td><code>bool</code></td><td>True if the approval succeeded, false otherwise</td></tr>
</tbody></table>
</div>
<h3 id="transferfrom"><a class="header" href="#transferfrom">transferFrom</a></h3>
<p>Transfers tokens from one address to another using allowance mechanism</p>
<pre><code class="language-solidity">function transferFrom(address from, address to, uint256 amount) external returns (bool success);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>address</code></td><td>The address to transfer tokens from</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>The address to transfer tokens to</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The amount of tokens to transfer</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>success</code></td><td><code>bool</code></td><td>True if the transfer succeeded, false otherwise</td></tr>
</tbody></table>
</div>
<h3 id="ispaused-2"><a class="header" href="#ispaused-2">isPaused</a></h3>
<p>Returns the current pause state of the contract</p>
<pre><code class="language-solidity">function isPaused() external view returns (bool);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>True if the contract is paused, false otherwise</td></tr>
</tbody></table>
</div>
<h3 id="setpaused-2"><a class="header" href="#setpaused-2">setPaused</a></h3>
<p>Sets the pause state of the contract</p>
<p><em>Only callable by addresses with EMERGENCY_ADMIN_ROLE</em></p>
<pre><code class="language-solidity">function setPaused(bool _isPaused) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_isPaused</code></td><td><code>bool</code></td><td>True to pause the contract, false to unpause</td></tr>
</tbody></table>
</div>
<h3 id="grantadminrole"><a class="header" href="#grantadminrole">grantAdminRole</a></h3>
<p>Grants administrative privileges to an address</p>
<p><em>Only callable by the contract owner</em></p>
<pre><code class="language-solidity">function grantAdminRole(address admin) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>admin</code></td><td><code>address</code></td><td>The address to grant admin role to</td></tr>
</tbody></table>
</div>
<h3 id="revokeadminrole"><a class="header" href="#revokeadminrole">revokeAdminRole</a></h3>
<p>Revokes administrative privileges from an address</p>
<p><em>Only callable by the contract owner</em></p>
<pre><code class="language-solidity">function revokeAdminRole(address admin) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>admin</code></td><td><code>address</code></td><td>The address to revoke admin role from</td></tr>
</tbody></table>
</div>
<h3 id="grantemergencyrole"><a class="header" href="#grantemergencyrole">grantEmergencyRole</a></h3>
<p>Grants emergency administrative privileges to an address</p>
<p><em>Only callable by addresses with ADMIN_ROLE</em></p>
<pre><code class="language-solidity">function grantEmergencyRole(address emergency) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>emergency</code></td><td><code>address</code></td><td>The address to grant emergency admin role to</td></tr>
</tbody></table>
</div>
<h3 id="revokeemergencyrole"><a class="header" href="#revokeemergencyrole">revokeEmergencyRole</a></h3>
<p>Revokes emergency administrative privileges from an address</p>
<p><em>Only callable by addresses with ADMIN_ROLE</em></p>
<pre><code class="language-solidity">function revokeEmergencyRole(address emergency) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>emergency</code></td><td><code>address</code></td><td>The address to revoke emergency admin role from</td></tr>
</tbody></table>
</div>
<h3 id="grantminterrole"><a class="header" href="#grantminterrole">grantMinterRole</a></h3>
<p>Grants minting privileges to an address</p>
<p><em>Only callable by addresses with ADMIN_ROLE</em></p>
<pre><code class="language-solidity">function grantMinterRole(address minter) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>minter</code></td><td><code>address</code></td><td>The address to grant minter role to</td></tr>
</tbody></table>
</div>
<h3 id="revokeminterrole"><a class="header" href="#revokeminterrole">revokeMinterRole</a></h3>
<p>Revokes minting privileges from an address</p>
<p><em>Only callable by addresses with ADMIN_ROLE</em></p>
<pre><code class="language-solidity">function revokeMinterRole(address minter) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>minter</code></td><td><code>address</code></td><td>The address to revoke minter role from</td></tr>
</tbody></table>
</div>
<h3 id="contractname-2"><a class="header" href="#contractname-2">contractName</a></h3>
<p>Returns the name identifier for this contract type</p>
<pre><code class="language-solidity">function contractName() external pure returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>The contract name as a string</td></tr>
</tbody></table>
</div>
<h3 id="contractversion-2"><a class="header" href="#contractversion-2">contractVersion</a></h3>
<p>Returns the version identifier for this contract</p>
<pre><code class="language-solidity">function contractVersion() external pure returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>The contract version as a string</td></tr>
</tbody></table>
</div>
<h2 id="events-6"><a class="header" href="#events-6">Events</a></h2>
<h3 id="minted-1"><a class="header" href="#minted-1">Minted</a></h3>
<pre><code class="language-solidity">event Minted(address indexed to, uint256 amount);
</code></pre>
<h3 id="burned"><a class="header" href="#burned">Burned</a></h3>
<pre><code class="language-solidity">event Burned(address indexed from, uint256 amount);
</code></pre>
<h3 id="upgradeauthorized"><a class="header" href="#upgradeauthorized">UpgradeAuthorized</a></h3>
<pre><code class="language-solidity">event UpgradeAuthorized(address indexed newImplementation, address indexed sender);
</code></pre>
<h3 id="tokeninitialized"><a class="header" href="#tokeninitialized">TokenInitialized</a></h3>
<pre><code class="language-solidity">event TokenInitialized(string name, string symbol, uint8 decimals);
</code></pre>
<h3 id="pausestate"><a class="header" href="#pausestate">PauseState</a></h3>
<pre><code class="language-solidity">event PauseState(bool isPaused);
</code></pre>
<h3 id="authorizedcallerupdated"><a class="header" href="#authorizedcallerupdated">AuthorizedCallerUpdated</a></h3>
<pre><code class="language-solidity">event AuthorizedCallerUpdated(address indexed caller, bool authorized);
</code></pre>
<h3 id="emergencywithdrawal"><a class="header" href="#emergencywithdrawal">EmergencyWithdrawal</a></h3>
<pre><code class="language-solidity">event EmergencyWithdrawal(address indexed token, address indexed to, uint256 amount, address indexed admin);
</code></pre>
<h2 id="errors-7"><a class="header" href="#errors-7">Errors</a></h2>
<h3 id="paused-1"><a class="header" href="#paused-1">Paused</a></h3>
<pre><code class="language-solidity">error Paused();
</code></pre>
<h3 id="zeroaddress-4"><a class="header" href="#zeroaddress-4">ZeroAddress</a></h3>
<pre><code class="language-solidity">error ZeroAddress();
</code></pre>
<h3 id="zeroamount-3"><a class="header" href="#zeroamount-3">ZeroAmount</a></h3>
<pre><code class="language-solidity">error ZeroAmount();
</code></pre>
<h3 id="contractnotpaused"><a class="header" href="#contractnotpaused">ContractNotPaused</a></h3>
<pre><code class="language-solidity">error ContractNotPaused();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-4"><a class="header" href="#contents-4">Contents</a></h1>
<ul>
<li><a href="src/kStakingVault//src/kStakingVault/base">base</a></li>
<li><a href="src/kStakingVault//src/kStakingVault/modules">modules</a></li>
<li><a href="src/kStakingVault//src/kStakingVault/types">types</a></li>
<li><a href="src/kStakingVault/kStakingVault.sol/contract.kStakingVault.html">kStakingVault</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-5"><a class="header" href="#contents-5">Contents</a></h1>
<ul>
<li><a href="src/kStakingVault/base/BaseVaultModule.sol/interface.IFeesModule.html">IFeesModule</a></li>
<li><a href="src/kStakingVault/base/BaseVaultModule.sol/abstract.BaseVaultModule.html">BaseVaultModule</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ifeesmodule"><a class="header" href="#ifeesmodule">IFeesModule</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/kStakingVault/base/BaseVaultModule.sol">Git Source</a></p>
<h2 id="functions-14"><a class="header" href="#functions-14">Functions</a></h2>
<h3 id="computelastbatchfees"><a class="header" href="#computelastbatchfees">computeLastBatchFees</a></h3>
<pre><code class="language-solidity">function computeLastBatchFees()
    external
    view
    returns (uint256 managementFees, uint256 performanceFees, uint256 totalFees);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basevaultmodule"><a class="header" href="#basevaultmodule">BaseVaultModule</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/kStakingVault/base/BaseVaultModule.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
OwnableRoles, ERC20, ReentrancyGuardTransient, <a href="src/kStakingVault/base/BaseVaultModule.sol//src/abstracts/Extsload.sol/abstract.Extsload.html">Extsload</a></p>
<p>Base contract for all modules</p>
<p><em>Provides shared storage, roles, and common functionality</em></p>
<h2 id="state-variables-4"><a class="header" href="#state-variables-4">State Variables</a></h2>
<h3 id="admin_role-2"><a class="header" href="#admin_role-2">ADMIN_ROLE</a></h3>
<pre><code class="language-solidity">uint256 public constant ADMIN_ROLE = _ROLE_0;
</code></pre>
<h3 id="emergency_admin_role-2"><a class="header" href="#emergency_admin_role-2">EMERGENCY_ADMIN_ROLE</a></h3>
<pre><code class="language-solidity">uint256 public constant EMERGENCY_ADMIN_ROLE = _ROLE_1;
</code></pre>
<h3 id="one_hundred_percent"><a class="header" href="#one_hundred_percent">ONE_HUNDRED_PERCENT</a></h3>
<pre><code class="language-solidity">uint256 public constant ONE_HUNDRED_PERCENT = 10_000;
</code></pre>
<h3 id="k_asset_router-2"><a class="header" href="#k_asset_router-2">K_ASSET_ROUTER</a></h3>
<pre><code class="language-solidity">bytes32 internal constant K_ASSET_ROUTER = keccak256("K_ASSET_ROUTER");
</code></pre>
<h3 id="k_minter-2"><a class="header" href="#k_minter-2">K_MINTER</a></h3>
<pre><code class="language-solidity">bytes32 internal constant K_MINTER = keccak256("K_MINTER");
</code></pre>
<h3 id="module_base_storage_location"><a class="header" href="#module_base_storage_location">MODULE_BASE_STORAGE_LOCATION</a></h3>
<pre><code class="language-solidity">bytes32 internal constant MODULE_BASE_STORAGE_LOCATION =
    0x50bc60b877273d55cac3903fd4818902e5fd7aa256278ee2dc6b212f256c0b00;
</code></pre>
<h2 id="functions-15"><a class="header" href="#functions-15">Functions</a></h2>
<h3 id="_getbasevaultmodulestorage"><a class="header" href="#_getbasevaultmodulestorage">_getBaseVaultModuleStorage</a></h3>
<p>Returns the base vault storage struct using ERC-7201 pattern</p>
<pre><code class="language-solidity">function _getBaseVaultModuleStorage() internal pure returns (BaseVaultModuleStorage storage $);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>$</code></td><td><code>BaseVaultModuleStorage</code></td><td>Storage reference for base vault state variables</td></tr>
</tbody></table>
</div>
<h3 id="__basevaultmodule_init"><a class="header" href="#__basevaultmodule_init">__BaseVaultModule_init</a></h3>
<p>Initializes the base contract with registry and pause state</p>
<p><em>Can only be called once during initialization</em></p>
<pre><code class="language-solidity">function __BaseVaultModule_init(
    address registry_,
    address owner_,
    address admin_,
    address feeReceiver_,
    bool paused_
)
    internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>registry_</code></td><td><code>address</code></td><td>Address of the kRegistry contract</td></tr>
<tr><td><code>owner_</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>admin_</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>feeReceiver_</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>paused_</code></td><td><code>bool</code></td><td>Initial pause state</td></tr>
</tbody></table>
</div>
<h3 id="registry-1"><a class="header" href="#registry-1">registry</a></h3>
<p>Returns the registry contract address</p>
<p><em>Reverts if contract not initialized</em></p>
<pre><code class="language-solidity">function registry() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>The kRegistry contract address</td></tr>
</tbody></table>
</div>
<h3 id="_registry-2"><a class="header" href="#_registry-2">_registry</a></h3>
<p>Returns the registry contract interface</p>
<p><em>Internal helper for typed registry access</em></p>
<pre><code class="language-solidity">function _registry() internal view returns (IkRegistry);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>IkRegistry</code></td><td>IkRegistry interface for registry interaction</td></tr>
</tbody></table>
</div>
<h3 id="_getkminter-1"><a class="header" href="#_getkminter-1">_getKMinter</a></h3>
<p>Gets the kMinter singleton contract address</p>
<p><em>Reverts if kMinter not set in registry</em></p>
<pre><code class="language-solidity">function _getKMinter() internal view returns (address minter);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>minter</code></td><td><code>address</code></td><td>The kMinter contract address</td></tr>
</tbody></table>
</div>
<h3 id="_getkassetrouter-2"><a class="header" href="#_getkassetrouter-2">_getKAssetRouter</a></h3>
<p>Gets the kAssetRouter singleton contract address</p>
<p><em>Reverts if kAssetRouter not set in registry</em></p>
<pre><code class="language-solidity">function _getKAssetRouter() internal view returns (address router);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>router</code></td><td><code>address</code></td><td>The kAssetRouter contract address</td></tr>
</tbody></table>
</div>
<h3 id="_getdnvaultbyasset-1"><a class="header" href="#_getdnvaultbyasset-1">_getDNVaultByAsset</a></h3>
<p>Gets the DN vault address for a given asset</p>
<p><em>Reverts if asset not supported</em></p>
<pre><code class="language-solidity">function _getDNVaultByAsset(address asset_) internal view returns (address vault);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset_</code></td><td><code>address</code></td><td>The asset address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The corresponding DN vault address</td></tr>
</tbody></table>
</div>
<h3 id="_getrelayer-2"><a class="header" href="#_getrelayer-2">_getRelayer</a></h3>
<p>Checks if an account has relayer role</p>
<pre><code class="language-solidity">function _getRelayer(address account) internal view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account</code></td><td><code>address</code></td><td>The account to check</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Whether the account has relayer role</td></tr>
</tbody></table>
</div>
<h3 id="asset-2"><a class="header" href="#asset-2">asset</a></h3>
<p>Returns the underlying asset address (for compatibility)</p>
<pre><code class="language-solidity">function asset() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Asset address</td></tr>
</tbody></table>
</div>
<h3 id="underlyingasset-1"><a class="header" href="#underlyingasset-1">underlyingAsset</a></h3>
<p>Returns the underlying asset address</p>
<pre><code class="language-solidity">function underlyingAsset() external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Asset address</td></tr>
</tbody></table>
</div>
<h3 id="name-4"><a class="header" href="#name-4">name</a></h3>
<p>Returns the vault shares token name</p>
<pre><code class="language-solidity">function name() public view override returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Token name</td></tr>
</tbody></table>
</div>
<h3 id="symbol-2"><a class="header" href="#symbol-2">symbol</a></h3>
<p>Returns the vault shares token symbol</p>
<pre><code class="language-solidity">function symbol() public view override returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Token symbol</td></tr>
</tbody></table>
</div>
<h3 id="decimals-2"><a class="header" href="#decimals-2">decimals</a></h3>
<p>Returns the vault shares token decimals</p>
<pre><code class="language-solidity">function decimals() public view override returns (uint8);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td>Token decimals</td></tr>
</tbody></table>
</div>
<h3 id="_setpaused-1"><a class="header" href="#_setpaused-1">_setPaused</a></h3>
<p>Sets the pause state of the contract</p>
<p><em>Only callable internally by inheriting contracts</em></p>
<pre><code class="language-solidity">function _setPaused(bool paused_) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>paused_</code></td><td><code>bool</code></td><td>New pause state</td></tr>
</tbody></table>
</div>
<h3 id="_calculatestktokenprice"><a class="header" href="#_calculatestktokenprice">_calculateStkTokenPrice</a></h3>
<p>Calculates stkToken price with safety checks</p>
<p><em>Standard price calculation used across settlement modules</em></p>
<pre><code class="language-solidity">function _calculateStkTokenPrice() internal view returns (uint256 price);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>price</code></td><td><code>uint256</code></td><td>Price per stkToken in underlying asset terms (18 decimals)</td></tr>
</tbody></table>
</div>
<h3 id="_converttoassets"><a class="header" href="#_converttoassets">_convertToAssets</a></h3>
<p>Converts shares to assets</p>
<pre><code class="language-solidity">function _convertToAssets(uint256 shares) internal view returns (uint256 assets);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shares</code></td><td><code>uint256</code></td><td>Amount of shares to convert</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>assets</code></td><td><code>uint256</code></td><td>Amount of assets</td></tr>
</tbody></table>
</div>
<h3 id="_converttoshares"><a class="header" href="#_converttoshares">_convertToShares</a></h3>
<p>Converts assets to shares</p>
<pre><code class="language-solidity">function _convertToShares(uint256 assets) internal view returns (uint256 shares);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>assets</code></td><td><code>uint256</code></td><td>Amount of assets to convert</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>shares</code></td><td><code>uint256</code></td><td>Amount of shares</td></tr>
</tbody></table>
</div>
<h3 id="_calculatestktokenstomint"><a class="header" href="#_calculatestktokenstomint">_calculateStkTokensToMint</a></h3>
<p>Calculates stkTokens to mint for given kToken amount</p>
<p><em>Used in staking settlement operations</em></p>
<pre><code class="language-solidity">function _calculateStkTokensToMint(uint256 kTokenAmount) internal view returns (uint256 stkTokens);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>kTokenAmount</code></td><td><code>uint256</code></td><td>Amount of kTokens being staked</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>stkTokens</code></td><td><code>uint256</code></td><td>Amount of stkTokens to mint</td></tr>
</tbody></table>
</div>
<h3 id="_calculateassetvalue"><a class="header" href="#_calculateassetvalue">_calculateAssetValue</a></h3>
<p>Calculates asset value for given stkToken amount</p>
<p><em>Used in unstaking settlement operations</em></p>
<pre><code class="language-solidity">function _calculateAssetValue(uint256 stkTokenAmount) internal view returns (uint256 assetValue);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>stkTokenAmount</code></td><td><code>uint256</code></td><td>Amount of stkTokens being unstaked</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>assetValue</code></td><td><code>uint256</code></td><td>Equivalent asset value</td></tr>
</tbody></table>
</div>
<h3 id="_shareprice"><a class="header" href="#_shareprice">_sharePrice</a></h3>
<p>Calculates share price for stkToken</p>
<pre><code class="language-solidity">function _sharePrice() internal view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>sharePrice Price per stkToken in underlying asset terms (18 decimals)</td></tr>
</tbody></table>
</div>
<h3 id="_totalassetsvirtual"><a class="header" href="#_totalassetsvirtual">_totalAssetsVirtual</a></h3>
<p>Returns the total assets in the vault</p>
<pre><code class="language-solidity">function _totalAssetsVirtual() internal view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>totalAssets Total assets in the vault</td></tr>
</tbody></table>
</div>
<h3 id="_totalnetassets"><a class="header" href="#_totalnetassets">_totalNetAssets</a></h3>
<p>Returns the total net assets in the vault</p>
<pre><code class="language-solidity">function _totalNetAssets() internal view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>totalNetAssets Total net assets in the vault</td></tr>
</tbody></table>
</div>
<h3 id="_accumulatedfees"><a class="header" href="#_accumulatedfees">_accumulatedFees</a></h3>
<p>Calculates accumulated fees</p>
<pre><code class="language-solidity">function _accumulatedFees() internal view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>accumulatedFees Accumulated fees</td></tr>
</tbody></table>
</div>
<h3 id="whennotpaused"><a class="header" href="#whennotpaused">whenNotPaused</a></h3>
<p>Modifier to restrict function execution when contract is paused</p>
<p><em>Reverts with Paused() if isPaused is true</em></p>
<pre><code class="language-solidity">modifier whenNotPaused() virtual;
</code></pre>
<h3 id="onlykassetrouter-2"><a class="header" href="#onlykassetrouter-2">onlyKAssetRouter</a></h3>
<p>Restricts function access to the kAssetRouter contract</p>
<pre><code class="language-solidity">modifier onlyKAssetRouter();
</code></pre>
<h3 id="onlyrelayer-3"><a class="header" href="#onlyrelayer-3">onlyRelayer</a></h3>
<p>Restricts function access to the relayer</p>
<p><em>Only callable internally by inheriting contracts</em></p>
<pre><code class="language-solidity">modifier onlyRelayer();
</code></pre>
<h2 id="events-7"><a class="header" href="#events-7">Events</a></h2>
<h3 id="stakerequestcreated"><a class="header" href="#stakerequestcreated">StakeRequestCreated</a></h3>
<pre><code class="language-solidity">event StakeRequestCreated(
    bytes32 indexed requestId,
    address indexed user,
    address indexed kToken,
    uint256 amount,
    address recipient,
    bytes32 batchId
);
</code></pre>
<h3 id="stakerequestredeemed"><a class="header" href="#stakerequestredeemed">StakeRequestRedeemed</a></h3>
<pre><code class="language-solidity">event StakeRequestRedeemed(bytes32 indexed requestId);
</code></pre>
<h3 id="stakerequestcancelled"><a class="header" href="#stakerequestcancelled">StakeRequestCancelled</a></h3>
<pre><code class="language-solidity">event StakeRequestCancelled(bytes32 indexed requestId);
</code></pre>
<h3 id="unstakerequestcreated"><a class="header" href="#unstakerequestcreated">UnstakeRequestCreated</a></h3>
<pre><code class="language-solidity">event UnstakeRequestCreated(
    bytes32 indexed requestId, address indexed user, uint256 amount, address recipient, bytes32 batchId
);
</code></pre>
<h3 id="unstakerequestcancelled"><a class="header" href="#unstakerequestcancelled">UnstakeRequestCancelled</a></h3>
<pre><code class="language-solidity">event UnstakeRequestCancelled(bytes32 indexed requestId);
</code></pre>
<h3 id="paused-2"><a class="header" href="#paused-2">Paused</a></h3>
<pre><code class="language-solidity">event Paused(bool paused);
</code></pre>
<h3 id="initialized-2"><a class="header" href="#initialized-2">Initialized</a></h3>
<pre><code class="language-solidity">event Initialized(address registry, address owner, address admin);
</code></pre>
<h3 id="totalassetsupdated-1"><a class="header" href="#totalassetsupdated-1">TotalAssetsUpdated</a></h3>
<pre><code class="language-solidity">event TotalAssetsUpdated(uint256 oldTotalAssets, uint256 newTotalAssets);
</code></pre>
<h2 id="errors-8"><a class="header" href="#errors-8">Errors</a></h2>
<h3 id="zeroaddress-5"><a class="header" href="#zeroaddress-5">ZeroAddress</a></h3>
<pre><code class="language-solidity">error ZeroAddress();
</code></pre>
<h3 id="invalidregistry-2"><a class="header" href="#invalidregistry-2">InvalidRegistry</a></h3>
<pre><code class="language-solidity">error InvalidRegistry();
</code></pre>
<h3 id="notinitialized-1"><a class="header" href="#notinitialized-1">NotInitialized</a></h3>
<pre><code class="language-solidity">error NotInitialized();
</code></pre>
<h3 id="contractnotfound-2"><a class="header" href="#contractnotfound-2">ContractNotFound</a></h3>
<pre><code class="language-solidity">error ContractNotFound(bytes32 identifier);
</code></pre>
<h3 id="onlykassetrouter-3"><a class="header" href="#onlykassetrouter-3">OnlyKAssetRouter</a></h3>
<pre><code class="language-solidity">error OnlyKAssetRouter();
</code></pre>
<h3 id="onlyrelayer-4"><a class="header" href="#onlyrelayer-4">OnlyRelayer</a></h3>
<pre><code class="language-solidity">error OnlyRelayer();
</code></pre>
<h3 id="zeroamount-4"><a class="header" href="#zeroamount-4">ZeroAmount</a></h3>
<pre><code class="language-solidity">error ZeroAmount();
</code></pre>
<h3 id="amountbelowdustthreshold"><a class="header" href="#amountbelowdustthreshold">AmountBelowDustThreshold</a></h3>
<pre><code class="language-solidity">error AmountBelowDustThreshold();
</code></pre>
<h3 id="contractpaused-2"><a class="header" href="#contractpaused-2">ContractPaused</a></h3>
<pre><code class="language-solidity">error ContractPaused();
</code></pre>
<h3 id="closed"><a class="header" href="#closed">Closed</a></h3>
<pre><code class="language-solidity">error Closed();
</code></pre>
<h3 id="settled"><a class="header" href="#settled">Settled</a></h3>
<pre><code class="language-solidity">error Settled();
</code></pre>
<h3 id="requestnotfound-1"><a class="header" href="#requestnotfound-1">RequestNotFound</a></h3>
<pre><code class="language-solidity">error RequestNotFound();
</code></pre>
<h3 id="requestnoteligible-1"><a class="header" href="#requestnoteligible-1">RequestNotEligible</a></h3>
<pre><code class="language-solidity">error RequestNotEligible();
</code></pre>
<h3 id="invalidvault-1"><a class="header" href="#invalidvault-1">InvalidVault</a></h3>
<pre><code class="language-solidity">error InvalidVault();
</code></pre>
<h2 id="structs-6"><a class="header" href="#structs-6">Structs</a></h2>
<h3 id="basevaultmodulestorage"><a class="header" href="#basevaultmodulestorage">BaseVaultModuleStorage</a></h3>
<p><strong>Note:</strong>
storage-location: erc7201.kam.storage.BaseVaultModule</p>
<pre><code class="language-solidity">struct BaseVaultModuleStorage {
    uint256 currentBatch;
    bytes32 currentBatchId;
    uint256 sharePriceWatermark;
    uint256 requestCounter;
    address registry;
    address receiverImplementation;
    address underlyingAsset;
    address kToken;
    address feeReceiver;
    uint96 dustAmount;
    uint8 decimals;
    uint16 hurdleRate;
    uint16 performanceFee;
    uint16 managementFee;
    bool initialized;
    bool paused;
    bool isHardHurdleRate;
    uint64 lastFeesChargedManagement;
    uint64 lastFeesChargedPerformance;
    string name;
    string symbol;
    mapping(bytes32 =&gt; BaseVaultModuleTypes.BatchInfo) batches;
    mapping(bytes32 =&gt; BaseVaultModuleTypes.StakeRequest) stakeRequests;
    mapping(bytes32 =&gt; BaseVaultModuleTypes.UnstakeRequest) unstakeRequests;
    mapping(address =&gt; EnumerableSetLib.Bytes32Set) userRequests;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-6"><a class="header" href="#contents-6">Contents</a></h1>
<ul>
<li><a href="src/kStakingVault/modules/BatchModule.sol/contract.BatchModule.html">BatchModule</a></li>
<li><a href="src/kStakingVault/modules/ClaimModule.sol/contract.ClaimModule.html">ClaimModule</a></li>
<li><a href="src/kStakingVault/modules/FeesModule.sol/contract.FeesModule.html">FeesModule</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="batchmodule"><a class="header" href="#batchmodule">BatchModule</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/kStakingVault/modules/BatchModule.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/kStakingVault/modules/BatchModule.sol//src/kStakingVault/base/BaseVaultModule.sol/abstract.BaseVaultModule.html">BaseVaultModule</a></p>
<p>Handles batch operations for staking and unstaking</p>
<p><em>Contains batch functions for staking and unstaking operations</em></p>
<h2 id="functions-16"><a class="header" href="#functions-16">Functions</a></h2>
<h3 id="createnewbatch"><a class="header" href="#createnewbatch">createNewBatch</a></h3>
<p>Creates a new batch for processing requests</p>
<p><em>Only callable by RELAYER_ROLE, typically called at batch intervals</em></p>
<pre><code class="language-solidity">function createNewBatch() external onlyRelayer returns (bytes32);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>The new batch ID</td></tr>
</tbody></table>
</div>
<h3 id="closebatch-1"><a class="header" href="#closebatch-1">closeBatch</a></h3>
<p><em>Only callable by RELAYER_ROLE, typically called at cutoff time</em></p>
<pre><code class="language-solidity">function closeBatch(bytes32 _batchId, bool _create) external onlyRelayer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_batchId</code></td><td><code>bytes32</code></td><td>The batch ID to close</td></tr>
<tr><td><code>_create</code></td><td><code>bool</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="settlebatch-1"><a class="header" href="#settlebatch-1">settleBatch</a></h3>
<p>Marks a batch as settled</p>
<p><em>Only callable by kMinter, indicates assets have been distributed</em></p>
<pre><code class="language-solidity">function settleBatch(bytes32 _batchId) external onlyKAssetRouter;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_batchId</code></td><td><code>bytes32</code></td><td>The batch ID to settle</td></tr>
</tbody></table>
</div>
<h3 id="createbatchreceiver-1"><a class="header" href="#createbatchreceiver-1">createBatchReceiver</a></h3>
<p>Deploys BatchReceiver for specific batch</p>
<p><em>Only callable by kAssetRouter</em></p>
<pre><code class="language-solidity">function createBatchReceiver(bytes32 _batchId) external onlyKAssetRouter returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_batchId</code></td><td><code>bytes32</code></td><td>Batch ID to deploy receiver for</td></tr>
</tbody></table>
</div>
<h3 id="_newbatch"><a class="header" href="#_newbatch">_newBatch</a></h3>
<pre><code class="language-solidity">function _newBatch() internal returns (bytes32);
</code></pre>
<h3 id="selectors"><a class="header" href="#selectors">selectors</a></h3>
<p>Returns the selectors for functions in this module</p>
<pre><code class="language-solidity">function selectors() external pure returns (bytes4[] memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes4[]</code></td><td>selectors Array of function selectors</td></tr>
</tbody></table>
</div>
<h2 id="events-8"><a class="header" href="#events-8">Events</a></h2>
<h3 id="batchcreated"><a class="header" href="#batchcreated">BatchCreated</a></h3>
<pre><code class="language-solidity">event BatchCreated(bytes32 indexed batchId);
</code></pre>
<h3 id="batchreceiverdeployed"><a class="header" href="#batchreceiverdeployed">BatchReceiverDeployed</a></h3>
<pre><code class="language-solidity">event BatchReceiverDeployed(bytes32 indexed batchId, address indexed receiver);
</code></pre>
<h3 id="batchsettled-2"><a class="header" href="#batchsettled-2">BatchSettled</a></h3>
<pre><code class="language-solidity">event BatchSettled(bytes32 indexed batchId);
</code></pre>
<h3 id="batchclosed-1"><a class="header" href="#batchclosed-1">BatchClosed</a></h3>
<pre><code class="language-solidity">event BatchClosed(bytes32 indexed batchId);
</code></pre>
<h3 id="batchreceiverset"><a class="header" href="#batchreceiverset">BatchReceiverSet</a></h3>
<pre><code class="language-solidity">event BatchReceiverSet(address indexed batchReceiver, bytes32 indexed batchId);
</code></pre>
<h3 id="batchreceivercreated"><a class="header" href="#batchreceivercreated">BatchReceiverCreated</a></h3>
<pre><code class="language-solidity">event BatchReceiverCreated(address indexed receiver, bytes32 indexed batchId);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="claimmodule"><a class="header" href="#claimmodule">ClaimModule</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/kStakingVault/modules/ClaimModule.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/kStakingVault/modules/ClaimModule.sol//src/kStakingVault/base/BaseVaultModule.sol/abstract.BaseVaultModule.html">BaseVaultModule</a></p>
<p>Handles claim operations for settled batches</p>
<p><em>Contains claim functions for staking and unstaking operations</em></p>
<h2 id="functions-17"><a class="header" href="#functions-17">Functions</a></h2>
<h3 id="claimstakedshares-1"><a class="header" href="#claimstakedshares-1">claimStakedShares</a></h3>
<p>Claims stkTokens from a settled staking batch</p>
<pre><code class="language-solidity">function claimStakedShares(bytes32 batchId, bytes32 requestId) external payable nonReentrant whenNotPaused;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>Batch ID to claim from</td></tr>
<tr><td><code>requestId</code></td><td><code>bytes32</code></td><td>Request ID to claim</td></tr>
</tbody></table>
</div>
<h3 id="claimunstakedassets-1"><a class="header" href="#claimunstakedassets-1">claimUnstakedAssets</a></h3>
<p>Claims kTokens from a settled unstaking batch (simplified implementation)</p>
<pre><code class="language-solidity">function claimUnstakedAssets(bytes32 batchId, bytes32 requestId) external payable nonReentrant whenNotPaused;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>Batch ID to claim from</td></tr>
<tr><td><code>requestId</code></td><td><code>bytes32</code></td><td>Request ID to claim</td></tr>
</tbody></table>
</div>
<h3 id="selectors-1"><a class="header" href="#selectors-1">selectors</a></h3>
<p>Returns the selectors for functions in this module</p>
<pre><code class="language-solidity">function selectors() external pure returns (bytes4[] memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes4[]</code></td><td>selectors Array of function selectors</td></tr>
</tbody></table>
</div>
<h2 id="events-9"><a class="header" href="#events-9">Events</a></h2>
<h3 id="stakingsharesclaimed"><a class="header" href="#stakingsharesclaimed">StakingSharesClaimed</a></h3>
<p>ERC20 Transfer event for stkToken operations</p>
<pre><code class="language-solidity">event StakingSharesClaimed(bytes32 indexed batchId, bytes32 requestId, address indexed user, uint256 shares);
</code></pre>
<h3 id="unstakingassetsclaimed"><a class="header" href="#unstakingassetsclaimed">UnstakingAssetsClaimed</a></h3>
<pre><code class="language-solidity">event UnstakingAssetsClaimed(bytes32 indexed batchId, bytes32 requestId, address indexed user, uint256 assets);
</code></pre>
<h3 id="stktokensissued"><a class="header" href="#stktokensissued">StkTokensIssued</a></h3>
<pre><code class="language-solidity">event StkTokensIssued(address indexed user, uint256 stkTokenAmount);
</code></pre>
<h3 id="ktokenunstaked"><a class="header" href="#ktokenunstaked">KTokenUnstaked</a></h3>
<pre><code class="language-solidity">event KTokenUnstaked(address indexed user, uint256 shares, uint256 kTokenAmount);
</code></pre>
<h2 id="errors-9"><a class="header" href="#errors-9">Errors</a></h2>
<h3 id="batchnotsettled-1"><a class="header" href="#batchnotsettled-1">BatchNotSettled</a></h3>
<pre><code class="language-solidity">error BatchNotSettled();
</code></pre>
<h3 id="invalidbatchid-1"><a class="header" href="#invalidbatchid-1">InvalidBatchId</a></h3>
<pre><code class="language-solidity">error InvalidBatchId();
</code></pre>
<h3 id="requestnotpending"><a class="header" href="#requestnotpending">RequestNotPending</a></h3>
<pre><code class="language-solidity">error RequestNotPending();
</code></pre>
<h3 id="notbeneficiary"><a class="header" href="#notbeneficiary">NotBeneficiary</a></h3>
<pre><code class="language-solidity">error NotBeneficiary();
</code></pre>
<h3 id="minimumoutputnotmet"><a class="header" href="#minimumoutputnotmet">MinimumOutputNotMet</a></h3>
<pre><code class="language-solidity">error MinimumOutputNotMet();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="feesmodule"><a class="header" href="#feesmodule">FeesModule</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/kStakingVault/modules/FeesModule.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/kStakingVault/modules/FeesModule.sol//src/kStakingVault/base/BaseVaultModule.sol/abstract.BaseVaultModule.html">BaseVaultModule</a></p>
<p>Handles batch operations for staking and unstaking</p>
<p><em>Contains batch functions for staking and unstaking operations</em></p>
<h2 id="state-variables-5"><a class="header" href="#state-variables-5">State Variables</a></h2>
<h3 id="management_fee_interval"><a class="header" href="#management_fee_interval">MANAGEMENT_FEE_INTERVAL</a></h3>
<p>Interval for management fee (1 month)</p>
<pre><code class="language-solidity">uint256 constant MANAGEMENT_FEE_INTERVAL = 657_436;
</code></pre>
<h3 id="performance_fee_interval"><a class="header" href="#performance_fee_interval">PERFORMANCE_FEE_INTERVAL</a></h3>
<p>Interval for performance fee (3 months)</p>
<pre><code class="language-solidity">uint256 constant PERFORMANCE_FEE_INTERVAL = 7_889_238;
</code></pre>
<h3 id="max_bps"><a class="header" href="#max_bps">MAX_BPS</a></h3>
<p>Maximum basis points</p>
<pre><code class="language-solidity">uint256 constant MAX_BPS = 10_000;
</code></pre>
<h3 id="secs_per_year"><a class="header" href="#secs_per_year">SECS_PER_YEAR</a></h3>
<p>Number of seconds in a year</p>
<pre><code class="language-solidity">uint256 constant SECS_PER_YEAR = 31_556_952;
</code></pre>
<h2 id="functions-18"><a class="header" href="#functions-18">Functions</a></h2>
<h3 id="sethurdlerate"><a class="header" href="#sethurdlerate">setHurdleRate</a></h3>
<p>Sets the yearly hurdle rate for the underlying asset</p>
<p><em>Fee is a basis point (1% = 100)</em></p>
<pre><code class="language-solidity">function setHurdleRate(uint16 _hurdleRate) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_hurdleRate</code></td><td><code>uint16</code></td><td>The new yearly hurdle rate</td></tr>
</tbody></table>
</div>
<h3 id="sethardhurdlerate"><a class="header" href="#sethardhurdlerate">setHardHurdleRate</a></h3>
<p>Sets the hard hurdle rate</p>
<p><em>If true, performance fees will only be charged to the excess return</em></p>
<pre><code class="language-solidity">function setHardHurdleRate(bool _isHard) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_isHard</code></td><td><code>bool</code></td><td>Whether the hard hurdle rate is enabled</td></tr>
</tbody></table>
</div>
<h3 id="setmanagementfee"><a class="header" href="#setmanagementfee">setManagementFee</a></h3>
<p>Sets the management fee</p>
<p><em>Fee is a basis point (1% = 100)</em></p>
<pre><code class="language-solidity">function setManagementFee(uint16 _managementFee) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_managementFee</code></td><td><code>uint16</code></td><td>The new management fee</td></tr>
</tbody></table>
</div>
<h3 id="setperformancefee"><a class="header" href="#setperformancefee">setPerformanceFee</a></h3>
<p>Sets the performance fee</p>
<p><em>Fee is a basis point (1% = 100)</em></p>
<pre><code class="language-solidity">function setPerformanceFee(uint16 _performanceFee) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_performanceFee</code></td><td><code>uint16</code></td><td>The new performance fee</td></tr>
</tbody></table>
</div>
<h3 id="notifymanagementfeescharged"><a class="header" href="#notifymanagementfeescharged">notifyManagementFeesCharged</a></h3>
<p>Notifies the module that management fees have been charged from backend</p>
<p><em>Should only be called by the vault</em></p>
<pre><code class="language-solidity">function notifyManagementFeesCharged(uint64 _timestamp) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_timestamp</code></td><td><code>uint64</code></td><td>The timestamp of the fee charge</td></tr>
</tbody></table>
</div>
<h3 id="notifyperformancefeescharged"><a class="header" href="#notifyperformancefeescharged">notifyPerformanceFeesCharged</a></h3>
<p>Notifies the module that performance fees have been charged from backend</p>
<p><em>Should only be called by the vault</em></p>
<pre><code class="language-solidity">function notifyPerformanceFeesCharged(uint64 _timestamp) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_timestamp</code></td><td><code>uint64</code></td><td>The timestamp of the fee charge</td></tr>
</tbody></table>
</div>
<h3 id="computelastbatchfees-1"><a class="header" href="#computelastbatchfees-1">computeLastBatchFees</a></h3>
<p>Computes the last fee batch</p>
<pre><code class="language-solidity">function computeLastBatchFees()
    public
    view
    returns (uint256 managementFees, uint256 performanceFees, uint256 totalFees);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>managementFees</code></td><td><code>uint256</code></td><td>The management fees for the last batch</td></tr>
<tr><td><code>performanceFees</code></td><td><code>uint256</code></td><td>The performance fees for the last batch</td></tr>
<tr><td><code>totalFees</code></td><td><code>uint256</code></td><td>The total fees for the last batch</td></tr>
</tbody></table>
</div>
<h3 id="_updateglobalwatermark"><a class="header" href="#_updateglobalwatermark">_updateGlobalWatermark</a></h3>
<p>Updates the share price watermark</p>
<p><em>Updates the high water mark if the current share price exceeds the previous mark</em></p>
<pre><code class="language-solidity">function _updateGlobalWatermark() private;
</code></pre>
<h3 id="lastfeeschargedmanagement"><a class="header" href="#lastfeeschargedmanagement">lastFeesChargedManagement</a></h3>
<p>Returns the last time management fees were charged</p>
<pre><code class="language-solidity">function lastFeesChargedManagement() public view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>lastFeesChargedManagement Timestamp of last management fee charge</td></tr>
</tbody></table>
</div>
<h3 id="lastfeeschargedperformance"><a class="header" href="#lastfeeschargedperformance">lastFeesChargedPerformance</a></h3>
<p>Returns the last time performance fees were charged</p>
<pre><code class="language-solidity">function lastFeesChargedPerformance() public view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>lastFeesChargedPerformance Timestamp of last performance fee charge</td></tr>
</tbody></table>
</div>
<h3 id="hurdlerate"><a class="header" href="#hurdlerate">hurdleRate</a></h3>
<p>Returns the current hurdle rate used for performance fee calculations</p>
<pre><code class="language-solidity">function hurdleRate() public view returns (uint16);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint16</code></td><td>The hurdle rate in basis points (e.g., 500 = 5%)</td></tr>
</tbody></table>
</div>
<h3 id="performancefee"><a class="header" href="#performancefee">performanceFee</a></h3>
<p>Returns the current performance fee percentage</p>
<pre><code class="language-solidity">function performanceFee() public view returns (uint16);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint16</code></td><td>The performance fee in basis points (e.g., 2000 = 20%)</td></tr>
</tbody></table>
</div>
<h3 id="nextperformancefeetimestamp"><a class="header" href="#nextperformancefeetimestamp">nextPerformanceFeeTimestamp</a></h3>
<p>Returns the next performance fee timestamp so the backend can schedule the fee collection</p>
<pre><code class="language-solidity">function nextPerformanceFeeTimestamp() public view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The next performance fee timestamp</td></tr>
</tbody></table>
</div>
<h3 id="nextmanagementfeetimestamp"><a class="header" href="#nextmanagementfeetimestamp">nextManagementFeeTimestamp</a></h3>
<p>Returns the next management fee timestamp so the backend can schedule the fee collection</p>
<pre><code class="language-solidity">function nextManagementFeeTimestamp() public view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The next management fee timestamp</td></tr>
</tbody></table>
</div>
<h3 id="managementfee"><a class="header" href="#managementfee">managementFee</a></h3>
<p>Returns the current management fee percentage</p>
<pre><code class="language-solidity">function managementFee() public view returns (uint16);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint16</code></td><td>The management fee in basis points (e.g., 100 = 1%)</td></tr>
</tbody></table>
</div>
<h3 id="feereceiver"><a class="header" href="#feereceiver">feeReceiver</a></h3>
<p>Returns the address that receives collected fees</p>
<pre><code class="language-solidity">function feeReceiver() public view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>The fee receiver address</td></tr>
</tbody></table>
</div>
<h3 id="sharepricewatermark"><a class="header" href="#sharepricewatermark">sharePriceWatermark</a></h3>
<p>Returns the high watermark for share price used in performance fee calculations</p>
<pre><code class="language-solidity">function sharePriceWatermark() public view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The share price watermark value</td></tr>
</tbody></table>
</div>
<h3 id="selectors-2"><a class="header" href="#selectors-2">selectors</a></h3>
<p>Returns the selectors for functions in this module</p>
<pre><code class="language-solidity">function selectors() external pure returns (bytes4[] memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes4[]</code></td><td>selectors Array of function selectors</td></tr>
</tbody></table>
</div>
<h2 id="events-10"><a class="header" href="#events-10">Events</a></h2>
<h3 id="managementfeeupdated"><a class="header" href="#managementfeeupdated">ManagementFeeUpdated</a></h3>
<p>Emitted when the management fee is updated</p>
<pre><code class="language-solidity">event ManagementFeeUpdated(uint16 oldFee, uint16 newFee);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>oldFee</code></td><td><code>uint16</code></td><td>Previous management fee in basis points</td></tr>
<tr><td><code>newFee</code></td><td><code>uint16</code></td><td>New management fee in basis points</td></tr>
</tbody></table>
</div>
<h3 id="performancefeeupdated"><a class="header" href="#performancefeeupdated">PerformanceFeeUpdated</a></h3>
<p>Emitted when the performance fee is updated</p>
<pre><code class="language-solidity">event PerformanceFeeUpdated(uint16 oldFee, uint16 newFee);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>oldFee</code></td><td><code>uint16</code></td><td>Previous performance fee in basis points</td></tr>
<tr><td><code>newFee</code></td><td><code>uint16</code></td><td>New performance fee in basis points</td></tr>
</tbody></table>
</div>
<h3 id="feesassesed"><a class="header" href="#feesassesed">FeesAssesed</a></h3>
<p>Emitted when fees are charged to the vault</p>
<pre><code class="language-solidity">event FeesAssesed(uint256 managementFees, uint256 performanceFees);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>managementFees</code></td><td><code>uint256</code></td><td>Amount of management fees collected</td></tr>
<tr><td><code>performanceFees</code></td><td><code>uint256</code></td><td>Amount of performance fees collected</td></tr>
</tbody></table>
</div>
<h3 id="hurdlerateupdated"><a class="header" href="#hurdlerateupdated">HurdleRateUpdated</a></h3>
<p>Emitted when the hurdle rate is updated</p>
<pre><code class="language-solidity">event HurdleRateUpdated(uint16 newRate);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newRate</code></td><td><code>uint16</code></td><td>New hurdle rate in basis points</td></tr>
</tbody></table>
</div>
<h3 id="hardhurdlerateupdated"><a class="header" href="#hardhurdlerateupdated">HardHurdleRateUpdated</a></h3>
<p>Emitted when the hard hurdle rate is updated</p>
<pre><code class="language-solidity">event HardHurdleRateUpdated(bool newRate);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newRate</code></td><td><code>bool</code></td><td>New hard hurdle rate in basis points</td></tr>
</tbody></table>
</div>
<h3 id="managementfeescharged"><a class="header" href="#managementfeescharged">ManagementFeesCharged</a></h3>
<p>Emitted when management fees are charged</p>
<pre><code class="language-solidity">event ManagementFeesCharged(uint256 timestamp);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>timestamp</code></td><td><code>uint256</code></td><td>Timestamp of the fee charge</td></tr>
</tbody></table>
</div>
<h3 id="performancefeescharged"><a class="header" href="#performancefeescharged">PerformanceFeesCharged</a></h3>
<p>Emitted when performance fees are charged</p>
<pre><code class="language-solidity">event PerformanceFeesCharged(uint256 timestamp);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>timestamp</code></td><td><code>uint256</code></td><td>Timestamp of the fee charge</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="contents-7"><a class="header" href="#contents-7">Contents</a></h1>
<ul>
<li><a href="src/kStakingVault/types/BaseVaultModuleTypes.sol/library.BaseVaultModuleTypes.html">BaseVaultModuleTypes</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basevaultmoduletypes"><a class="header" href="#basevaultmoduletypes">BaseVaultModuleTypes</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/kStakingVault/types/BaseVaultModuleTypes.sol">Git Source</a></p>
<p>Library containing all data structures used in the ModuleBase</p>
<p><em>Defines standardized data types for cross-contract communication and storage</em></p>
<h2 id="structs-7"><a class="header" href="#structs-7">Structs</a></h2>
<h3 id="stakerequest"><a class="header" href="#stakerequest">StakeRequest</a></h3>
<pre><code class="language-solidity">struct StakeRequest {
    address user;
    uint128 kTokenAmount;
    address recipient;
    bytes32 batchId;
    uint64 requestTimestamp;
    RequestStatus status;
}
</code></pre>
<h3 id="unstakerequest"><a class="header" href="#unstakerequest">UnstakeRequest</a></h3>
<pre><code class="language-solidity">struct UnstakeRequest {
    address user;
    uint128 stkTokenAmount;
    address recipient;
    bytes32 batchId;
    uint64 requestTimestamp;
    RequestStatus status;
}
</code></pre>
<h3 id="batchinfo"><a class="header" href="#batchinfo">BatchInfo</a></h3>
<pre><code class="language-solidity">struct BatchInfo {
    bytes32 batchId;
    address batchReceiver;
    bool isClosed;
    bool isSettled;
}
</code></pre>
<h2 id="enums-2"><a class="header" href="#enums-2">Enums</a></h2>
<h3 id="requeststatus-1"><a class="header" href="#requeststatus-1">RequestStatus</a></h3>
<pre><code class="language-solidity">enum RequestStatus {
    PENDING,
    CLAIMED,
    CANCELLED
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="kstakingvault"><a class="header" href="#kstakingvault">kStakingVault</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/kStakingVault/kStakingVault.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
Initializable, UUPSUpgradeable, <a href="src/kStakingVault/kStakingVault.sol//src/kStakingVault/base/BaseVaultModule.sol/abstract.BaseVaultModule.html">BaseVaultModule</a>, <a href="src/kStakingVault/kStakingVault.sol//src/base/MultiFacetProxy.sol/contract.MultiFacetProxy.html">MultiFacetProxy</a></p>
<p>Pure ERC20 vault with dual accounting for minter and user pools</p>
<p><em>Implements automatic yield distribution from minter to user pools with modular architecture</em></p>
<h2 id="functions-19"><a class="header" href="#functions-19">Functions</a></h2>
<h3 id="constructor-1"><a class="header" href="#constructor-1">constructor</a></h3>
<p>Disables initializers to prevent implementation contract initialization</p>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="initialize-1"><a class="header" href="#initialize-1">initialize</a></h3>
<p>Initializes the kStakingVault contract (stack optimized)</p>
<p><em>Phase 1: Core initialization without strings to avoid stack too deep</em></p>
<pre><code class="language-solidity">function initialize(
    address registry_,
    address owner_,
    address admin_,
    bool paused_,
    string memory name_,
    string memory symbol_,
    uint8 decimals_,
    uint128 dustAmount_,
    address emergencyAdmin_,
    address asset_,
    address feeCollector_
)
    external
    initializer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>registry_</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Owner address</td></tr>
<tr><td><code>admin_</code></td><td><code>address</code></td><td>Admin address</td></tr>
<tr><td><code>paused_</code></td><td><code>bool</code></td><td>Initial pause state</td></tr>
<tr><td><code>name_</code></td><td><code>string</code></td><td>Token name</td></tr>
<tr><td><code>symbol_</code></td><td><code>string</code></td><td>Token symbol</td></tr>
<tr><td><code>decimals_</code></td><td><code>uint8</code></td><td>Token decimals</td></tr>
<tr><td><code>dustAmount_</code></td><td><code>uint128</code></td><td>Minimum amount threshold</td></tr>
<tr><td><code>emergencyAdmin_</code></td><td><code>address</code></td><td>Emergency admin address</td></tr>
<tr><td><code>asset_</code></td><td><code>address</code></td><td>Underlying asset address</td></tr>
<tr><td><code>feeCollector_</code></td><td><code>address</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="requeststake-1"><a class="header" href="#requeststake-1">requestStake</a></h3>
<p>Request to stake kTokens for stkTokens (rebase token)</p>
<pre><code class="language-solidity">function requestStake(
    address to,
    uint256 amount
)
    external
    payable
    nonReentrant
    whenNotPaused
    returns (bytes32 requestId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>to</code></td><td><code>address</code></td><td>Address to receive the stkTokens</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount of kTokens to stake</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>bytes32</code></td><td>Request ID for this staking request</td></tr>
</tbody></table>
</div>
<h3 id="requestunstake-1"><a class="header" href="#requestunstake-1">requestUnstake</a></h3>
<p>Request to unstake stkTokens for kTokens + yield</p>
<p><em>Works with both claimed and unclaimed stkTokens (can unstake immediately after settlement)</em></p>
<pre><code class="language-solidity">function requestUnstake(
    address to,
    uint256 stkTokenAmount
)
    external
    payable
    nonReentrant
    whenNotPaused
    returns (bytes32 requestId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>to</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>stkTokenAmount</code></td><td><code>uint256</code></td><td>Amount of stkTokens to unstake</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>bytes32</code></td><td>Request ID for this unstaking request</td></tr>
</tbody></table>
</div>
<h3 id="cancelstakerequest"><a class="header" href="#cancelstakerequest">cancelStakeRequest</a></h3>
<p>Cancels a staking request</p>
<pre><code class="language-solidity">function cancelStakeRequest(bytes32 requestId) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>bytes32</code></td><td>Request ID to cancel</td></tr>
</tbody></table>
</div>
<h3 id="cancelunstakerequest"><a class="header" href="#cancelunstakerequest">cancelUnstakeRequest</a></h3>
<p>Cancels an unstaking request</p>
<pre><code class="language-solidity">function cancelUnstakeRequest(bytes32 requestId) external payable nonReentrant whenNotPaused;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>bytes32</code></td><td>Request ID to cancel</td></tr>
</tbody></table>
</div>
<h3 id="_createstakerequestid"><a class="header" href="#_createstakerequestid">_createStakeRequestId</a></h3>
<p>Creates a unique request ID for a staking request</p>
<pre><code class="language-solidity">function _createStakeRequestId(address user, uint256 amount, uint256 timestamp) internal returns (bytes32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>user</code></td><td><code>address</code></td><td>User address</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount of underlying assets</td></tr>
<tr><td><code>timestamp</code></td><td><code>uint256</code></td><td>Timestamp</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>Request ID</td></tr>
</tbody></table>
</div>
<h3 id="setpaused-3"><a class="header" href="#setpaused-3">setPaused</a></h3>
<p>Sets the pause state of the contract</p>
<p><em>Only callable internally by inheriting contracts</em></p>
<pre><code class="language-solidity">function setPaused(bool paused_) external onlyRoles(EMERGENCY_ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>paused_</code></td><td><code>bool</code></td><td>New pause state</td></tr>
</tbody></table>
</div>
<h3 id="calculatestktokenprice-1"><a class="header" href="#calculatestktokenprice-1">calculateStkTokenPrice</a></h3>
<p>Calculates stkToken price with safety checks</p>
<p><em>Standard price calculation used across settlement modules</em></p>
<pre><code class="language-solidity">function calculateStkTokenPrice() external view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>price Price per stkToken in underlying asset terms</td></tr>
</tbody></table>
</div>
<h3 id="shareprice-1"><a class="header" href="#shareprice-1">sharePrice</a></h3>
<p>Calculates the price of stkTokens in underlying asset terms</p>
<p><em>Uses the last total assets and total supply to calculate the price</em></p>
<pre><code class="language-solidity">function sharePrice() external view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>price Price per stkToken in underlying asset terms</td></tr>
</tbody></table>
</div>
<h3 id="totalassets-2"><a class="header" href="#totalassets-2">totalAssets</a></h3>
<p>Returns the current total assets from adapter (real-time)</p>
<pre><code class="language-solidity">function totalAssets() external view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Total assets currently deployed in strategies</td></tr>
</tbody></table>
</div>
<h3 id="getbatchid-1"><a class="header" href="#getbatchid-1">getBatchId</a></h3>
<p>Returns the current batch</p>
<pre><code class="language-solidity">function getBatchId() public view returns (bytes32);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>Batch</td></tr>
</tbody></table>
</div>
<h3 id="getsafebatchid-1"><a class="header" href="#getsafebatchid-1">getSafeBatchId</a></h3>
<p>Returns the safe batch</p>
<pre><code class="language-solidity">function getSafeBatchId() external view returns (bytes32);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>Batch</td></tr>
</tbody></table>
</div>
<h3 id="isbatchclosed-1"><a class="header" href="#isbatchclosed-1">isBatchClosed</a></h3>
<p>Returns whether the current batch is closed</p>
<pre><code class="language-solidity">function isBatchClosed() external view returns (bool);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Whether the current batch is closed</td></tr>
</tbody></table>
</div>
<h3 id="isbatchsettled-1"><a class="header" href="#isbatchsettled-1">isBatchSettled</a></h3>
<p>Returns whether the current batch is settled</p>
<pre><code class="language-solidity">function isBatchSettled() external view returns (bool);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Whether the current batch is settled</td></tr>
</tbody></table>
</div>
<h3 id="getbatchidinfo-1"><a class="header" href="#getbatchidinfo-1">getBatchIdInfo</a></h3>
<p>Returns the current batch ID, whether it is closed, and whether it is settled</p>
<pre><code class="language-solidity">function getBatchIdInfo()
    external
    view
    returns (bytes32 batchId, address batchReceiver, bool isClosed, bool isSettled);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>Current batch ID</td></tr>
<tr><td><code>batchReceiver</code></td><td><code>address</code></td><td>Current batch receiver</td></tr>
<tr><td><code>isClosed</code></td><td><code>bool</code></td><td>Whether the current batch is closed</td></tr>
<tr><td><code>isSettled</code></td><td><code>bool</code></td><td>Whether the current batch is settled</td></tr>
</tbody></table>
</div>
<h3 id="getbatchidreceiver-1"><a class="header" href="#getbatchidreceiver-1">getBatchIdReceiver</a></h3>
<p>Returns the batch receiver for the current batch</p>
<pre><code class="language-solidity">function getBatchIdReceiver(bytes32 batchId) external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Batch receiver</td></tr>
</tbody></table>
</div>
<h3 id="getbatchreceiver-1"><a class="header" href="#getbatchreceiver-1">getBatchReceiver</a></h3>
<p>Returns the batch receiver for a given batch (alias for getBatchIdReceiver)</p>
<pre><code class="language-solidity">function getBatchReceiver(bytes32 batchId) external view returns (address);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Batch receiver</td></tr>
</tbody></table>
</div>
<h3 id="getsafebatchreceiver-1"><a class="header" href="#getsafebatchreceiver-1">getSafeBatchReceiver</a></h3>
<pre><code class="language-solidity">function getSafeBatchReceiver(bytes32 batchId) external view returns (address);
</code></pre>
<h3 id="_authorizeupgrade-1"><a class="header" href="#_authorizeupgrade-1">_authorizeUpgrade</a></h3>
<p>Authorize upgrade (only owner can upgrade)</p>
<p><em>This allows upgrading the main contract while keeping modules separate</em></p>
<pre><code class="language-solidity">function _authorizeUpgrade(address newImplementation) internal view override onlyRoles(ADMIN_ROLE);
</code></pre>
<h3 id="receive"><a class="header" href="#receive">receive</a></h3>
<p>Accepts ETH transfers</p>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="contractname-3"><a class="header" href="#contractname-3">contractName</a></h3>
<p>Returns the contract name</p>
<pre><code class="language-solidity">function contractName() external pure returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Contract name</td></tr>
</tbody></table>
</div>
<h3 id="contractversion-3"><a class="header" href="#contractversion-3">contractVersion</a></h3>
<p>Returns the contract version</p>
<pre><code class="language-solidity">function contractVersion() external pure returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Contract version</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="kassetrouter"><a class="header" href="#kassetrouter">kAssetRouter</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/kAssetRouter.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/kAssetRouter.sol//src/interfaces/IkAssetRouter.sol/interface.IkAssetRouter.html">IkAssetRouter</a>, Initializable, UUPSUpgradeable, <a href="src/kAssetRouter.sol//src/base/kBase.sol/contract.kBase.html">kBase</a>, Multicallable</p>
<h2 id="state-variables-6"><a class="header" href="#state-variables-6">State Variables</a></h2>
<h3 id="kassetrouter_storage_location"><a class="header" href="#kassetrouter_storage_location">KASSETROUTER_STORAGE_LOCATION</a></h3>
<pre><code class="language-solidity">bytes32 private constant KASSETROUTER_STORAGE_LOCATION =
    0x72fdaf6608fcd614cdab8afd23d0b707bfc44e685019cc3a5ace611655fe7f00;
</code></pre>
<h3 id="default_vault_settlement_cooldown"><a class="header" href="#default_vault_settlement_cooldown">DEFAULT_VAULT_SETTLEMENT_COOLDOWN</a></h3>
<pre><code class="language-solidity">uint256 private constant DEFAULT_VAULT_SETTLEMENT_COOLDOWN = 1 hours;
</code></pre>
<h3 id="max_vault_settlement_cooldown"><a class="header" href="#max_vault_settlement_cooldown">MAX_VAULT_SETTLEMENT_COOLDOWN</a></h3>
<pre><code class="language-solidity">uint256 private constant MAX_VAULT_SETTLEMENT_COOLDOWN = 1 days;
</code></pre>
<h2 id="functions-20"><a class="header" href="#functions-20">Functions</a></h2>
<h3 id="_getkassetrouterstorage"><a class="header" href="#_getkassetrouterstorage">_getkAssetRouterStorage</a></h3>
<pre><code class="language-solidity">function _getkAssetRouterStorage() private pure returns (kAssetRouterStorage storage $);
</code></pre>
<h3 id="whennotpaused-1"><a class="header" href="#whennotpaused-1">whenNotPaused</a></h3>
<pre><code class="language-solidity">modifier whenNotPaused();
</code></pre>
<h3 id="onlystakingvault-1"><a class="header" href="#onlystakingvault-1">onlyStakingVault</a></h3>
<pre><code class="language-solidity">modifier onlyStakingVault();
</code></pre>
<h3 id="constructor-2"><a class="header" href="#constructor-2">constructor</a></h3>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="initialize-2"><a class="header" href="#initialize-2">initialize</a></h3>
<p>Initialize the kAssetRouter with asset and admin configuration</p>
<pre><code class="language-solidity">function initialize(address registry_, address owner_, address admin_, bool paused_) external initializer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>registry_</code></td><td><code>address</code></td><td>Address of the kRegistry contract</td></tr>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Address of the owner</td></tr>
<tr><td><code>admin_</code></td><td><code>address</code></td><td>Address of the admin</td></tr>
<tr><td><code>paused_</code></td><td><code>bool</code></td><td>Initial pause state</td></tr>
</tbody></table>
</div>
<h3 id="kassetpush-1"><a class="header" href="#kassetpush-1">kAssetPush</a></h3>
<p>Push assets from kMinter to designated DN vault</p>
<pre><code class="language-solidity">function kAssetPush(
    address _asset,
    uint256 amount,
    bytes32 batchId
)
    external
    payable
    nonReentrant
    whenNotPaused
    onlyKMinter;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_asset</code></td><td><code>address</code></td><td>The asset being deposited</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount of assets being pushed</td></tr>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>The batch ID from the DN vault</td></tr>
</tbody></table>
</div>
<h3 id="kassetrequestpull-1"><a class="header" href="#kassetrequestpull-1">kAssetRequestPull</a></h3>
<p>Request to pull assets for kMinter redemptions</p>
<pre><code class="language-solidity">function kAssetRequestPull(
    address _asset,
    address _vault,
    uint256 amount,
    bytes32 batchId
)
    external
    payable
    nonReentrant
    whenNotPaused
    onlyKMinter;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_asset</code></td><td><code>address</code></td><td>The asset to redeem</td></tr>
<tr><td><code>_vault</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount requested for redemption</td></tr>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>The batch ID for this redemption</td></tr>
</tbody></table>
</div>
<h3 id="kassettransfer-1"><a class="header" href="#kassettransfer-1">kAssetTransfer</a></h3>
<p>Transfer assets between kStakingVaults</p>
<pre><code class="language-solidity">function kAssetTransfer(
    address sourceVault,
    address targetVault,
    address _asset,
    uint256 amount,
    bytes32 batchId
)
    external
    payable
    nonReentrant
    whenNotPaused
    onlyStakingVault;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sourceVault</code></td><td><code>address</code></td><td>The vault to transfer assets from</td></tr>
<tr><td><code>targetVault</code></td><td><code>address</code></td><td>The vault to transfer assets to</td></tr>
<tr><td><code>_asset</code></td><td><code>address</code></td><td>The asset to transfer</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount of assets to transfer</td></tr>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>The batch ID for this transfer</td></tr>
</tbody></table>
</div>
<h3 id="ksharesrequestpush-1"><a class="header" href="#ksharesrequestpush-1">kSharesRequestPush</a></h3>
<p>Request to pull shares for kStakingVault redemptions</p>
<pre><code class="language-solidity">function kSharesRequestPush(
    address sourceVault,
    uint256 amount,
    bytes32 batchId
)
    external
    payable
    nonReentrant
    whenNotPaused
    onlyStakingVault;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sourceVault</code></td><td><code>address</code></td><td>The vault to redeem shares from</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount requested for redemption</td></tr>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>The batch ID for this redemption</td></tr>
</tbody></table>
</div>
<h3 id="ksharesrequestpull-1"><a class="header" href="#ksharesrequestpull-1">kSharesRequestPull</a></h3>
<p>Request to pull shares for kStakingVault redemptions</p>
<pre><code class="language-solidity">function kSharesRequestPull(
    address sourceVault,
    uint256 amount,
    bytes32 batchId
)
    external
    payable
    nonReentrant
    whenNotPaused
    onlyStakingVault;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sourceVault</code></td><td><code>address</code></td><td>The vault to redeem shares from</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount requested for redemption</td></tr>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>The batch ID for this redemption</td></tr>
</tbody></table>
</div>
<h3 id="proposesettlebatch-1"><a class="header" href="#proposesettlebatch-1">proposeSettleBatch</a></h3>
<p>Propose a settlement for a vault's batch</p>
<pre><code class="language-solidity">function proposeSettleBatch(
    address asset,
    address vault,
    bytes32 batchId,
    uint256 totalAssets_,
    uint256 netted,
    uint256 yield,
    bool profit
)
    external
    payable
    nonReentrant
    whenNotPaused
    onlyRelayer
    returns (bytes32 proposalId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>Asset address</td></tr>
<tr><td><code>vault</code></td><td><code>address</code></td><td>Vault address to settle</td></tr>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>Batch ID to settle</td></tr>
<tr><td><code>totalAssets_</code></td><td><code>uint256</code></td><td>Total assets in the vault with Deposited and Requested and Shares</td></tr>
<tr><td><code>netted</code></td><td><code>uint256</code></td><td>Netted amount in current batch</td></tr>
<tr><td><code>yield</code></td><td><code>uint256</code></td><td>Yield in current batch</td></tr>
<tr><td><code>profit</code></td><td><code>bool</code></td><td>Whether the batch is profitable</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proposalId</code></td><td><code>bytes32</code></td><td>The unique identifier for this proposal</td></tr>
</tbody></table>
</div>
<h3 id="executesettlebatch-1"><a class="header" href="#executesettlebatch-1">executeSettleBatch</a></h3>
<p>Execute a settlement proposal after cooldown period</p>
<pre><code class="language-solidity">function executeSettleBatch(bytes32 proposalId) external nonReentrant whenNotPaused;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proposalId</code></td><td><code>bytes32</code></td><td>The proposal ID to execute</td></tr>
</tbody></table>
</div>
<h3 id="cancelproposal-1"><a class="header" href="#cancelproposal-1">cancelProposal</a></h3>
<p>Cancel a settlement proposal before execution</p>
<pre><code class="language-solidity">function cancelProposal(bytes32 proposalId) external nonReentrant whenNotPaused onlyRelayer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proposalId</code></td><td><code>bytes32</code></td><td>The proposal ID to cancel</td></tr>
</tbody></table>
</div>
<h3 id="updateproposal-1"><a class="header" href="#updateproposal-1">updateProposal</a></h3>
<p>Update a settlement proposal before execution</p>
<pre><code class="language-solidity">function updateProposal(
    bytes32 proposalId,
    uint256 totalAssets_,
    uint256 netted,
    uint256 yield,
    bool profit
)
    external
    nonReentrant
    whenNotPaused
    onlyRelayer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proposalId</code></td><td><code>bytes32</code></td><td>The proposal ID to update</td></tr>
<tr><td><code>totalAssets_</code></td><td><code>uint256</code></td><td>New total assets value</td></tr>
<tr><td><code>netted</code></td><td><code>uint256</code></td><td>New netted amount</td></tr>
<tr><td><code>yield</code></td><td><code>uint256</code></td><td>New yield amount</td></tr>
<tr><td><code>profit</code></td><td><code>bool</code></td><td>New profit status</td></tr>
</tbody></table>
</div>
<h3 id="_executesettlement"><a class="header" href="#_executesettlement">_executeSettlement</a></h3>
<p>Internal function to execute settlement logic</p>
<pre><code class="language-solidity">function _executeSettlement(VaultSettlementProposal storage proposal) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proposal</code></td><td><code>VaultSettlementProposal</code></td><td>The settlement proposal to execute</td></tr>
</tbody></table>
</div>
<h3 id="setpaused-4"><a class="header" href="#setpaused-4">setPaused</a></h3>
<p>Set contract pause state</p>
<pre><code class="language-solidity">function setPaused(bool paused) external onlyRoles(EMERGENCY_ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>paused</code></td><td><code>bool</code></td><td>New pause state</td></tr>
</tbody></table>
</div>
<h3 id="setsettlementcooldown-1"><a class="header" href="#setsettlementcooldown-1">setSettlementCooldown</a></h3>
<p>Set the cooldown period for settlement proposals</p>
<pre><code class="language-solidity">function setSettlementCooldown(uint256 cooldown) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>cooldown</code></td><td><code>uint256</code></td><td>New cooldown period in seconds</td></tr>
</tbody></table>
</div>
<h3 id="getsettlementproposal-1"><a class="header" href="#getsettlementproposal-1">getSettlementProposal</a></h3>
<p>Get details of a settlement proposal</p>
<pre><code class="language-solidity">function getSettlementProposal(bytes32 proposalId) external view returns (VaultSettlementProposal memory proposal);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proposalId</code></td><td><code>bytes32</code></td><td>The proposal ID</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proposal</code></td><td><code>VaultSettlementProposal</code></td><td>The settlement proposal details</td></tr>
</tbody></table>
</div>
<h3 id="canexecuteproposal-1"><a class="header" href="#canexecuteproposal-1">canExecuteProposal</a></h3>
<p>Check if a proposal can be executed</p>
<pre><code class="language-solidity">function canExecuteProposal(bytes32 proposalId) external view returns (bool canExecute, string memory reason);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proposalId</code></td><td><code>bytes32</code></td><td>The proposal ID</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>canExecute</code></td><td><code>bool</code></td><td>Whether the proposal can be executed</td></tr>
<tr><td><code>reason</code></td><td><code>string</code></td><td>Reason if cannot execute</td></tr>
</tbody></table>
</div>
<h3 id="getsettlementcooldown-1"><a class="header" href="#getsettlementcooldown-1">getSettlementCooldown</a></h3>
<p>Get the current settlement cooldown period</p>
<pre><code class="language-solidity">function getSettlementCooldown() external view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>cooldown The cooldown period in seconds</td></tr>
</tbody></table>
</div>
<h3 id="_virtualbalance"><a class="header" href="#_virtualbalance">_virtualBalance</a></h3>
<p>gets the virtual balance of a vault</p>
<pre><code class="language-solidity">function _virtualBalance(address vault, address asset) internal view returns (uint256 balance);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>the vault address</td></tr>
<tr><td><code>asset</code></td><td><code>address</code></td><td>the asset address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>balance</code></td><td><code>uint256</code></td><td>the balance of the vault in all adapters.</td></tr>
</tbody></table>
</div>
<h3 id="ispaused-3"><a class="header" href="#ispaused-3">isPaused</a></h3>
<p>Check if contract is paused</p>
<pre><code class="language-solidity">function isPaused() external view returns (bool);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>True if paused</td></tr>
</tbody></table>
</div>
<h3 id="getdnvaultbyasset-1"><a class="header" href="#getdnvaultbyasset-1">getDNVaultByAsset</a></h3>
<p>Gets the DN vault address for a given asset</p>
<p><em>Reverts if asset not supported</em></p>
<pre><code class="language-solidity">function getDNVaultByAsset(address asset) external view returns (address vault);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>The asset address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The corresponding DN vault address</td></tr>
</tbody></table>
</div>
<h3 id="getbatchidbalances-1"><a class="header" href="#getbatchidbalances-1">getBatchIdBalances</a></h3>
<p>Get batch balances for a vault</p>
<pre><code class="language-solidity">function getBatchIdBalances(
    address vault,
    bytes32 batchId
)
    external
    view
    returns (uint256 deposited, uint256 requested);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>Vault address</td></tr>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>Batch ID</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>deposited</code></td><td><code>uint256</code></td><td>Amount deposited in this batch</td></tr>
<tr><td><code>requested</code></td><td><code>uint256</code></td><td>Amount requested in this batch</td></tr>
</tbody></table>
</div>
<h3 id="getrequestedshares-1"><a class="header" href="#getrequestedshares-1">getRequestedShares</a></h3>
<p>Get requested shares for a vault batch</p>
<pre><code class="language-solidity">function getRequestedShares(address vault, bytes32 batchId) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>Vault address</td></tr>
<tr><td><code>batchId</code></td><td><code>bytes32</code></td><td>Batch ID</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Requested shares amount</td></tr>
</tbody></table>
</div>
<h3 id="_authorizeupgrade-2"><a class="header" href="#_authorizeupgrade-2">_authorizeUpgrade</a></h3>
<p>Authorize contract upgrade</p>
<pre><code class="language-solidity">function _authorizeUpgrade(address newImplementation) internal view override onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newImplementation</code></td><td><code>address</code></td><td>New implementation address</td></tr>
</tbody></table>
</div>
<h3 id="receive-1"><a class="header" href="#receive-1">receive</a></h3>
<p>Receive ETH (for gas refunds, etc.)</p>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="contractname-4"><a class="header" href="#contractname-4">contractName</a></h3>
<p>Returns the contract name</p>
<pre><code class="language-solidity">function contractName() external pure returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Contract name</td></tr>
</tbody></table>
</div>
<h3 id="contractversion-4"><a class="header" href="#contractversion-4">contractVersion</a></h3>
<p>Returns the contract version</p>
<pre><code class="language-solidity">function contractVersion() external pure returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Contract version</td></tr>
</tbody></table>
</div>
<h2 id="structs-8"><a class="header" href="#structs-8">Structs</a></h2>
<h3 id="kassetrouterstorage"><a class="header" href="#kassetrouterstorage">kAssetRouterStorage</a></h3>
<p><strong>Note:</strong>
storage-location: erc7201:kam.storage.kAssetRouter</p>
<pre><code class="language-solidity">struct kAssetRouterStorage {
    mapping(address account =&gt; mapping(bytes32 batchId =&gt; Balances)) vaultBatchBalances;
    mapping(address vault =&gt; mapping(bytes32 batchId =&gt; uint256)) vaultRequestedShares;
    mapping(bytes32 proposalId =&gt; VaultSettlementProposal) settlementProposals;
    uint256 vaultSettlementCooldown;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="kbatchreceiver"><a class="header" href="#kbatchreceiver">kBatchReceiver</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/kBatchReceiver.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/kBatchReceiver.sol//src/interfaces/IkBatchReceiver.sol/interface.IkBatchReceiver.html">IkBatchReceiver</a></p>
<p>Minimal proxy contract that holds and distributes settled assets for batch redemptions</p>
<p><em>Deployed per batch to isolate asset distribution and enable efficient settlement</em></p>
<h2 id="state-variables-7"><a class="header" href="#state-variables-7">State Variables</a></h2>
<h3 id="kminter-1"><a class="header" href="#kminter-1">kMinter</a></h3>
<pre><code class="language-solidity">address public immutable kMinter;
</code></pre>
<h3 id="asset-3"><a class="header" href="#asset-3">asset</a></h3>
<pre><code class="language-solidity">address public asset;
</code></pre>
<h3 id="batchid-1"><a class="header" href="#batchid-1">batchId</a></h3>
<pre><code class="language-solidity">bytes32 public batchId;
</code></pre>
<h2 id="functions-21"><a class="header" href="#functions-21">Functions</a></h2>
<h3 id="constructor-3"><a class="header" href="#constructor-3">constructor</a></h3>
<p>Sets the kMinter address immutably</p>
<p><em>Sets kMinter as immutable variable</em></p>
<pre><code class="language-solidity">constructor(address _kMinter);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_kMinter</code></td><td><code>address</code></td><td>Address of the kMinter contract (only authorized caller)</td></tr>
</tbody></table>
</div>
<h3 id="initialize-3"><a class="header" href="#initialize-3">initialize</a></h3>
<p>Initializes the batch receiver with batch parameters</p>
<p><em>Sets batch ID and asset, then emits initialization event</em></p>
<pre><code class="language-solidity">function initialize(bytes32 _batchId, address _asset) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_batchId</code></td><td><code>bytes32</code></td><td>The batch ID this receiver serves</td></tr>
<tr><td><code>_asset</code></td><td><code>address</code></td><td>Address of the asset contract</td></tr>
</tbody></table>
</div>
<h3 id="pullassets-1"><a class="header" href="#pullassets-1">pullAssets</a></h3>
<p>Transfers assets from kMinter to the specified receiver</p>
<p><em>Only callable by kMinter, transfers assets from caller to receiver</em></p>
<pre><code class="language-solidity">function pullAssets(address receiver, uint256 amount, bytes32 _batchId) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>receiver</code></td><td><code>address</code></td><td>Address to receive the assets</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount of assets to transfer</td></tr>
<tr><td><code>_batchId</code></td><td><code>bytes32</code></td><td>Batch ID for validation (must match this receiver's batch)</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="kminter-2"><a class="header" href="#kminter-2">kMinter</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/kMinter.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/kMinter.sol//src/interfaces/IkMinter.sol/interface.IkMinter.html">IkMinter</a>, Initializable, UUPSUpgradeable, <a href="src/kMinter.sol//src/base/kBase.sol/contract.kBase.html">kBase</a>, <a href="src/kMinter.sol//src/abstracts/Extsload.sol/abstract.Extsload.html">Extsload</a></p>
<p>Institutional minting and redemption manager for kTokens</p>
<p><em>Manages deposits/redemptions through kStakingVault with batch settlement</em></p>
<h2 id="state-variables-8"><a class="header" href="#state-variables-8">State Variables</a></h2>
<h3 id="institution_role"><a class="header" href="#institution_role">INSTITUTION_ROLE</a></h3>
<pre><code class="language-solidity">uint256 internal constant INSTITUTION_ROLE = _ROLE_3;
</code></pre>
<h3 id="kminter_storage_location"><a class="header" href="#kminter_storage_location">KMINTER_STORAGE_LOCATION</a></h3>
<pre><code class="language-solidity">bytes32 private constant KMINTER_STORAGE_LOCATION = 0xd0574379115d2b8497bfd9020aa9e0becaffc59e5509520aa5fe8c763e40d000;
</code></pre>
<h2 id="functions-22"><a class="header" href="#functions-22">Functions</a></h2>
<h3 id="_getkminterstorage"><a class="header" href="#_getkminterstorage">_getkMinterStorage</a></h3>
<pre><code class="language-solidity">function _getkMinterStorage() private pure returns (kMinterStorage storage $);
</code></pre>
<h3 id="whennotpaused-2"><a class="header" href="#whennotpaused-2">whenNotPaused</a></h3>
<p>Ensures function cannot be called when contract is paused</p>
<pre><code class="language-solidity">modifier whenNotPaused();
</code></pre>
<h3 id="onlyinstitution-1"><a class="header" href="#onlyinstitution-1">onlyInstitution</a></h3>
<p>Ensures function can only be called by an institution</p>
<pre><code class="language-solidity">modifier onlyInstitution();
</code></pre>
<h3 id="constructor-4"><a class="header" href="#constructor-4">constructor</a></h3>
<p>Disables initializers to prevent implementation contract initialization</p>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="initialize-4"><a class="header" href="#initialize-4">initialize</a></h3>
<p>Initializes the kMinter contract</p>
<pre><code class="language-solidity">function initialize(address registry_, address owner_, address admin_, address emergencyAdmin_) external initializer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>registry_</code></td><td><code>address</code></td><td>Address of the registry contract</td></tr>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Address of the owner</td></tr>
<tr><td><code>admin_</code></td><td><code>address</code></td><td>Address of the admin</td></tr>
<tr><td><code>emergencyAdmin_</code></td><td><code>address</code></td><td>Address of the emergency admin</td></tr>
</tbody></table>
</div>
<h3 id="mint-2"><a class="header" href="#mint-2">mint</a></h3>
<p>Creates new kTokens by accepting underlying asset deposits in a 1:1 ratio</p>
<p><em>Validates request parameters, transfers assets, deposits to vault, and mints tokens</em></p>
<pre><code class="language-solidity">function mint(
    address asset_,
    address to_,
    uint256 amount_
)
    external
    payable
    nonReentrant
    whenNotPaused
    onlyInstitution
    onlyRegisteredAsset(asset_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset_</code></td><td><code>address</code></td><td>Address of the asset to mint</td></tr>
<tr><td><code>to_</code></td><td><code>address</code></td><td>Address of the recipient</td></tr>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>Amount of the asset to mint</td></tr>
</tbody></table>
</div>
<h3 id="requestredeem-1"><a class="header" href="#requestredeem-1">requestRedeem</a></h3>
<p>Initiates redemption process by burning kTokens and creating batch redemption request</p>
<p><em>Burns tokens immediately, generates unique request ID, and adds to batch for settlement</em></p>
<pre><code class="language-solidity">function requestRedeem(
    address asset_,
    address to_,
    uint256 amount_
)
    external
    payable
    nonReentrant
    whenNotPaused
    onlyInstitution
    onlyRegisteredAsset(asset_)
    returns (bytes32 requestId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset_</code></td><td><code>address</code></td><td>Address of the asset to redeem</td></tr>
<tr><td><code>to_</code></td><td><code>address</code></td><td>Address of the recipient</td></tr>
<tr><td><code>amount_</code></td><td><code>uint256</code></td><td>Amount of the asset to redeem</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>bytes32</code></td><td>Unique identifier for tracking this redemption request</td></tr>
</tbody></table>
</div>
<h3 id="redeem-3"><a class="header" href="#redeem-3">redeem</a></h3>
<p>Executes redemption for a request in a settled batch</p>
<pre><code class="language-solidity">function redeem(bytes32 requestId) external payable nonReentrant whenNotPaused onlyInstitution;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>bytes32</code></td><td>Request ID to execute</td></tr>
</tbody></table>
</div>
<h3 id="cancelrequest-1"><a class="header" href="#cancelrequest-1">cancelRequest</a></h3>
<p>Cancels a redemption request before batch settlement</p>
<pre><code class="language-solidity">function cancelRequest(bytes32 requestId) external payable nonReentrant whenNotPaused onlyInstitution;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>bytes32</code></td><td>Request ID to cancel</td></tr>
</tbody></table>
</div>
<h3 id="_createredeemrequestid"><a class="header" href="#_createredeemrequestid">_createRedeemRequestId</a></h3>
<p>Generates a request ID</p>
<pre><code class="language-solidity">function _createRedeemRequestId(address user, uint256 amount, uint256 timestamp) internal returns (bytes32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>user</code></td><td><code>address</code></td><td>User address</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount</td></tr>
<tr><td><code>timestamp</code></td><td><code>uint256</code></td><td>Timestamp</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>Request ID</td></tr>
</tbody></table>
</div>
<h3 id="setpaused-5"><a class="header" href="#setpaused-5">setPaused</a></h3>
<p>Set contract pause state</p>
<pre><code class="language-solidity">function setPaused(bool paused) external onlyRoles(EMERGENCY_ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>paused</code></td><td><code>bool</code></td><td>New pause state</td></tr>
</tbody></table>
</div>
<h3 id="ispaused-4"><a class="header" href="#ispaused-4">isPaused</a></h3>
<p>Check if contract is paused</p>
<pre><code class="language-solidity">function isPaused() external view returns (bool);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>True if paused</td></tr>
</tbody></table>
</div>
<h3 id="getredeemrequest-1"><a class="header" href="#getredeemrequest-1">getRedeemRequest</a></h3>
<p>Get a redeem request</p>
<pre><code class="language-solidity">function getRedeemRequest(bytes32 requestId) external view returns (RedeemRequest memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>requestId</code></td><td><code>bytes32</code></td><td>Request ID</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>RedeemRequest</code></td><td>Redeem request</td></tr>
</tbody></table>
</div>
<h3 id="getuserrequests-1"><a class="header" href="#getuserrequests-1">getUserRequests</a></h3>
<p>Get all redeem requests for a user</p>
<pre><code class="language-solidity">function getUserRequests(address user) external view returns (bytes32[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>user</code></td><td><code>address</code></td><td>User address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32[]</code></td><td>Redeem requests</td></tr>
</tbody></table>
</div>
<h3 id="getrequestcounter-1"><a class="header" href="#getrequestcounter-1">getRequestCounter</a></h3>
<p>Get the request counter</p>
<pre><code class="language-solidity">function getRequestCounter() external view returns (uint256);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Request counter</td></tr>
</tbody></table>
</div>
<h3 id="_authorizeupgrade-3"><a class="header" href="#_authorizeupgrade-3">_authorizeUpgrade</a></h3>
<p>Authorizes contract upgrades</p>
<p><em>Only callable by ADMIN_ROLE</em></p>
<pre><code class="language-solidity">function _authorizeUpgrade(address newImplementation) internal view override onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newImplementation</code></td><td><code>address</code></td><td>New implementation address</td></tr>
</tbody></table>
</div>
<h3 id="receive-2"><a class="header" href="#receive-2">receive</a></h3>
<p>Accepts ETH transfers</p>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="contractname-5"><a class="header" href="#contractname-5">contractName</a></h3>
<p>Returns the contract name</p>
<pre><code class="language-solidity">function contractName() external pure returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Contract name</td></tr>
</tbody></table>
</div>
<h3 id="contractversion-5"><a class="header" href="#contractversion-5">contractVersion</a></h3>
<p>Returns the contract version</p>
<pre><code class="language-solidity">function contractVersion() external pure returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Contract version</td></tr>
</tbody></table>
</div>
<h2 id="structs-9"><a class="header" href="#structs-9">Structs</a></h2>
<h3 id="kminterstorage"><a class="header" href="#kminterstorage">kMinterStorage</a></h3>
<p><strong>Note:</strong>
storage-location: erc7201:kam.storage.kMinter</p>
<pre><code class="language-solidity">struct kMinterStorage {
    uint64 requestCounter;
    mapping(bytes32 =&gt; RedeemRequest) redeemRequests;
    mapping(address =&gt; EnumerableSetLib.Bytes32Set) userRequests;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="kregistry"><a class="header" href="#kregistry">kRegistry</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/kRegistry.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/kRegistry.sol//src/interfaces/IkRegistry.sol/interface.IkRegistry.html">IkRegistry</a>, Initializable, UUPSUpgradeable, OwnableRoles</p>
<p>Central registry for KAM protocol contracts</p>
<p><em>Manages singleton contracts, vault registration, asset support, and kToken mapping</em></p>
<h2 id="state-variables-9"><a class="header" href="#state-variables-9">State Variables</a></h2>
<h3 id="admin_role-3"><a class="header" href="#admin_role-3">ADMIN_ROLE</a></h3>
<pre><code class="language-solidity">uint256 internal constant ADMIN_ROLE = _ROLE_0;
</code></pre>
<h3 id="factory_role"><a class="header" href="#factory_role">FACTORY_ROLE</a></h3>
<pre><code class="language-solidity">uint256 internal constant FACTORY_ROLE = _ROLE_1;
</code></pre>
<h3 id="relayer_role"><a class="header" href="#relayer_role">RELAYER_ROLE</a></h3>
<pre><code class="language-solidity">uint256 internal constant RELAYER_ROLE = _ROLE_2;
</code></pre>
<h3 id="guardian_role"><a class="header" href="#guardian_role">GUARDIAN_ROLE</a></h3>
<pre><code class="language-solidity">uint256 internal constant GUARDIAN_ROLE = _ROLE_3;
</code></pre>
<h3 id="k_minter-3"><a class="header" href="#k_minter-3">K_MINTER</a></h3>
<pre><code class="language-solidity">bytes32 public constant K_MINTER = keccak256("K_MINTER");
</code></pre>
<h3 id="k_asset_router-3"><a class="header" href="#k_asset_router-3">K_ASSET_ROUTER</a></h3>
<pre><code class="language-solidity">bytes32 public constant K_ASSET_ROUTER = keccak256("K_ASSET_ROUTER");
</code></pre>
<h3 id="usdc"><a class="header" href="#usdc">USDC</a></h3>
<pre><code class="language-solidity">bytes32 public constant USDC = keccak256("USDC");
</code></pre>
<h3 id="wbtc"><a class="header" href="#wbtc">WBTC</a></h3>
<pre><code class="language-solidity">bytes32 public constant WBTC = keccak256("WBTC");
</code></pre>
<h3 id="kregistry_storage_location"><a class="header" href="#kregistry_storage_location">KREGISTRY_STORAGE_LOCATION</a></h3>
<pre><code class="language-solidity">bytes32 private constant KREGISTRY_STORAGE_LOCATION = 0x164f5345d77b48816cdb20100c950b74361454722dab40c51ecf007b721fa800;
</code></pre>
<h2 id="functions-23"><a class="header" href="#functions-23">Functions</a></h2>
<h3 id="_getkregistrystorage"><a class="header" href="#_getkregistrystorage">_getkRegistryStorage</a></h3>
<pre><code class="language-solidity">function _getkRegistryStorage() private pure returns (kRegistryStorage storage $);
</code></pre>
<h3 id="constructor-5"><a class="header" href="#constructor-5">constructor</a></h3>
<p>Disables initializers to prevent implementation contract initialization</p>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="initialize-5"><a class="header" href="#initialize-5">initialize</a></h3>
<p>Initializes the kRegistry contract</p>
<pre><code class="language-solidity">function initialize(address owner_, address admin_, address relayer_) external initializer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Contract owner address</td></tr>
<tr><td><code>admin_</code></td><td><code>address</code></td><td>Admin role recipient</td></tr>
<tr><td><code>relayer_</code></td><td><code>address</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="setsingletoncontract-1"><a class="header" href="#setsingletoncontract-1">setSingletonContract</a></h3>
<p>Set a singleton contract address</p>
<p><em>Only callable by ADMIN_ROLE</em></p>
<pre><code class="language-solidity">function setSingletonContract(bytes32 id, address contractAddress) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>id</code></td><td><code>bytes32</code></td><td>Contract identifier (e.g., K_MINTER, K_BATCH)</td></tr>
<tr><td><code>contractAddress</code></td><td><code>address</code></td><td>Address of the singleton contract</td></tr>
</tbody></table>
</div>
<h3 id="registerasset-1"><a class="header" href="#registerasset-1">registerAsset</a></h3>
<p>Register support for a new asset and its corresponding kToken</p>
<p><em>Only callable by ADMIN_ROLE, establishes bidirectional mapping</em></p>
<pre><code class="language-solidity">function registerAsset(address asset, address kToken, bytes32 id) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>Underlying asset address (e.g., USDC, WBTC)</td></tr>
<tr><td><code>kToken</code></td><td><code>address</code></td><td>Corresponding kToken address (e.g., kUSD, kBTC)</td></tr>
<tr><td><code>id</code></td><td><code>bytes32</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="registervault-1"><a class="header" href="#registervault-1">registerVault</a></h3>
<p>Register a new vault in the protocol</p>
<p><em>Only callable by ADMIN_ROLE, sets as primary if first of its type</em></p>
<pre><code class="language-solidity">function registerVault(address vault, VaultType type_, address asset) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>Vault contract address</td></tr>
<tr><td><code>type_</code></td><td><code>VaultType</code></td><td>Type of vault (MINTER, DN, ALPHA, BETA)</td></tr>
<tr><td><code>asset</code></td><td><code>address</code></td><td>Underlying asset the vault manages</td></tr>
</tbody></table>
</div>
<h3 id="registeradapter-1"><a class="header" href="#registeradapter-1">registerAdapter</a></h3>
<p>Registers an adapter for a specific vault</p>
<pre><code class="language-solidity">function registerAdapter(address vault, address adapter) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault address</td></tr>
<tr><td><code>adapter</code></td><td><code>address</code></td><td>The adapter address</td></tr>
</tbody></table>
</div>
<h3 id="removeadapter-1"><a class="header" href="#removeadapter-1">removeAdapter</a></h3>
<p>Removes an adapter for a specific vault</p>
<pre><code class="language-solidity">function removeAdapter(address vault, address adapter) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>The vault address</td></tr>
<tr><td><code>adapter</code></td><td><code>address</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="getcontractbyid-1"><a class="header" href="#getcontractbyid-1">getContractById</a></h3>
<p>Get a singleton contract address by its identifier</p>
<p><em>Reverts if contract not set</em></p>
<pre><code class="language-solidity">function getContractById(bytes32 id) external view returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>id</code></td><td><code>bytes32</code></td><td>Contract identifier (e.g., K_MINTER, K_BATCH)</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Contract address</td></tr>
</tbody></table>
</div>
<h3 id="getassetbyid-1"><a class="header" href="#getassetbyid-1">getAssetById</a></h3>
<p>Get a singleton asset address by its identifier</p>
<p><em>Reverts if asset not set</em></p>
<pre><code class="language-solidity">function getAssetById(bytes32 id) external view returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>id</code></td><td><code>bytes32</code></td><td>Asset identifier (e.g., USDC, WBTC)</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Asset address</td></tr>
</tbody></table>
</div>
<h3 id="getallassets-1"><a class="header" href="#getallassets-1">getAllAssets</a></h3>
<p>Get all supported assets</p>
<pre><code class="language-solidity">function getAllAssets() external view returns (address[] memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address[]</code></td><td>Array of supported asset addresses</td></tr>
</tbody></table>
</div>
<h3 id="getcorecontracts-1"><a class="header" href="#getcorecontracts-1">getCoreContracts</a></h3>
<p>Get all core singleton contracts at once</p>
<pre><code class="language-solidity">function getCoreContracts() external view returns (address kMinter, address kAssetRouter);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>kMinter</code></td><td><code>address</code></td><td>The kMinter contract address</td></tr>
<tr><td><code>kAssetRouter</code></td><td><code>address</code></td><td>The kAssetRouter contract address</td></tr>
</tbody></table>
</div>
<h3 id="getvaultsbyasset-1"><a class="header" href="#getvaultsbyasset-1">getVaultsByAsset</a></h3>
<p>Get all vaults registered for a specific asset</p>
<pre><code class="language-solidity">function getVaultsByAsset(address asset) external view returns (address[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>Asset address to query</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address[]</code></td><td>Array of vault addresses</td></tr>
</tbody></table>
</div>
<h3 id="getvaultbyassetandtype-1"><a class="header" href="#getvaultbyassetandtype-1">getVaultByAssetAndType</a></h3>
<p>Get a vault address by asset and vault type</p>
<p><em>Reverts if vault not found</em></p>
<pre><code class="language-solidity">function getVaultByAssetAndType(address asset, uint8 vaultType) external view returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>Asset address</td></tr>
<tr><td><code>vaultType</code></td><td><code>uint8</code></td><td>Vault type</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Vault address</td></tr>
</tbody></table>
</div>
<h3 id="getvaulttype-1"><a class="header" href="#getvaulttype-1">getVaultType</a></h3>
<p>Get the type of a vault</p>
<pre><code class="language-solidity">function getVaultType(address vault) external view returns (uint8);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>Vault address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td>Vault type</td></tr>
</tbody></table>
</div>
<h3 id="isrelayer-1"><a class="header" href="#isrelayer-1">isRelayer</a></h3>
<p>Check if the caller is the relayer</p>
<pre><code class="language-solidity">function isRelayer(address account) external view returns (bool);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Whether the caller is the relayer</td></tr>
</tbody></table>
</div>
<h3 id="isguardian-1"><a class="header" href="#isguardian-1">isGuardian</a></h3>
<pre><code class="language-solidity">function isGuardian(address account) external view returns (bool);
</code></pre>
<h3 id="isregisteredasset-1"><a class="header" href="#isregisteredasset-1">isRegisteredAsset</a></h3>
<p>Check if an asset is supported</p>
<pre><code class="language-solidity">function isRegisteredAsset(address asset) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>Asset address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Whether the asset is supported</td></tr>
</tbody></table>
</div>
<h3 id="isvault-1"><a class="header" href="#isvault-1">isVault</a></h3>
<p>Check if a vault is registered</p>
<pre><code class="language-solidity">function isVault(address vault) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>Vault address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Whether the vault is registered</td></tr>
</tbody></table>
</div>
<h3 id="issingletoncontract-1"><a class="header" href="#issingletoncontract-1">isSingletonContract</a></h3>
<p>Check if a contract is a singleton contract</p>
<pre><code class="language-solidity">function isSingletonContract(address contractAddress) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>contractAddress</code></td><td><code>address</code></td><td>Contract address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Whether the contract is a singleton contract</td></tr>
</tbody></table>
</div>
<h3 id="isktoken-1"><a class="header" href="#isktoken-1">isKToken</a></h3>
<p>Check if a kToken is registered</p>
<pre><code class="language-solidity">function isKToken(address kToken) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>kToken</code></td><td><code>address</code></td><td>KToken address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Whether the kToken is registered</td></tr>
</tbody></table>
</div>
<h3 id="getadapters-1"><a class="header" href="#getadapters-1">getAdapters</a></h3>
<p>Get the adapter for a specific vault</p>
<pre><code class="language-solidity">function getAdapters(address vault) external view returns (address[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>Vault address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address[]</code></td><td>Adapter address (address(0) if none set)</td></tr>
</tbody></table>
</div>
<h3 id="isadapterregistered-1"><a class="header" href="#isadapterregistered-1">isAdapterRegistered</a></h3>
<p>Check if an adapter is registered</p>
<pre><code class="language-solidity">function isAdapterRegistered(address adapter) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>adapter</code></td><td><code>address</code></td><td>Adapter address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>True if adapter is registered</td></tr>
</tbody></table>
</div>
<h3 id="getvaultassets-1"><a class="header" href="#getvaultassets-1">getVaultAssets</a></h3>
<p>Get the asset for a specific vault</p>
<pre><code class="language-solidity">function getVaultAssets(address vault) external view returns (address[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>vault</code></td><td><code>address</code></td><td>Vault address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address[]</code></td><td>Asset address that the vault manages</td></tr>
</tbody></table>
</div>
<h3 id="assettoktoken-1"><a class="header" href="#assettoktoken-1">assetToKToken</a></h3>
<p>Get the kToken for a specific asset</p>
<pre><code class="language-solidity">function assetToKToken(address asset) external view returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>address</code></td><td>Asset address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>KToken address</td></tr>
</tbody></table>
</div>
<h3 id="_authorizeupgrade-4"><a class="header" href="#_authorizeupgrade-4">_authorizeUpgrade</a></h3>
<p>Authorizes contract upgrades</p>
<p><em>Only callable by contract owner</em></p>
<pre><code class="language-solidity">function _authorizeUpgrade(address newImplementation) internal view override onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newImplementation</code></td><td><code>address</code></td><td>New implementation address</td></tr>
</tbody></table>
</div>
<h3 id="receive-3"><a class="header" href="#receive-3">receive</a></h3>
<p>Receive ETH (for gas refunds, etc.)</p>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="contractname-6"><a class="header" href="#contractname-6">contractName</a></h3>
<p>Returns the contract name</p>
<pre><code class="language-solidity">function contractName() external pure returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Contract name</td></tr>
</tbody></table>
</div>
<h3 id="contractversion-6"><a class="header" href="#contractversion-6">contractVersion</a></h3>
<p>Returns the contract version</p>
<pre><code class="language-solidity">function contractVersion() external pure returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>Contract version</td></tr>
</tbody></table>
</div>
<h2 id="structs-10"><a class="header" href="#structs-10">Structs</a></h2>
<h3 id="kregistrystorage"><a class="header" href="#kregistrystorage">kRegistryStorage</a></h3>
<p><strong>Note:</strong>
storage-location: erc7201:kam.storage.kRegistry</p>
<pre><code class="language-solidity">struct kRegistryStorage {
    mapping(bytes32 =&gt; address) singletonContracts;
    mapping(address =&gt; bool) isSingletonContract;
    mapping(address =&gt; bool) isVault;
    mapping(address =&gt; uint8 vaultType) vaultType;
    mapping(address =&gt; mapping(uint8 vaultType =&gt; address)) assetToVault;
    mapping(address =&gt; EnumerableSetLib.AddressSet) vaultAsset;
    EnumerableSetLib.AddressSet allVaults;
    mapping(address =&gt; EnumerableSetLib.AddressSet) vaultsByAsset;
    mapping(bytes32 =&gt; address) singletonAssets;
    mapping(address =&gt; address) assetToKToken;
    mapping(address =&gt; bool) isKToken;
    mapping(address =&gt; address) kTokenToAsset;
    mapping(address =&gt; bool) isRegisteredAsset;
    EnumerableSetLib.AddressSet supportedAssets;
    mapping(address =&gt; EnumerableSetLib.AddressSet) vaultAdapters;
    mapping(address =&gt; bool) registeredAdapters;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ktoken-1"><a class="header" href="#ktoken-1">kToken</a></h1>
<p><a href="https://github.com/VerisLabs/KAM/blob/962a4adbf4eedc0a2cd6fb12eded69e348454133/src/kToken.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
Initializable, UUPSUpgradeable, ERC20, OwnableRoles, ReentrancyGuard, Multicallable</p>
<p>ERC20 token with role-based minting and burning capabilities</p>
<p><em>Implements UUPS upgradeable pattern with 1:1 backing by underlying assets</em></p>
<h2 id="state-variables-10"><a class="header" href="#state-variables-10">State Variables</a></h2>
<h3 id="admin_role-4"><a class="header" href="#admin_role-4">ADMIN_ROLE</a></h3>
<pre><code class="language-solidity">uint256 public constant ADMIN_ROLE = _ROLE_0;
</code></pre>
<h3 id="emergency_admin_role-3"><a class="header" href="#emergency_admin_role-3">EMERGENCY_ADMIN_ROLE</a></h3>
<pre><code class="language-solidity">uint256 public constant EMERGENCY_ADMIN_ROLE = _ROLE_1;
</code></pre>
<h3 id="minter_role"><a class="header" href="#minter_role">MINTER_ROLE</a></h3>
<pre><code class="language-solidity">uint256 public constant MINTER_ROLE = _ROLE_2;
</code></pre>
<h3 id="ktoken_storage_location"><a class="header" href="#ktoken_storage_location">KTOKEN_STORAGE_LOCATION</a></h3>
<pre><code class="language-solidity">bytes32 private constant KTOKEN_STORAGE_LOCATION = 0x2fb0aec331268355746e3684d9eaaf2249f450cf0e491ca0657288d2091eea00;
</code></pre>
<h2 id="functions-24"><a class="header" href="#functions-24">Functions</a></h2>
<h3 id="_getktokenstorage"><a class="header" href="#_getktokenstorage">_getkTokenStorage</a></h3>
<p>Returns the storage pointer for the kToken contract</p>
<pre><code class="language-solidity">function _getkTokenStorage() private pure returns (kTokenStorage storage $);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>$</code></td><td><code>kTokenStorage</code></td><td>The storage pointer for the kToken contract</td></tr>
</tbody></table>
</div>
<h3 id="whennotpaused-3"><a class="header" href="#whennotpaused-3">whenNotPaused</a></h3>
<p>Prevents function execution when contract is in paused state</p>
<p><em>Checks isPaused flag in storage and reverts with Paused error if true</em></p>
<pre><code class="language-solidity">modifier whenNotPaused();
</code></pre>
<h3 id="constructor-6"><a class="header" href="#constructor-6">constructor</a></h3>
<p>Disables initializers to prevent implementation contract from being initialized</p>
<p><em>Calls _disableInitializers from Solady's Initializable to lock implementation</em></p>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="initialize-6"><a class="header" href="#initialize-6">initialize</a></h3>
<p>Initializes the kToken contract (stack optimized - no strings)</p>
<p><em>Sets up roles and basic config. Call setupMetadata separately for name/symbol</em></p>
<pre><code class="language-solidity">function initialize(
    address owner_,
    address admin_,
    address emergencyAdmin_,
    address minter_,
    uint8 decimals_
)
    external
    initializer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner_</code></td><td><code>address</code></td><td>Owner address</td></tr>
<tr><td><code>admin_</code></td><td><code>address</code></td><td>Admin address</td></tr>
<tr><td><code>emergencyAdmin_</code></td><td><code>address</code></td><td>Emergency admin address</td></tr>
<tr><td><code>minter_</code></td><td><code>address</code></td><td>Minter address</td></tr>
<tr><td><code>decimals_</code></td><td><code>uint8</code></td><td>Token decimals</td></tr>
</tbody></table>
</div>
<h3 id="setupmetadata"><a class="header" href="#setupmetadata">setupMetadata</a></h3>
<p>Sets token metadata (separate call to avoid stack too deep)</p>
<p><em>Must be called after initialize, only by admin</em></p>
<pre><code class="language-solidity">function setupMetadata(string calldata name_, string calldata symbol_) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>name_</code></td><td><code>string</code></td><td>Token name</td></tr>
<tr><td><code>symbol_</code></td><td><code>string</code></td><td>Token symbol</td></tr>
</tbody></table>
</div>
<h3 id="mint-3"><a class="header" href="#mint-3">mint</a></h3>
<p>Creates new tokens and assigns them to the specified address</p>
<p><em>Calls internal _mint function and emits Minted event, restricted to MINTER_ROLE</em></p>
<pre><code class="language-solidity">function mint(address _to, uint256 _amount) external nonReentrant whenNotPaused onlyRoles(MINTER_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_to</code></td><td><code>address</code></td><td>The address that will receive the newly minted tokens</td></tr>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>The quantity of tokens to create and assign</td></tr>
</tbody></table>
</div>
<h3 id="burn-1"><a class="header" href="#burn-1">burn</a></h3>
<p>Destroys tokens from the specified address</p>
<p><em>Calls internal _burn function and emits Burned event, restricted to MINTER_ROLE</em></p>
<pre><code class="language-solidity">function burn(address _from, uint256 _amount) external nonReentrant whenNotPaused onlyRoles(MINTER_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_from</code></td><td><code>address</code></td><td>The address from which tokens will be destroyed</td></tr>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>The quantity of tokens to destroy</td></tr>
</tbody></table>
</div>
<h3 id="burnfrom-1"><a class="header" href="#burnfrom-1">burnFrom</a></h3>
<p>Destroys tokens from specified address using allowance mechanism</p>
<p><em>Consumes allowance before burning, calls _spendAllowance then _burn, restricted to MINTER_ROLE</em></p>
<pre><code class="language-solidity">function burnFrom(address _from, uint256 _amount) external nonReentrant whenNotPaused onlyRoles(MINTER_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_from</code></td><td><code>address</code></td><td>The address from which tokens will be destroyed</td></tr>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>The quantity of tokens to destroy from the allowance</td></tr>
</tbody></table>
</div>
<h3 id="name-5"><a class="header" href="#name-5">name</a></h3>
<p>Retrieves the human-readable name of the token</p>
<p><em>Returns the name stored in contract storage during initialization</em></p>
<pre><code class="language-solidity">function name() public view virtual override returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>The token name as a string</td></tr>
</tbody></table>
</div>
<h3 id="symbol-3"><a class="header" href="#symbol-3">symbol</a></h3>
<p>Retrieves the abbreviated symbol of the token</p>
<p><em>Returns the symbol stored in contract storage during initialization</em></p>
<pre><code class="language-solidity">function symbol() public view virtual override returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>The token symbol as a string</td></tr>
</tbody></table>
</div>
<h3 id="decimals-3"><a class="header" href="#decimals-3">decimals</a></h3>
<p>Retrieves the number of decimal places for the token</p>
<p><em>Returns the decimals value stored in contract storage during initialization</em></p>
<pre><code class="language-solidity">function decimals() public view virtual override returns (uint8);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td>The number of decimal places as uint8</td></tr>
</tbody></table>
</div>
<h3 id="ispaused-5"><a class="header" href="#ispaused-5">isPaused</a></h3>
<p>Checks whether the contract is currently in paused state</p>
<p><em>Reads the isPaused flag from contract storage</em></p>
<pre><code class="language-solidity">function isPaused() external view returns (bool);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Boolean indicating if contract operations are paused</td></tr>
</tbody></table>
</div>
<h3 id="grantadminrole-1"><a class="header" href="#grantadminrole-1">grantAdminRole</a></h3>
<p>Grant admin role</p>
<pre><code class="language-solidity">function grantAdminRole(address admin) external onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>admin</code></td><td><code>address</code></td><td>Address to grant admin role to</td></tr>
</tbody></table>
</div>
<h3 id="revokeadminrole-1"><a class="header" href="#revokeadminrole-1">revokeAdminRole</a></h3>
<p>Revoke admin role</p>
<pre><code class="language-solidity">function revokeAdminRole(address admin) external onlyOwner;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>admin</code></td><td><code>address</code></td><td>Address to revoke admin role from</td></tr>
</tbody></table>
</div>
<h3 id="grantemergencyrole-1"><a class="header" href="#grantemergencyrole-1">grantEmergencyRole</a></h3>
<p>Grant emergency role</p>
<pre><code class="language-solidity">function grantEmergencyRole(address emergency) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>emergency</code></td><td><code>address</code></td><td>Address to grant emergency role to</td></tr>
</tbody></table>
</div>
<h3 id="revokeemergencyrole-1"><a class="header" href="#revokeemergencyrole-1">revokeEmergencyRole</a></h3>
<p>Revoke emergency role</p>
<pre><code class="language-solidity">function revokeEmergencyRole(address emergency) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>emergency</code></td><td><code>address</code></td><td>Address to revoke emergency role from</td></tr>
</tbody></table>
</div>
<h3 id="grantminterrole-1"><a class="header" href="#grantminterrole-1">grantMinterRole</a></h3>
<p>Assigns minter role privileges to the specified address</p>
<p><em>Calls internal _grantRoles function to assign MINTER_ROLE</em></p>
<pre><code class="language-solidity">function grantMinterRole(address minter) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>minter</code></td><td><code>address</code></td><td>The address that will receive minter role privileges</td></tr>
</tbody></table>
</div>
<h3 id="revokeminterrole-1"><a class="header" href="#revokeminterrole-1">revokeMinterRole</a></h3>
<p>Removes minter role privileges from the specified address</p>
<p><em>Calls internal _removeRoles function to remove MINTER_ROLE</em></p>
<pre><code class="language-solidity">function revokeMinterRole(address minter) external onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>minter</code></td><td><code>address</code></td><td>The address that will lose minter role privileges</td></tr>
</tbody></table>
</div>
<h3 id="setpaused-6"><a class="header" href="#setpaused-6">setPaused</a></h3>
<p>Sets the pause state of the contract</p>
<p><em>Updates the isPaused flag in storage and emits PauseState event</em></p>
<pre><code class="language-solidity">function setPaused(bool _isPaused) external onlyRoles(EMERGENCY_ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_isPaused</code></td><td><code>bool</code></td><td>Boolean indicating whether to pause (true) or unpause (false) the contract</td></tr>
</tbody></table>
</div>
<h3 id="emergencywithdraw"><a class="header" href="#emergencywithdraw">emergencyWithdraw</a></h3>
<p>Emergency withdrawal of tokens sent by mistake</p>
<p><em>Can only be called by emergency admin when contract is paused</em></p>
<pre><code class="language-solidity">function emergencyWithdraw(address token, address to, uint256 amount) external onlyRoles(EMERGENCY_ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>token</code></td><td><code>address</code></td><td>Token address to withdraw (use address(0) for ETH)</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>Recipient address</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount to withdraw</td></tr>
</tbody></table>
</div>
<h3 id="_beforetokentransfer"><a class="header" href="#_beforetokentransfer">_beforeTokenTransfer</a></h3>
<p>Internal hook that executes before any token transfer</p>
<p><em>Applies whenNotPaused modifier to prevent transfers during pause, then calls parent implementation</em></p>
<pre><code class="language-solidity">function _beforeTokenTransfer(address from, address to, uint256 amount) internal virtual override whenNotPaused;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>address</code></td><td>The address tokens are being transferred from</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>The address tokens are being transferred to</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The quantity of tokens being transferred</td></tr>
</tbody></table>
</div>
<h3 id="_authorizeupgrade-5"><a class="header" href="#_authorizeupgrade-5">_authorizeUpgrade</a></h3>
<p>Internal function that validates upgrade authorization for UUPS pattern</p>
<p><em>Validates new implementation is not zero address and emits authorization event</em></p>
<pre><code class="language-solidity">function _authorizeUpgrade(address newImplementation) internal override onlyRoles(ADMIN_ROLE);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newImplementation</code></td><td><code>address</code></td><td>The address of the new contract implementation</td></tr>
</tbody></table>
</div>
<h3 id="contractname-7"><a class="header" href="#contractname-7">contractName</a></h3>
<p>Provides the human-readable name identifier for this contract</p>
<p><em>Returns a constant string value for contract identification purposes</em></p>
<pre><code class="language-solidity">function contractName() external pure returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>The contract name as a string literal</td></tr>
</tbody></table>
</div>
<h3 id="contractversion-7"><a class="header" href="#contractversion-7">contractVersion</a></h3>
<p>Provides the version number of this contract implementation</p>
<p><em>Returns a constant string value for version tracking purposes</em></p>
<pre><code class="language-solidity">function contractVersion() external pure returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>The contract version as a semantic version string</td></tr>
</tbody></table>
</div>
<h2 id="events-11"><a class="header" href="#events-11">Events</a></h2>
<h3 id="minted-2"><a class="header" href="#minted-2">Minted</a></h3>
<pre><code class="language-solidity">event Minted(address indexed to, uint256 amount);
</code></pre>
<h3 id="burned-1"><a class="header" href="#burned-1">Burned</a></h3>
<pre><code class="language-solidity">event Burned(address indexed from, uint256 amount);
</code></pre>
<h3 id="upgradeauthorized-1"><a class="header" href="#upgradeauthorized-1">UpgradeAuthorized</a></h3>
<pre><code class="language-solidity">event UpgradeAuthorized(address indexed newImplementation, address indexed sender);
</code></pre>
<h3 id="tokeninitialized-1"><a class="header" href="#tokeninitialized-1">TokenInitialized</a></h3>
<pre><code class="language-solidity">event TokenInitialized(string name, string symbol, uint8 decimals);
</code></pre>
<h3 id="pausestate-1"><a class="header" href="#pausestate-1">PauseState</a></h3>
<pre><code class="language-solidity">event PauseState(bool isPaused);
</code></pre>
<h3 id="authorizedcallerupdated-1"><a class="header" href="#authorizedcallerupdated-1">AuthorizedCallerUpdated</a></h3>
<pre><code class="language-solidity">event AuthorizedCallerUpdated(address indexed caller, bool authorized);
</code></pre>
<h3 id="emergencywithdrawal-1"><a class="header" href="#emergencywithdrawal-1">EmergencyWithdrawal</a></h3>
<pre><code class="language-solidity">event EmergencyWithdrawal(address indexed token, address indexed to, uint256 amount, address indexed admin);
</code></pre>
<h2 id="errors-10"><a class="header" href="#errors-10">Errors</a></h2>
<h3 id="paused-3"><a class="header" href="#paused-3">Paused</a></h3>
<pre><code class="language-solidity">error Paused();
</code></pre>
<h3 id="zeroaddress-6"><a class="header" href="#zeroaddress-6">ZeroAddress</a></h3>
<pre><code class="language-solidity">error ZeroAddress();
</code></pre>
<h3 id="zeroamount-5"><a class="header" href="#zeroamount-5">ZeroAmount</a></h3>
<pre><code class="language-solidity">error ZeroAmount();
</code></pre>
<h3 id="contractnotpaused-1"><a class="header" href="#contractnotpaused-1">ContractNotPaused</a></h3>
<pre><code class="language-solidity">error ContractNotPaused();
</code></pre>
<h2 id="structs-11"><a class="header" href="#structs-11">Structs</a></h2>
<h3 id="ktokenstorage"><a class="header" href="#ktokenstorage">kTokenStorage</a></h3>
<p><strong>Note:</strong>
storage-location: erc7201:kToken.storage.kToken</p>
<pre><code class="language-solidity">struct kTokenStorage {
    bool isPaused;
    string _name;
    string _symbol;
    uint8 _decimals;
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
